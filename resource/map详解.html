<!DOCTYPE html>
<!-- saved from url=(0053)https://www.ququ123.top/2022/04/golang_map_principle/ -->
<html lang="en-us" data-scheme="light"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="ÂéüÊñáÈìæÊé•ÔºåËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ ËøôÁØáÊñáÁ´†‰∏ªË¶ÅËÆ≤ map ÁöÑËµãÂÄº„ÄÅÂà†Èô§„ÄÅÊü•ËØ¢„ÄÅÊâ©ÂÆπÁöÑÂÖ∑‰ΩìÊâßË°åËøáÁ®ãÔºå‰ªçÁÑ∂ÊòØ‰ªéÂ∫ïÂ±ÇÁöÑËßíÂ∫¶Â±ïÂºÄ„ÄÇÁªìÂêàÊ∫êÁ†ÅÔºåÁúãÂÆåÊú¨Êñá‰∏ÄÂÆö‰ºöÂΩªÂ∫ïÊòéÁôΩ map Â∫ï"><title>„Äêgolang„Äëmap ËØ¶Ëß£</title>

<link rel="canonical" href="http://www.ququ123.top/2022/04/golang_map_principle/">

<link rel="stylesheet" href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/style.min.46208cabd58e8bcef0cfb7d7ea6b561adcca3b91dd1fc6657493a44f03c5db75.css"><script src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/pangu.min.js"></script><script src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/hm.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false}
            ]
        });
    });
</script><meta property="og:title" content="„Äêgolang„ÄëmapËØ¶Ëß£">
<meta property="og:description" content="ÂéüÊñáÈìæÊé•ÔºåËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ ËøôÁØáÊñáÁ´†‰∏ªË¶ÅËÆ≤ map ÁöÑËµãÂÄº„ÄÅÂà†Èô§„ÄÅÊü•ËØ¢„ÄÅÊâ©ÂÆπÁöÑÂÖ∑‰ΩìÊâßË°åËøáÁ®ãÔºå‰ªçÁÑ∂ÊòØ‰ªéÂ∫ïÂ±ÇÁöÑËßíÂ∫¶Â±ïÂºÄ„ÄÇÁªìÂêàÊ∫êÁ†ÅÔºåÁúãÂÆåÊú¨Êñá‰∏ÄÂÆö‰ºöÂΩªÂ∫ïÊòéÁôΩ map Â∫ï">
<meta property="og:url" content="http://www.ququ123.top/2022/04/golang_map_principle/">
<meta property="og:site_name" content="‰ª£Á†Å‰∏éÂéÜÂè≤">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:published_time" content="2022-04-01T00:00:00+00:00"><meta property="article:modified_time" content="2022-04-01T00:00:00+00:00"><meta property="og:image" content="https://img.ququ123.top/img/u=1862939405,1689361694&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG">
<meta name="twitter:title" content="„Äêgolang„ÄëmapËØ¶Ëß£">
<meta name="twitter:description" content="ÂéüÊñáÈìæÊé•ÔºåËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ ËøôÁØáÊñáÁ´†‰∏ªË¶ÅËÆ≤ map ÁöÑËµãÂÄº„ÄÅÂà†Èô§„ÄÅÊü•ËØ¢„ÄÅÊâ©ÂÆπÁöÑÂÖ∑‰ΩìÊâßË°åËøáÁ®ãÔºå‰ªçÁÑ∂ÊòØ‰ªéÂ∫ïÂ±ÇÁöÑËßíÂ∫¶Â±ïÂºÄ„ÄÇÁªìÂêàÊ∫êÁ†ÅÔºåÁúãÂÆåÊú¨Êñá‰∏ÄÂÆö‰ºöÂΩªÂ∫ïÊòéÁôΩ map Â∫ï"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://img.ququ123.top/img/u=1862939405,1689361694&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG">

<link rel="shortcut icon" href="https://www.ququ123.top/2022/04/golang_map_principle/favicon.ico">


    <link rel="shortcut icon" href="https://www.ququ123.top/2022/04/golang_map_principle/img/avatar.png">
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?315f9dbf10ef402a385430f08eb1c383";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<script async="" src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/busuanzi.pure.mini.js"></script>
<script defer="" src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/script.js" data-website-id="d501d708-5722-4653-be01-e0919e4163fd"></script><script src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/autoload.js"></script><link rel="stylesheet" href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/waifu.css"><script src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/live2d.min.js"></script><script src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/waifu-tips.js"></script>

    <link href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/css2" type="text/css" rel="stylesheet"><style id="waline-darkmode"></style></head>
    <body class="
    article-page
" style="transition: background-color 0.3s ease 0s;">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex 
    &lt;!-- 
        extended
     --&gt;
    on-phone--column extended
">
    
<div id="article-toolbar">
    <a href="http://www.ququ123.top/" class="back-home">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"></path>
  <polyline points="15 6 9 12 15 18"></polyline>
</svg>



        <span>ËøîÂõû</span>
    </a>
</div>
    <aside class="sidebar left-sidebar sticky">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header class="site-info">
        
            
            <figure class="site-avatar">
                <a href="https://www.ququ123.top/">
                
                    
                    
                    
                        
                        <img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/avatar_hu2f3b8fee1771f62c9935407d819741ec_30389_300x0_resize_box_3.png" width="300" height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <h1 class="site-name"><a href="https://www.ququ123.top/">‰ª£Á†Å‰∏éÂéÜÂè≤</a></h1>
        <h2 class="site-description">No code, no talk.</h2><ol class="social-menu">
                
                    <li>
                        <a href="https://github.com/zhulingbiezhi" target="_blank" title="GitHub">
                            
                            
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"></path>
</svg>



                            
                        </a>
                    </li>
                
            </ol></header>

    <ol class="menu" id="main-menu">
        
        
        

        <li>
            <a href="https://www.ququ123.top/">
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"></path>
  <polyline points="5 12 3 12 12 3 21 12 19 12"></polyline>
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"></path>
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"></path>
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        

        <li>
            <a href="https://www.ququ123.top/links/">
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"></path>
  <polyline points="5 12 3 12 12 3 21 12 19 12"></polyline>
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"></path>
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"></path>
</svg>



                
                <span>Friends</span>
            </a>
        </li>
        
        

        <li>
            <a href="https://www.ququ123.top/%E5%85%B3%E4%BA%8E/">
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"></path>
  <circle cx="12" cy="7" r="4"></circle>
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path>
</svg>



                
                <span> ÂÖ≥‰∫é</span>
            </a>
        </li>
        
        

        <li>
            <a href="https://www.ququ123.top/archives/">
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"></path>
  <rect x="3" y="4" width="18" height="4" rx="2"></rect>
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10"></path>
  <line x1="10" y1="12" x2="14" y2="12"></line>
</svg>



                
                <span> Archives</span>
            </a>
        </li>
        
        

        <li>
            <a href="https://www.ququ123.top/search/">
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"></path>
  <circle cx="10" cy="10" r="7"></circle>
  <line x1="21" y1="21" x2="15" y2="15"></line>
</svg>



                
                <span>Search</span>
            </a>
        </li>
        

        
            <li id="dark-mode-toggle">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"></path>
  <circle cx="8" cy="12" r="2"></circle>
  <rect x="2" y="6" width="20" height="12" rx="6"></rect>
</svg>



                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"></path>
  <circle cx="16" cy="12" r="2"></circle>
  <rect x="2" y="6" width="20" height="12" rx="6"></rect>
</svg>



                <span> ÊöóËâ≤Ê®°Âºè</span>
            </li>
        
    </ol>
</aside>

<main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="https://www.ququ123.top/2022/04/golang_map_principle/">
                
                    <img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/u=1862939405,1689361694&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG" loading="lazy" alt="Featured image of post „Äêgolang„ÄëmapËØ¶Ëß£">
                
            </a>
        </div>  
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="https://www.ququ123.top/categories/golang/" style="background-color: #2a9d8f; color: #fff;">
                golang
            </a>
        
    </header>
    

    <h2 class="article-title">
        <a href="https://www.ququ123.top/2022/04/golang_map_principle/">„Äêgolang„Äëmap ËØ¶Ëß£</a>
    </h2>

    

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"></path>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4"></path>
  <circle cx="18" cy="18" r="4"></circle>
  <path d="M15 3v4"></path>
  <path d="M7 3v4"></path>
  <path d="M3 11h16"></path>
  <path d="M18 16.496v1.504l1 1"></path>
</svg>
                <time class="article-time--published"> 2022 Âπ¥ 04 Êúà 01 Êó•</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"></path>
  <circle cx="12" cy="12" r="9"></circle>
  <polyline points="12 7 12 12 15 15"></polyline>
</svg>



                <time class="article-words">
                    19696 Â≠ó
                </time>
            </div>
        
    </footer>
    
</div>
</header>

    <section class="article-content">
<a href="https://www.digitalocean.com/?refcode=6c62bac11425&amp;utm_campaign=Referral_Invite&amp;utm_medium=Referral_Program&amp;utm_source=badge"><img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/Badge 1.svg" alt="DigitalOcean Referral Badge"></a>
<a href="https://www.digitalocean.com/?refcode=6c62bac11425&amp;utm_campaign=Referral_Invite&amp;utm_medium=Referral_Program&amp;utm_source=badge"><img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/Badge 3.svg" alt="DigitalOcean Referral Badge"></a>
<a href="https://www.digitalocean.com/?refcode=6c62bac11425&amp;utm_campaign=Referral_Invite&amp;utm_medium=Referral_Program&amp;utm_source=badge"><img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/Badge 2.svg" alt="DigitalOcean Referral Badge"></a> 

    
    
    <p><a class="link" href="https://www.ququ123.top/2024/03/ququ-blog" target="_blank" rel="noopener">ÂéüÊñáÈìæÊé•ÔºåËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ</a></p>
<p>ËøôÁØáÊñáÁ´†‰∏ªË¶ÅËÆ≤ map ÁöÑËµãÂÄº„ÄÅÂà†Èô§„ÄÅÊü•ËØ¢„ÄÅÊâ©ÂÆπÁöÑÂÖ∑‰ΩìÊâßË°åËøáÁ®ãÔºå‰ªçÁÑ∂ÊòØ‰ªéÂ∫ïÂ±ÇÁöÑËßíÂ∫¶Â±ïÂºÄ„ÄÇÁªìÂêàÊ∫êÁ†ÅÔºåÁúãÂÆåÊú¨Êñá‰∏ÄÂÆö‰ºöÂΩªÂ∫ïÊòéÁôΩ map Â∫ïÂ±ÇÂéüÁêÜ„ÄÇ</p>
<p>ÊàëË¶ÅËØ¥ÊòéÁöÑÊòØÔºåËøôÈáåÂØπ map ÁöÑÂü∫Êú¨Áî®Ê≥ïÊ∂âÂèäÊØîËæÉÂ∞ëÔºåÊàëÁõ∏‰ø°ÂèØ‰ª•ÈÄöËøáÈòÖËØªÂÖ∂‰ªñÂÖ•Èó®‰π¶Á±ç‰∫ÜËß£„ÄÇÊú¨ÊñáÁöÑÂÜÖÂÆπÊØîËæÉÊ∑±ÂÖ•Ôºå‰ΩÜÊòØÁî±‰∫éÊàëÁîª‰∫ÜÂêÑÁßçÂõæÔºåÊàëÁõ∏‰ø°ÂæàÂÆπÊòìÁúãÊáÇ„ÄÇ</p>
<h2 id="‰ªÄ‰πàÊòØ-map">‰ªÄ‰πàÊòØ map</h2>
<p>Áª¥Âü∫ÁôæÁßëÈáåËøôÊ†∑ÂÆö‰πâ mapÔºö</p>
<blockquote>
<p>In computer science, an associative array, map, symbol table, or dictionary is an abstract data type composed of a collection of (key, value) pairs, such that each possible key appears at most once in the collection.</p>
</blockquote>
<p>ÁÆÄÂçïËØ¥Êòé‰∏Ä‰∏ãÔºöÂú®ËÆ°ÁÆóÊú∫ÁßëÂ≠¶ÈáåÔºåË¢´Áß∞‰∏∫Áõ∏ÂÖ≥Êï∞ÁªÑ„ÄÅmap„ÄÅÁ¨¶Âè∑Ë°®ÊàñËÄÖÂ≠óÂÖ∏ÔºåÊòØÁî±‰∏ÄÁªÑ <code>&lt;key, value&gt;</code> ÂØπÁªÑÊàêÁöÑÊäΩË±°Êï∞ÊçÆÁªìÊûÑÔºåÂπ∂‰∏îÂêå‰∏Ä‰∏™ key Âè™‰ºöÂá∫Áé∞‰∏ÄÊ¨°„ÄÇ</p>
<p>Êúâ‰∏§‰∏™ÂÖ≥ÈîÆÁÇπÔºömap ÊòØÁî± <code>key-value</code> ÂØπÁªÑÊàêÁöÑÔºõ<code>key</code> Âè™‰ºöÂá∫Áé∞‰∏ÄÊ¨°„ÄÇ</p>
<p>Âíå map Áõ∏ÂÖ≥ÁöÑÊìç‰Ωú‰∏ªË¶ÅÊòØÔºö</p>
<ol>
<li>Â¢ûÂä†‰∏Ä‰∏™ k-v ÂØπ ‚Äî‚Äî Add or insertÔºõ</li>
<li>Âà†Èô§‰∏Ä‰∏™ k-v ÂØπ ‚Äî‚Äî Remove or deleteÔºõ</li>
<li>‰øÆÊîπÊüê‰∏™ k ÂØπÂ∫îÁöÑ v ‚Äî‚Äî ReassignÔºõ</li>
<li>Êü•ËØ¢Êüê‰∏™ k ÂØπÂ∫îÁöÑ v ‚Äî‚Äî LookupÔºõ</li>
</ol>
<p>ÁÆÄÂçïËØ¥Â∞±ÊòØÊúÄÂü∫Êú¨ÁöÑ <code>Â¢ûÂà†Êü•Êîπ</code>„ÄÇ</p>
<p>map ÁöÑËÆæËÆ°‰πüË¢´Áß∞‰∏∫ ‚ÄúThe dictionary problem‚ÄùÔºåÂÆÉÁöÑ‰ªªÂä°ÊòØËÆæËÆ°‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑÁî®Êù•Áª¥Êä§‰∏Ä‰∏™ÈõÜÂêàÁöÑÊï∞ÊçÆÔºåÂπ∂‰∏îÂèØ‰ª•ÂêåÊó∂ÂØπÈõÜÂêàËøõË°åÂ¢ûÂà†Êü•ÊîπÁöÑÊìç‰Ωú„ÄÇÊúÄ‰∏ªË¶ÅÁöÑÊï∞ÊçÆÁªìÊûÑÊúâ‰∏§ÁßçÔºö<code>ÂìàÂ∏åÊü•ÊâæË°®ÔºàHash tableÔºâ</code>„ÄÅ<code>ÊêúÁ¥¢Ê†ëÔºàSearch treeÔºâ</code>„ÄÇ</p>
<p>ÂìàÂ∏åÊü•ÊâæË°®Áî®‰∏Ä‰∏™ÂìàÂ∏åÂáΩÊï∞Â∞Ü key ÂàÜÈÖçÂà∞‰∏çÂêåÁöÑÊ°∂ÔºàbucketÔºå‰πüÂ∞±ÊòØÊï∞ÁªÑÁöÑ‰∏çÂêå indexÔºâ„ÄÇËøôÊ†∑ÔºåÂºÄÈîÄ‰∏ªË¶ÅÂú®ÂìàÂ∏åÂáΩÊï∞ÁöÑËÆ°ÁÆó‰ª•ÂèäÊï∞ÁªÑÁöÑÂ∏∏Êï∞ËÆøÈóÆÊó∂Èó¥„ÄÇÂú®ÂæàÂ§öÂú∫ÊôØ‰∏ãÔºåÂìàÂ∏åÊü•ÊâæË°®ÁöÑÊÄßËÉΩÂæàÈ´ò„ÄÇ</p>
<p>ÂìàÂ∏åÊü•ÊâæË°®‰∏ÄËà¨‰ºöÂ≠òÂú® ‚ÄúÁ¢∞Êíû‚Äù ÁöÑÈóÆÈ¢òÔºåÂ∞±ÊòØËØ¥‰∏çÂêåÁöÑ key Ë¢´ÂìàÂ∏åÂà∞‰∫ÜÂêå‰∏Ä‰∏™ bucket„ÄÇ‰∏ÄËà¨Êúâ‰∏§ÁßçÂ∫îÂØπÊñπÊ≥ïÔºö<code>ÈìæË°®Ê≥ï</code>Âíå<code>ÂºÄÊîæÂú∞ÂùÄÊ≥ï</code>„ÄÇ<code>ÈìæË°®Ê≥ï</code>Â∞Ü‰∏Ä‰∏™ bucket ÂÆûÁé∞Êàê‰∏Ä‰∏™ÈìæË°®ÔºåËêΩÂú®Âêå‰∏Ä‰∏™ bucket ‰∏≠ÁöÑ key ÈÉΩ‰ºöÊèíÂÖ•Ëøô‰∏™ÈìæË°®„ÄÇ<code>ÂºÄÊîæÂú∞ÂùÄÊ≥ï</code>ÂàôÊòØÁ¢∞ÊíûÂèëÁîüÂêéÔºåÈÄöËøá‰∏ÄÂÆöÁöÑËßÑÂæãÔºåÂú®Êï∞ÁªÑÁöÑÂêéÈù¢ÊåëÈÄâ ‚ÄúÁ©∫‰Ωç‚ÄùÔºåÁî®Êù•ÊîæÁΩÆÊñ∞ÁöÑ key„ÄÇ</p>
<p>ÊêúÁ¥¢Ê†ëÊ≥ï‰∏ÄËà¨ÈááÁî®Ëá™Âπ≥Ë°°ÊêúÁ¥¢Ê†ëÔºåÂåÖÊã¨ÔºöAVL Ê†ëÔºåÁ∫¢ÈªëÊ†ë„ÄÇÈù¢ËØïÊó∂ÁªèÂ∏∏‰ºöË¢´ÈóÆÂà∞ÔºåÁîöËá≥Ë¢´Ë¶ÅÊ±ÇÊâãÂÜôÁ∫¢ÈªëÊ†ë‰ª£Á†ÅÔºåÂæàÂ§öÊó∂ÂÄôÔºåÈù¢ËØïÂÆòËá™Â∑±ÈÉΩÂÜô‰∏ç‰∏äÊù•ÔºåÈùûÂ∏∏ËøáÂàÜ„ÄÇ</p>
<p>Ëá™Âπ≥Ë°°ÊêúÁ¥¢Ê†ëÊ≥ïÁöÑÊúÄÂ∑ÆÊêúÁ¥¢ÊïàÁéáÊòØ O(logN)ÔºåËÄåÂìàÂ∏åÊü•ÊâæË°®ÊúÄÂ∑ÆÊòØ O(N)„ÄÇÂΩìÁÑ∂ÔºåÂìàÂ∏åÊü•ÊâæË°®ÁöÑÂπ≥ÂùáÊü•ÊâæÊïàÁéáÊòØ O(1)ÔºåÂ¶ÇÊûúÂìàÂ∏åÂáΩÊï∞ËÆæËÆ°ÁöÑÂæàÂ•ΩÔºåÊúÄÂùèÁöÑÊÉÖÂÜµÂü∫Êú¨‰∏ç‰ºöÂá∫Áé∞„ÄÇËøòÊúâ‰∏ÄÁÇπÔºåÈÅçÂéÜËá™Âπ≥Ë°°ÊêúÁ¥¢Ê†ëÔºåËøîÂõûÁöÑ key Â∫èÂàóÔºå‰∏ÄËà¨‰ºöÊåâÁÖß‰ªéÂ∞èÂà∞Â§ßÁöÑÈ°∫Â∫èÔºõËÄåÂìàÂ∏åÊü•ÊâæË°®ÂàôÊòØ‰π±Â∫èÁöÑ„ÄÇ</p>
<h2 id="‰∏∫‰ªÄ‰πàË¶ÅÁî®-map">‰∏∫‰ªÄ‰πàË¶ÅÁî® map</h2>
<p>‰ªé Go ËØ≠Ë®ÄÂÆòÊñπÂçöÂÆ¢ÊëòÂΩï‰∏ÄÊÆµËØùÔºö</p>
<blockquote>
<p>One of the most useful data structures in computer science is the hash table. Many hash table implementations exist with varying properties, but in general they offer fast lookups, adds, and deletes. Go provides a built-in map type that implements a hash table.</p>
</blockquote>
<p>hash table ÊòØËÆ°ÁÆóÊú∫Êï∞ÊçÆÁªìÊûÑ‰∏≠‰∏Ä‰∏™ÊúÄÈáçË¶ÅÁöÑËÆæËÆ°„ÄÇÂ§ßÈÉ®ÂàÜ hash table ÈÉΩÂÆûÁé∞‰∫ÜÂø´ÈÄüÊü•Êâæ„ÄÅÊ∑ªÂä†„ÄÅÂà†Èô§ÁöÑÂäüËÉΩ„ÄÇGo ËØ≠Ë®ÄÂÜÖÁΩÆÁöÑ map ÂÆûÁé∞‰∫Ü‰∏äËø∞ÊâÄÊúâÂäüËÉΩ„ÄÇ</p>
<p>ÂæàÈöæÊÉ≥Ë±°ÂÜô‰∏Ä‰∏™Á®ãÂ∫è‰∏ç‰ΩøÁî® mapÔºå‰ª•Ëá≥‰∫éÂú®ÂõûÁ≠î‰∏∫‰ªÄ‰πàË¶ÅÁî® map Ëøô‰∏™ÈóÆÈ¢ò‰∏äÁäØ‰∫ÜÈöæ„ÄÇ</p>
<p>ÊâÄ‰ª•ÔºåÂà∞Â∫ï‰∏∫‰ªÄ‰πàË¶ÅÁî® map Âë¢ÔºüÂõ†‰∏∫ÂÆÉÂ§™Âº∫Â§ß‰∫ÜÔºåÂêÑÁßçÂ¢ûÂà†Êü•ÊîπÁöÑÊìç‰ΩúÊïàÁéáÈùûÂ∏∏È´ò„ÄÇ</p>
<h2 id="map-ÁöÑÂ∫ïÂ±ÇÂ¶Ç‰ΩïÂÆûÁé∞">map ÁöÑÂ∫ïÂ±ÇÂ¶Ç‰ΩïÂÆûÁé∞</h2>
<p>È¶ñÂÖàÂ£∞ÊòéÊàëÁî®ÁöÑ Go ÁâàÊú¨Ôºö</p>
<pre><code class="language-go">    go version go1.9.2 darwin/amd64
</code></pre>
<p>ÂâçÈù¢ËØ¥‰∫Ü map ÂÆûÁé∞ÁöÑÂá†ÁßçÊñπÊ°àÔºåGo ËØ≠Ë®ÄÈááÁî®ÁöÑÊòØÂìàÂ∏åÊü•ÊâæË°®ÔºåÂπ∂‰∏î‰ΩøÁî®ÈìæË°®Ëß£ÂÜ≥ÂìàÂ∏åÂÜ≤Á™Å„ÄÇ</p>
<p>Êé•‰∏ãÊù•Êàë‰ª¨Ë¶ÅÊé¢Á¥¢ map ÁöÑÊ†∏ÂøÉÂéüÁêÜÔºå‰∏ÄÁ™•ÂÆÉÁöÑÂÜÖÈÉ®ÁªìÊûÑ„ÄÇ</p>
<h2 id="map-ÂÜÖÂ≠òÊ®°Âûã">map ÂÜÖÂ≠òÊ®°Âûã</h2>
<p>Âú®Ê∫êÁ†Å‰∏≠ÔºåË°®Á§∫ map ÁöÑÁªìÊûÑ‰ΩìÊòØ hmapÔºåÂÆÉÊòØ hashmap ÁöÑ ‚ÄúÁº©ÂÜô‚ÄùÔºö</p>
<pre><code class="language-go">    // A header for a Go map.
    type hmap struct {
        // ÂÖÉÁ¥†‰∏™Êï∞ÔºåË∞ÉÁî® len(map) Êó∂ÔºåÁõ¥Êé•ËøîÂõûÊ≠§ÂÄº
    	count     int
    	flags     uint8
    	// buckets ÁöÑÂØπÊï∞ log_2
    	B         uint8
    	// overflow ÁöÑ bucket Ëøë‰ººÊï∞
    	noverflow uint16
    	// ËÆ°ÁÆó key ÁöÑÂìàÂ∏åÁöÑÊó∂ÂÄô‰ºö‰º†ÂÖ•ÂìàÂ∏åÂáΩÊï∞
    	hash0     uint32
        // ÊåáÂêë buckets Êï∞ÁªÑÔºåÂ§ßÂ∞è‰∏∫ 2^B
        // Â¶ÇÊûúÂÖÉÁ¥†‰∏™Êï∞‰∏∫0ÔºåÂ∞±‰∏∫ nil
    	buckets    unsafe.Pointer
    	// Êâ©ÂÆπÁöÑÊó∂ÂÄôÔºåbuckets ÈïøÂ∫¶‰ºöÊòØ oldbuckets ÁöÑ‰∏§ÂÄç
    	oldbuckets unsafe.Pointer
    	// ÊåáÁ§∫Êâ©ÂÆπËøõÂ∫¶ÔºåÂ∞è‰∫éÊ≠§Âú∞ÂùÄÁöÑ buckets ËøÅÁßªÂÆåÊàê
    	nevacuate  uintptr
    	extra *mapextra // optional fields
    }
</code></pre>
<p>ËØ¥Êòé‰∏Ä‰∏ãÔºå<code>B</code> ÊòØ buckets Êï∞ÁªÑÁöÑÈïøÂ∫¶ÁöÑÂØπÊï∞Ôºå‰πüÂ∞±ÊòØËØ¥ buckets Êï∞ÁªÑÁöÑÈïøÂ∫¶Â∞±ÊòØ 2^B„ÄÇbucket ÈáåÈù¢Â≠òÂÇ®‰∫Ü key Âíå valueÔºåÂêéÈù¢‰ºöÂÜçËÆ≤„ÄÇ</p>
<p>buckets ÊòØ‰∏Ä‰∏™ÊåáÈíàÔºåÊúÄÁªàÂÆÉÊåáÂêëÁöÑÊòØ‰∏Ä‰∏™ÁªìÊûÑ‰ΩìÔºö</p>
<pre><code class="language-go">    type bmap struct {
    	tophash [bucketCnt]uint8
    }
</code></pre>
<p>‰ΩÜËøôÂè™ÊòØË°®Èù¢ (src/runtime/hashmap.go) ÁöÑÁªìÊûÑÔºåÁºñËØëÊúüÈó¥‰ºöÁªôÂÆÉÂä†ÊñôÔºåÂä®ÊÄÅÂú∞ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÁªìÊûÑÔºö</p>
<pre><code class="language-go">    type bmap struct {
        topbits  [8]uint8
        keys     [8]keytype
        values   [8]valuetype
        pad      uintptr
        overflow uintptr
    }
</code></pre>
<p><code>bmap</code> Â∞±ÊòØÊàë‰ª¨Â∏∏ËØ¥ÁöÑ ‚ÄúÊ°∂‚ÄùÔºåÊ°∂ÈáåÈù¢‰ºöÊúÄÂ§öË£Ö 8 ‰∏™ keyÔºåËøô‰∫õ key ‰πãÊâÄ‰ª•‰ºöËêΩÂÖ•Âêå‰∏Ä‰∏™Ê°∂ÔºåÊòØÂõ†‰∏∫ÂÆÉ‰ª¨ÁªèËøáÂìàÂ∏åËÆ°ÁÆóÂêéÔºåÂìàÂ∏åÁªìÊûúÊòØ‚Äú‰∏ÄÁ±ª‚Äù ÁöÑ„ÄÇÂú®Ê°∂ÂÜÖÔºåÂèà‰ºöÊ†πÊçÆ key ËÆ°ÁÆóÂá∫Êù•ÁöÑ hash ÂÄºÁöÑÈ´ò 8 ‰ΩçÊù•ÂÜ≥ÂÆö key Âà∞Â∫ïËêΩÂÖ•Ê°∂ÂÜÖÁöÑÂì™‰∏™‰ΩçÁΩÆÔºà‰∏Ä‰∏™Ê°∂ÂÜÖÊúÄÂ§öÊúâ 8 ‰∏™‰ΩçÁΩÆÔºâ„ÄÇ</p>
<p>Êù•‰∏Ä‰∏™Êï¥‰ΩìÁöÑÂõæÔºö</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57576986-acd87600-749f-11e9-8710-75e423c7efdb.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57576986-acd87600-749f-11e9-8710-75e423c7efdb.png" loading="lazy" alt="hashmap bmap">
	</a>
	
	<figcaption>hashmap bmap</figcaption>
	
</figure><p></p>
<p>ÂΩì map ÁöÑ key Âíå value ÈÉΩ‰∏çÊòØÊåáÈíàÔºåÂπ∂‰∏î size ÈÉΩÂ∞è‰∫é 128 Â≠óËäÇÁöÑÊÉÖÂÜµ‰∏ãÔºå‰ºöÊää bmap Ê†áËÆ∞‰∏∫‰∏çÂê´ÊåáÈíàÔºåËøôÊ†∑ÂèØ‰ª•ÈÅøÂÖç gc Êó∂Êâ´ÊèèÊï¥‰∏™ hmap„ÄÇ‰ΩÜÊòØÔºåÊàë‰ª¨Áúã bmap ÂÖ∂ÂÆûÊúâ‰∏Ä‰∏™ overflow ÁöÑÂ≠óÊÆµÔºåÊòØÊåáÈíàÁ±ªÂûãÁöÑÔºåÁ†¥Âùè‰∫Ü bmap ‰∏çÂê´ÊåáÈíàÁöÑËÆæÊÉ≥ÔºåËøôÊó∂‰ºöÊää overflow ÁßªÂä®Âà∞ extra Â≠óÊÆµÊù•„ÄÇ</p>
<pre><code class="language-go">    type mapextra struct {
    	// overflow[0] contains overflow buckets for hmap.buckets.
    	// overflow[1] contains overflow buckets for hmap.oldbuckets.
    	overflow [2]*[]*bmap
    
    	// nextOverflow ÂåÖÂê´Á©∫Èó≤ÁöÑ overflow bucketÔºåËøôÊòØÈ¢ÑÂàÜÈÖçÁöÑ bucket
    	nextOverflow *bmap
    }
</code></pre>
<p>bmap ÊòØÂ≠òÊîæ k-v ÁöÑÂú∞ÊñπÔºåÊàë‰ª¨ÊääËßÜËßíÊãâËøëÔºå‰ªîÁªÜÁúã bmap ÁöÑÂÜÖÈÉ®ÁªÑÊàê„ÄÇ</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57577391-f88f1d80-74a7-11e9-893c-4783dc4fb35e.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57577391-f88f1d80-74a7-11e9-893c-4783dc4fb35e.png" loading="lazy" alt="bmap struct">
	</a>
	
	<figcaption>bmap struct</figcaption>
	
</figure><p></p>
<p>‰∏äÂõæÂ∞±ÊòØ bucket ÁöÑÂÜÖÂ≠òÊ®°ÂûãÔºå<code>HOB Hash</code> ÊåáÁöÑÂ∞±ÊòØ top hash„ÄÇ Ê≥®ÊÑèÂà∞ key Âíå value ÊòØÂêÑËá™ÊîæÂú®‰∏ÄËµ∑ÁöÑÔºåÂπ∂‰∏çÊòØ <code>key/value/key/value/...</code> ËøôÊ†∑ÁöÑÂΩ¢Âºè„ÄÇÊ∫êÁ†ÅÈáåËØ¥ÊòéËøôÊ†∑ÁöÑÂ•ΩÂ§ÑÊòØÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÂèØ‰ª•ÁúÅÁï•Êéâ padding Â≠óÊÆµÔºåËäÇÁúÅÂÜÖÂ≠òÁ©∫Èó¥„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÊúâËøôÊ†∑‰∏Ä‰∏™Á±ªÂûãÁöÑ mapÔºö</p>
<pre><code class="language-go">    map[int64]int8
</code></pre>
<p>Â¶ÇÊûúÊåâÁÖß <code>key/value/key/value/...</code> ËøôÊ†∑ÁöÑÊ®°ÂºèÂ≠òÂÇ®ÔºåÈÇ£Âú®ÊØè‰∏Ä‰∏™ key/value ÂØπ‰πãÂêéÈÉΩË¶ÅÈ¢ùÂ§ñ padding 7 ‰∏™Â≠óËäÇÔºõËÄåÂ∞ÜÊâÄÊúâÁöÑ keyÔºåvalue ÂàÜÂà´ÁªëÂÆöÂà∞‰∏ÄËµ∑ÔºåËøôÁßçÂΩ¢Âºè <code>key/key/.../value/value/...</code>ÔºåÂàôÂè™ÈúÄË¶ÅÂú®ÊúÄÂêéÊ∑ªÂä† padding„ÄÇ</p>
<p>ÊØè‰∏™ bucket ËÆæËÆ°ÊàêÊúÄÂ§öÂè™ËÉΩÊîæ 8 ‰∏™ key-value ÂØπÔºåÂ¶ÇÊûúÊúâÁ¨¨ 9 ‰∏™ key-value ËêΩÂÖ•ÂΩìÂâçÁöÑ bucketÔºåÈÇ£Â∞±ÈúÄË¶ÅÂÜçÊûÑÂª∫‰∏Ä‰∏™ bucket ÔºåÈÄöËøá <code>overflow</code> ÊåáÈíàËøûÊé•Ëµ∑Êù•„ÄÇ</p>
<h2 id="ÂàõÂª∫-map">ÂàõÂª∫ map</h2>
<p>‰ªéËØ≠Ê≥ïÂ±ÇÈù¢‰∏äÊù•ËØ¥ÔºåÂàõÂª∫ map ÂæàÁÆÄÂçïÔºö</p>
<pre><code class="language-go">    ageMp := make(map[string]int)
    // ÊåáÂÆö map ÈïøÂ∫¶
    ageMp := make(map[string]int, 8)
    
    // ageMp ‰∏∫ nilÔºå‰∏çËÉΩÂêëÂÖ∂Ê∑ªÂä†ÂÖÉÁ¥†Ôºå‰ºöÁõ¥Êé•panic
    var ageMp map[string]int
</code></pre>
<p>ÈÄöËøáÊ±áÁºñËØ≠Ë®ÄÂèØ‰ª•ÁúãÂà∞ÔºåÂÆûÈôÖ‰∏äÂ∫ïÂ±ÇË∞ÉÁî®ÁöÑÊòØ <code>makemap</code> ÂáΩÊï∞Ôºå‰∏ªË¶ÅÂÅöÁöÑÂ∑•‰ΩúÂ∞±ÊòØÂàùÂßãÂåñ <code>hmap</code> ÁªìÊûÑ‰ΩìÁöÑÂêÑÁßçÂ≠óÊÆµÔºå‰æãÂ¶ÇËÆ°ÁÆó B ÁöÑÂ§ßÂ∞èÔºåËÆæÁΩÆÂìàÂ∏åÁßçÂ≠ê hash0 Á≠âÁ≠â„ÄÇ</p>
<pre><code class="language-go">    func makemap(t *maptype, hint int64, h *hmap, bucket unsafe.Pointer) *hmap {
    	// ÁúÅÁï•ÂêÑÁßçÊù°‰ª∂Ê£ÄÊü•...
    
    	// ÊâæÂà∞‰∏Ä‰∏™ BÔºå‰ΩøÂæó map ÁöÑË£ÖËΩΩÂõ†Â≠êÂú®Ê≠£Â∏∏ËåÉÂõ¥ÂÜÖ
    	B := uint8(0)
    	for ; overLoadFactor(hint, B); B++ {
    	}
    
    	// ÂàùÂßãÂåñ hash table
    	// Â¶ÇÊûú B Á≠â‰∫é 0ÔºåÈÇ£‰πà buckets Â∞±‰ºöÂú®ËµãÂÄºÁöÑÊó∂ÂÄôÂÜçÂàÜÈÖç
    	// Â¶ÇÊûúÈïøÂ∫¶ÊØîËæÉÂ§ßÔºåÂàÜÈÖçÂÜÖÂ≠ò‰ºöËä±Ë¥πÈïø‰∏ÄÁÇπ
    	buckets := bucket
    	var extra *mapextra
    	if B != 0 {
    		var nextOverflow *bmap
    		buckets, nextOverflow = makeBucketArray(t, B)
    		if nextOverflow != nil {
    			extra = new(mapextra)
    			extra.nextOverflow = nextOverflow
    		}
    	}
    
    	// ÂàùÂßãÂåñ hamp
    	if h == nil {
    		h = (*hmap)(newobject(t.hmap))
    	}
    	h.count = 0
    	h.B = B
    	h.extra = extra
    	h.flags = 0
    	h.hash0 = fastrand()
    	h.buckets = buckets
    	h.oldbuckets = nil
    	h.nevacuate = 0
    	h.noverflow = 0
    
    	return h
    }
</code></pre>
<p>Ê≥®ÊÑèÔºåËøô‰∏™ÂáΩÊï∞ËøîÂõûÁöÑÁªìÊûúÔºö<code>*hmap</code>ÔºåÂÆÉÊòØ‰∏Ä‰∏™ÊåáÈíàÔºåËÄåÊàë‰ª¨‰πãÂâçËÆ≤ËøáÁöÑ <code>makeslice</code> ÂáΩÊï∞ËøîÂõûÁöÑÊòØ <code>Slice</code> ÁªìÊûÑ‰ΩìÔºö</p>
<pre><code class="language-go">    func makeslice(et *_type, len, cap int) slice
</code></pre>
<p>ÂõûÈ°æ‰∏Ä‰∏ã slice ÁöÑÁªìÊûÑ‰ΩìÂÆö‰πâÔºö</p>
<pre><code class="language-go">    // runtime/slice.go
    type slice struct {
        array unsafe.Pointer // ÂÖÉÁ¥†ÊåáÈíà
        len   int // ÈïøÂ∫¶ 
        cap   int // ÂÆπÈáè
    }
</code></pre>
<p>ÁªìÊûÑ‰ΩìÂÜÖÈÉ®ÂåÖÂê´Â∫ïÂ±ÇÁöÑÊï∞ÊçÆÊåáÈíà„ÄÇ</p>
<p>makemap Âíå makeslice ÁöÑÂå∫Âà´ÔºåÂ∏¶Êù•‰∏Ä‰∏™‰∏çÂêåÁÇπÔºöÂΩì map Âíå slice ‰Ωú‰∏∫ÂáΩÊï∞ÂèÇÊï∞Êó∂ÔºåÂú®ÂáΩÊï∞ÂèÇÊï∞ÂÜÖÈÉ®ÂØπ map ÁöÑÊìç‰Ωú‰ºöÂΩ±Âìç map Ëá™Ë∫´ÔºõËÄåÂØπ slice Âç¥‰∏ç‰ºöÔºà‰πãÂâçËÆ≤ slice ÁöÑÊñáÁ´†ÈáåÊúâËÆ≤ËøáÔºâ„ÄÇ</p>
<p>‰∏ªË¶ÅÂéüÂõ†Ôºö‰∏Ä‰∏™ÊòØÊåáÈíàÔºà<code>*hmap</code>ÔºâÔºå‰∏Ä‰∏™ÊòØÁªìÊûÑ‰ΩìÔºà<code>slice</code>Ôºâ„ÄÇGo ËØ≠Ë®Ä‰∏≠ÁöÑÂáΩÊï∞‰º†ÂèÇÈÉΩÊòØÂÄº‰º†ÈÄíÔºåÂú®ÂáΩÊï∞ÂÜÖÈÉ®ÔºåÂèÇÊï∞‰ºöË¢´ copy Âà∞Êú¨Âú∞„ÄÇ<code>*hmap</code>ÊåáÈíà copy ÂÆå‰πãÂêéÔºå‰ªçÁÑ∂ÊåáÂêëÂêå‰∏Ä‰∏™ mapÔºåÂõ†Ê≠§ÂáΩÊï∞ÂÜÖÈÉ®ÂØπ map ÁöÑÊìç‰Ωú‰ºöÂΩ±ÂìçÂÆûÂèÇ„ÄÇËÄå slice Ë¢´ copy ÂêéÔºå‰ºöÊàê‰∏∫‰∏Ä‰∏™Êñ∞ÁöÑ sliceÔºåÂØπÂÆÉËøõË°åÁöÑÊìç‰Ωú‰∏ç‰ºöÂΩ±ÂìçÂà∞ÂÆûÂèÇ„ÄÇ</p>
<h2 id="ÂìàÂ∏åÂáΩÊï∞">ÂìàÂ∏åÂáΩÊï∞</h2>
<p>map ÁöÑ‰∏Ä‰∏™ÂÖ≥ÈîÆÁÇπÂú®‰∫éÔºåÂìàÂ∏åÂáΩÊï∞ÁöÑÈÄâÊã©„ÄÇÂú®Á®ãÂ∫èÂêØÂä®Êó∂Ôºå‰ºöÊ£ÄÊµã cpu ÊòØÂê¶ÊîØÊåÅ aesÔºåÂ¶ÇÊûúÊîØÊåÅÔºåÂàô‰ΩøÁî® aes hashÔºåÂê¶Âàô‰ΩøÁî® memhash„ÄÇËøôÊòØÂú®ÂáΩÊï∞ <code>alginit()</code> ‰∏≠ÂÆåÊàêÔºå‰Ωç‰∫éË∑ØÂæÑÔºö<code>src/runtime/alg.go</code> ‰∏ã„ÄÇ</p>
<blockquote>
<p>hash ÂáΩÊï∞ÔºåÊúâÂä†ÂØÜÂûãÂíåÈùûÂä†ÂØÜÂûã„ÄÇ<br>
Âä†ÂØÜÂûãÁöÑ‰∏ÄËà¨Áî®‰∫éÂä†ÂØÜÊï∞ÊçÆ„ÄÅÊï∞Â≠óÊëòË¶ÅÁ≠âÔºåÂÖ∏Âûã‰ª£Ë°®Â∞±ÊòØ md5„ÄÅsha1„ÄÅsha256„ÄÅaes256 ËøôÁßçÔºõ<br>
ÈùûÂä†ÂØÜÂûãÁöÑ‰∏ÄËà¨Â∞±ÊòØÊü•Êâæ„ÄÇÂú® map ÁöÑÂ∫îÁî®Âú∫ÊôØ‰∏≠ÔºåÁî®ÁöÑÊòØÊü•Êâæ„ÄÇ<br>
ÈÄâÊã© hash ÂáΩÊï∞‰∏ªË¶ÅËÄÉÂØüÁöÑÊòØ‰∏§ÁÇπÔºöÊÄßËÉΩ„ÄÅÁ¢∞ÊíûÊ¶ÇÁéá„ÄÇ</p>
</blockquote>
<p>‰πãÂâçÊàë‰ª¨ËÆ≤ËøáÔºåË°®Á§∫Á±ªÂûãÁöÑÁªìÊûÑ‰ΩìÔºö</p>
<pre><code class="language-go">    type _type struct {
    	size       uintptr
    	ptrdata    uintptr // size of memory prefix holding all pointers
    	hash       uint32
    	tflag      tflag
    	align      uint8
    	fieldalign uint8
    	kind       uint8
    	alg        *typeAlg
    	gcdata    *byte
    	str       nameOff
    	ptrToThis typeOff
    }
</code></pre>
<p>ÂÖ∂‰∏≠ <code>alg</code> Â≠óÊÆµÂ∞±ÂíåÂìàÂ∏åÁõ∏ÂÖ≥ÔºåÂÆÉÊòØÊåáÂêëÂ¶Ç‰∏ãÁªìÊûÑ‰ΩìÁöÑÊåáÈíàÔºö</p>
<pre><code class="language-go">    // src/runtime/alg.go
    type typeAlg struct {
    	// (ptr to object, seed) -&gt; hash
    	hash func(unsafe.Pointer, uintptr) uintptr
    	// (ptr to object A, ptr to object B) -&gt; ==?
    	equal func(unsafe.Pointer, unsafe.Pointer) bool
    }
</code></pre>
<p>typeAlg ÂåÖÂê´‰∏§‰∏™ÂáΩÊï∞Ôºåhash ÂáΩÊï∞ËÆ°ÁÆóÁ±ªÂûãÁöÑÂìàÂ∏åÂÄºÔºåËÄå equal ÂáΩÊï∞ÂàôËÆ°ÁÆó‰∏§‰∏™Á±ªÂûãÊòØÂê¶ ‚ÄúÂìàÂ∏åÁõ∏Á≠â‚Äù„ÄÇ</p>
<p>ÂØπ‰∫é string Á±ªÂûãÔºåÂÆÉÁöÑ hash„ÄÅequal ÂáΩÊï∞Â¶Ç‰∏ãÔºö</p>
<pre><code class="language-go">    func strhash(a unsafe.Pointer, h uintptr) uintptr {
    	x := (*stringStruct)(a)
    	return memhash(x.str, h, uintptr(x.len))
    }
    
    func strequal(p, q unsafe.Pointer) bool {
    	return *(*string)(p) == *(*string)(q)
    }
</code></pre>
<p>Ê†πÊçÆ key ÁöÑÁ±ªÂûãÔºå_type ÁªìÊûÑ‰ΩìÁöÑ alg Â≠óÊÆµ‰ºöË¢´ËÆæÁΩÆÂØπÂ∫îÁ±ªÂûãÁöÑ hash Âíå equal ÂáΩÊï∞„ÄÇ</p>
<h2 id="key-ÂÆö‰ΩçËøáÁ®ã">key ÂÆö‰ΩçËøáÁ®ã</h2>
<p>key ÁªèËøáÂìàÂ∏åËÆ°ÁÆóÂêéÂæóÂà∞ÂìàÂ∏åÂÄºÔºåÂÖ± 64 ‰∏™ bit ‰ΩçÔºà64 ‰ΩçÊú∫Ôºå32 ‰ΩçÊú∫Â∞±‰∏çËÆ®ËÆ∫‰∫ÜÔºåÁé∞Âú®‰∏ªÊµÅÈÉΩÊòØ 64 ‰ΩçÊú∫ÔºâÔºåËÆ°ÁÆóÂÆÉÂà∞Â∫ïË¶ÅËêΩÂú®Âì™‰∏™Ê°∂Êó∂ÔºåÂè™‰ºöÁî®Âà∞ÊúÄÂêé B ‰∏™ bit ‰Ωç„ÄÇËøòËÆ∞ÂæóÂâçÈù¢ÊèêÂà∞ËøáÁöÑ B ÂêóÔºüÂ¶ÇÊûú B = 5ÔºåÈÇ£‰πàÊ°∂ÁöÑÊï∞ÈáèÔºå‰πüÂ∞±ÊòØ buckets Êï∞ÁªÑÁöÑÈïøÂ∫¶ÊòØ 2^5 = 32„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÁé∞Âú®Êúâ‰∏Ä‰∏™ key ÁªèËøáÂìàÂ∏åÂáΩÊï∞ËÆ°ÁÆóÂêéÔºåÂæóÂà∞ÁöÑÂìàÂ∏åÁªìÊûúÊòØÔºö</p>
<pre><code class="language-go">     10010111 | 000011110110110010001111001010100010010110010101010 ‚îÇ 01010
</code></pre>
<p>Áî®ÊúÄÂêéÁöÑ 5 ‰∏™ bit ‰ΩçÔºå‰πüÂ∞±ÊòØ <code>01010</code>ÔºåÂÄº‰∏∫ 10Ôºå‰πüÂ∞±ÊòØ 10 Âè∑Ê°∂„ÄÇËøô‰∏™Êìç‰ΩúÂÆûÈôÖ‰∏äÂ∞±ÊòØÂèñ‰ΩôÊìç‰ΩúÔºå‰ΩÜÊòØÂèñ‰ΩôÂºÄÈîÄÂ§™Â§ßÔºåÊâÄ‰ª•‰ª£Á†ÅÂÆûÁé∞‰∏äÁî®ÁöÑ‰ΩçÊìç‰Ωú‰ª£Êõø„ÄÇ</p>
<p>ÂÜçÁî®ÂìàÂ∏åÂÄºÁöÑÈ´ò 8 ‰ΩçÔºåÊâæÂà∞Ê≠§ key Âú® bucket ‰∏≠ÁöÑ‰ΩçÁΩÆÔºåËøôÊòØÂú®ÂØªÊâæÂ∑≤ÊúâÁöÑ key„ÄÇÊúÄÂºÄÂßãÊ°∂ÂÜÖËøòÊ≤°Êúâ keyÔºåÊñ∞Âä†ÂÖ•ÁöÑ key ‰ºöÊâæÂà∞Á¨¨‰∏Ä‰∏™Á©∫‰ΩçÔºåÊîæÂÖ•„ÄÇ</p>
<p>buckets ÁºñÂè∑Â∞±ÊòØÊ°∂ÁºñÂè∑ÔºåÂΩì‰∏§‰∏™‰∏çÂêåÁöÑ key ËêΩÂú®Âêå‰∏Ä‰∏™Ê°∂‰∏≠Ôºå‰πüÂ∞±ÊòØÂèëÁîü‰∫ÜÂìàÂ∏åÂÜ≤Á™Å„ÄÇÂÜ≤Á™ÅÁöÑËß£ÂÜ≥ÊâãÊÆµÊòØÁî®ÈìæË°®Ê≥ïÔºöÂú® bucket ‰∏≠Ôºå‰ªéÂâçÂæÄÂêéÊâæÂà∞Á¨¨‰∏Ä‰∏™Á©∫‰Ωç„ÄÇËøôÊ†∑ÔºåÂú®Êü•ÊâæÊüê‰∏™ key Êó∂ÔºåÂÖàÊâæÂà∞ÂØπÂ∫îÁöÑÊ°∂ÔºåÂÜçÂéªÈÅçÂéÜ bucket ‰∏≠ÁöÑ key„ÄÇ</p>
<p>ËøôÈáåÂèÇËÄÉÊõπÂ§ß github ÂçöÂÆ¢ÈáåÁöÑ‰∏ÄÂº†ÂõæÔºåÂéüÂõæÊòØ ascii ÂõæÔºågeek Âë≥ÂçÅË∂≥ÔºåÂèØ‰ª•‰ªéÂèÇËÄÉËµÑÊñôÊâæÂà∞ÊõπÂ§ßÁöÑÂçöÂÆ¢ÔºåÊé®ËçêÂ§ßÂÆ∂ÂéªÁúãÁúã„ÄÇ</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57577721-faf57580-74af-11e9-8826-aacdb34a1d2b.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57577721-faf57580-74af-11e9-8826-aacdb34a1d2b.png" loading="lazy" alt="mapacess">
	</a>
	
	<figcaption>mapacess</figcaption>
	
</figure><p></p>
<p>‰∏äÂõæ‰∏≠ÔºåÂÅáÂÆö B = 5ÔºåÊâÄ‰ª• bucket ÊÄªÊï∞Â∞±ÊòØ 2^5 = 32„ÄÇÈ¶ñÂÖàËÆ°ÁÆóÂá∫ÂæÖÊü•Êâæ key ÁöÑÂìàÂ∏åÔºå‰ΩøÁî®‰Ωé 5 ‰Ωç <code>00110</code>ÔºåÊâæÂà∞ÂØπÂ∫îÁöÑ 6 Âè∑ bucketÔºå‰ΩøÁî®È´ò 8 ‰Ωç <code>10010111</code>ÔºåÂØπÂ∫îÂçÅËøõÂà∂ 151ÔºåÂú® 6 Âè∑ bucket ‰∏≠ÂØªÊâæ tophash ÂÄºÔºàHOB hashÔºâ‰∏∫ 151 ÁöÑ keyÔºåÊâæÂà∞‰∫Ü 2 Âè∑ÊßΩ‰ΩçÔºåËøôÊ†∑Êï¥‰∏™Êü•ÊâæËøáÁ®ãÂ∞±ÁªìÊùü‰∫Ü„ÄÇ</p>
<p>Â¶ÇÊûúÂú® bucket ‰∏≠Ê≤°ÊâæÂà∞ÔºåÂπ∂‰∏î overflow ‰∏ç‰∏∫Á©∫ÔºåËøòË¶ÅÁªßÁª≠Âéª overflow bucket ‰∏≠ÂØªÊâæÔºåÁõ¥Âà∞ÊâæÂà∞ÊàñÊòØÊâÄÊúâÁöÑ key ÊßΩ‰ΩçÈÉΩÊâæÈÅç‰∫ÜÔºåÂåÖÊã¨ÊâÄÊúâÁöÑ overflow bucket„ÄÇ</p>
<p>Êàë‰ª¨Êù•Áúã‰∏ãÊ∫êÁ†ÅÂêßÔºåÂìàÂìàÔºÅÈÄöËøáÊ±áÁºñËØ≠Ë®ÄÂèØ‰ª•ÁúãÂà∞ÔºåÊü•ÊâæÊüê‰∏™ key ÁöÑÂ∫ïÂ±ÇÂáΩÊï∞ÊòØ <code>mapacess</code> Á≥ªÂàóÂáΩÊï∞ÔºåÂáΩÊï∞ÁöÑ‰ΩúÁî®Á±ª‰ººÔºåÂå∫Âà´Âú®‰∏ã‰∏ÄËäÇ‰ºöËÆ≤Âà∞„ÄÇËøôÈáåÊàë‰ª¨Áõ¥Êé•Áúã <code>mapacess1</code> ÂáΩÊï∞Ôºö</p>
<pre><code class="language-go">    func mapaccess1(t *maptype, h *hmap, key unsafe.Pointer) unsafe.Pointer {
    	// ‚Ä¶‚Ä¶
    	
    	// Â¶ÇÊûú h ‰ªÄ‰πàÈÉΩÊ≤°ÊúâÔºåËøîÂõûÈõ∂ÂÄº
    	if h == nil || h.count == 0 {
    		return unsafe.Pointer(&amp;zeroVal[0])
    	}
    	
    	// ÂÜôÂíåËØªÂÜ≤Á™Å
    	if h.flags&amp;hashWriting != 0 {
    		throw("concurrent map read and map write")
    	}
    	
    	// ‰∏çÂêåÁ±ªÂûã key ‰ΩøÁî®ÁöÑ hash ÁÆóÊ≥ïÂú®ÁºñËØëÊúüÁ°ÆÂÆö
    	alg := t.key.alg
    	
    	// ËÆ°ÁÆóÂìàÂ∏åÂÄºÔºåÂπ∂‰∏îÂä†ÂÖ• hash0 ÂºïÂÖ•ÈöèÊú∫ÊÄß
    	hash := alg.hash(key, uintptr(h.hash0))
    	
    	// ÊØîÂ¶Ç B=5ÔºåÈÇ£ m Â∞±ÊòØ31Ôºå‰∫åËøõÂà∂ÊòØÂÖ® 1
    	// Ê±Ç bucket num Êó∂ÔºåÂ∞Ü hash ‰∏é m Áõ∏‰∏éÔºå
    	// ËææÂà∞ bucket num Áî± hash ÁöÑ‰Ωé 8 ‰ΩçÂÜ≥ÂÆöÁöÑÊïàÊûú
    	m := uintptr(1)&lt;&lt;h.B - 1
    	
    	// b Â∞±ÊòØ bucket ÁöÑÂú∞ÂùÄ
    	b := (*bmap)(add(h.buckets, (hash&amp;m)*uintptr(t.bucketsize)))
    	
    	// oldbuckets ‰∏ç‰∏∫ nilÔºåËØ¥ÊòéÂèëÁîü‰∫ÜÊâ©ÂÆπ
    	if c := h.oldbuckets; c != nil {
    	    // Â¶ÇÊûú‰∏çÊòØÂêå size Êâ©ÂÆπÔºàÁúãÂêéÈù¢Êâ©ÂÆπÁöÑÂÜÖÂÆπÔºâ
    	    // ÂØπÂ∫îÊù°‰ª∂ 1 ÁöÑËß£ÂÜ≥ÊñπÊ°à
    		if !h.sameSizeGrow() {
    			// Êñ∞ bucket Êï∞ÈáèÊòØËÄÅÁöÑ 2 ÂÄç
    			m &gt;&gt;= 1
    		}
    		
    		// Ê±ÇÂá∫ key Âú®ËÄÅÁöÑ map ‰∏≠ÁöÑ bucket ‰ΩçÁΩÆ
    		oldb := (*bmap)(add(c, (hash&amp;m)*uintptr(t.bucketsize)))
    		
    		// Â¶ÇÊûú oldb Ê≤°ÊúâÊê¨ËøÅÂà∞Êñ∞ÁöÑ bucket
    		// ÈÇ£Â∞±Âú®ËÄÅÁöÑ bucket ‰∏≠ÂØªÊâæ
    		if !evacuated(oldb) {
    			b = oldb
    		}
    	}
    	
    	// ËÆ°ÁÆóÂá∫È´ò 8 ‰ΩçÁöÑ hash
    	// Áõ∏ÂΩì‰∫éÂè≥Áßª 56 ‰ΩçÔºåÂè™ÂèñÈ´ò8‰Ωç
    	top := uint8(hash &gt;&gt; (sys.PtrSize*8 - 8))
    	
    	// Â¢ûÂä†‰∏Ä‰∏™ minTopHash
    	if top &lt; minTopHash {
    		top += minTopHash
    	}
    	for {
    	    // ÈÅçÂéÜ 8 ‰∏™ bucket
    		for i := uintptr(0); i &lt; bucketCnt; i++ {
    		    // tophash ‰∏çÂåπÈÖçÔºåÁªßÁª≠
    			if b.tophash[i] != top {
    				continue
    			}
    			// tophash ÂåπÈÖçÔºåÂÆö‰ΩçÂà∞ key ÁöÑ‰ΩçÁΩÆ
    			k := add(unsafe.Pointer(b), dataOffset+i*uintptr(t.keysize))
    			// key ÊòØÊåáÈíà
    			if t.indirectkey {
    			    // Ëß£ÂºïÁî®
    				k = *((*unsafe.Pointer)(k))
    			}
    			// Â¶ÇÊûú key Áõ∏Á≠â
    			if alg.equal(key, k) {
    			    // ÂÆö‰ΩçÂà∞ value ÁöÑ‰ΩçÁΩÆ
    				v := add(unsafe.Pointer(b), dataOffset+bucketCnt*uintptr(t.keysize)+i*uintptr(t.valuesize))
    				// value Ëß£ÂºïÁî®
    				if t.indirectvalue {
    					v = *((*unsafe.Pointer)(v))
    				}
    				return v
    			}
    		}
    		
    		// bucket ÊâæÂÆåÔºàËøòÊ≤°ÊâæÂà∞ÔºâÔºåÁªßÁª≠Âà∞ overflow bucket ÈáåÊâæ
    		b = b.overflow(t)
    		// overflow bucket ‰πüÊâæÂÆå‰∫ÜÔºåËØ¥ÊòéÊ≤°ÊúâÁõÆÊ†á key
    		// ËøîÂõûÈõ∂ÂÄº
    		if b == nil {
    			return unsafe.Pointer(&amp;zeroVal[0])
    		}
    	}
    }
</code></pre>
<p>ÂáΩÊï∞ËøîÂõû h[key] ÁöÑÊåáÈíàÔºåÂ¶ÇÊûú h ‰∏≠Ê≤°ÊúâÊ≠§ keyÔºåÈÇ£Â∞±‰ºöËøîÂõû‰∏Ä‰∏™ key Áõ∏Â∫îÁ±ªÂûãÁöÑÈõ∂ÂÄºÔºå‰∏ç‰ºöËøîÂõû nil„ÄÇ</p>
<p>‰ª£Á†ÅÊï¥‰ΩìÊØîËæÉÁõ¥Êé•ÔºåÊ≤°‰ªÄ‰πàÈöæÊáÇÁöÑÂú∞Êñπ„ÄÇË∑üÁùÄ‰∏äÈù¢ÁöÑÊ≥®Èáä‰∏ÄÊ≠•Ê≠•ÁêÜËß£Â∞±Â•Ω‰∫Ü„ÄÇ</p>
<p>ËøôÈáåÔºåËØ¥‰∏Ä‰∏ãÂÆö‰Ωç key Âíå value ÁöÑÊñπÊ≥ï‰ª•ÂèäÊï¥‰∏™Âæ™ÁéØÁöÑÂÜôÊ≥ï„ÄÇ</p>
<pre><code class="language-go">    // key ÂÆö‰ΩçÂÖ¨Âºè
    k := add(unsafe.Pointer(b), dataOffset+i*uintptr(t.keysize))
    
    // value ÂÆö‰ΩçÂÖ¨Âºè
    v := add(unsafe.Pointer(b), dataOffset+bucketCnt*uintptr(t.keysize)+i*uintptr(t.valuesize))
</code></pre>
<p>b ÊòØ bmap ÁöÑÂú∞ÂùÄÔºåËøôÈáå bmap ËøòÊòØÊ∫êÁ†ÅÈáåÂÆö‰πâÁöÑÁªìÊûÑ‰ΩìÔºåÂè™ÂåÖÂê´‰∏Ä‰∏™ tophash Êï∞ÁªÑÔºåÁªèÁºñËØëÂô®Êâ©ÂÖÖ‰πãÂêéÁöÑÁªìÊûÑ‰ΩìÊâçÂåÖÂê´ keyÔºåvalueÔºåoverflow Ëøô‰∫õÂ≠óÊÆµ„ÄÇdataOffset ÊòØ key Áõ∏ÂØπ‰∫é bmap Ëµ∑ÂßãÂú∞ÂùÄÁöÑÂÅèÁßªÔºö</p>
<pre><code class="language-go">    dataOffset = unsafe.Offsetof(struct {
    		b bmap
    		v int64
    	}{}.v)
</code></pre>
<p>Âõ†Ê≠§ bucket Èáå key ÁöÑËµ∑ÂßãÂú∞ÂùÄÂ∞±ÊòØ unsafe.Pointer(b)+dataOffset„ÄÇÁ¨¨ i ‰∏™ key ÁöÑÂú∞ÂùÄÂ∞±Ë¶ÅÂú®Ê≠§Âü∫Á°Ä‰∏äË∑®Ëøá i ‰∏™ key ÁöÑÂ§ßÂ∞èÔºõËÄåÊàë‰ª¨ÂèàÁü•ÈÅìÔºåvalue ÁöÑÂú∞ÂùÄÊòØÂú®ÊâÄÊúâ key ‰πãÂêéÔºåÂõ†Ê≠§Á¨¨ i ‰∏™ value ÁöÑÂú∞ÂùÄËøòÈúÄË¶ÅÂä†‰∏äÊâÄÊúâ key ÁöÑÂÅèÁßª„ÄÇÁêÜËß£‰∫ÜËøô‰∫õÔºå‰∏äÈù¢ key Âíå value ÁöÑÂÆö‰ΩçÂÖ¨ÂºèÂ∞±ÂæàÂ•ΩÁêÜËß£‰∫Ü„ÄÇ</p>
<p>ÂÜçËØ¥Êï¥‰∏™Â§ßÂæ™ÁéØÁöÑÂÜôÊ≥ïÔºåÊúÄÂ§ñÂ±ÇÊòØ‰∏Ä‰∏™Êó†ÈôêÂæ™ÁéØÔºåÈÄöËøá</p>
<pre><code class="language-go">    b = b.overflow(t)
</code></pre>
<p>ÈÅçÂéÜÊâÄÊúâÁöÑ bucketÔºåËøôÁõ∏ÂΩì‰∫éÊòØ‰∏Ä‰∏™ bucket ÈìæË°®„ÄÇ</p>
<p>ÂΩìÂÆö‰ΩçÂà∞‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑ bucket Êó∂ÔºåÈáåÂ±ÇÂæ™ÁéØÂ∞±ÊòØÈÅçÂéÜËøô‰∏™ bucket ÈáåÊâÄÊúâÁöÑ cellÔºåÊàñËÄÖËØ¥ÊâÄÊúâÁöÑÊßΩ‰ΩçÔºå‰πüÂ∞±ÊòØ bucketCnt=8 ‰∏™ÊßΩ‰Ωç„ÄÇÊï¥‰∏™Âæ™ÁéØËøáÁ®ãÔºö</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57581783-fe5c2180-74ee-11e9-99c9-5a226216e1af.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57581783-fe5c2180-74ee-11e9-99c9-5a226216e1af.png" loading="lazy" alt="mapacess loop">
	</a>
	
	<figcaption>mapacess loop</figcaption>
	
</figure><p></p>
<p>ÂÜçËØ¥‰∏Ä‰∏ã minTopHashÔºåÂΩì‰∏Ä‰∏™ cell ÁöÑ tophash ÂÄºÂ∞è‰∫é minTopHash Êó∂ÔºåÊ†áÂøóËøô‰∏™ cell ÁöÑËøÅÁßªÁä∂ÊÄÅ„ÄÇÂõ†‰∏∫Ëøô‰∏™Áä∂ÊÄÅÂÄºÊòØÊîæÂú® tophash Êï∞ÁªÑÈáåÔºå‰∏∫‰∫ÜÂíåÊ≠£Â∏∏ÁöÑÂìàÂ∏åÂÄºÂå∫ÂàÜÂºÄÔºå‰ºöÁªô key ËÆ°ÁÆóÂá∫Êù•ÁöÑÂìàÂ∏åÂÄº‰∏Ä‰∏™Â¢ûÈáèÔºöminTopHash„ÄÇËøôÊ†∑Â∞±ËÉΩÂå∫ÂàÜÊ≠£Â∏∏ÁöÑ top hash ÂÄºÂíåË°®Á§∫Áä∂ÊÄÅÁöÑÂìàÂ∏åÂÄº„ÄÇ</p>
<p>‰∏ãÈù¢ÁöÑËøôÂá†ÁßçÁä∂ÊÄÅÂ∞±Ë°®ÂæÅ‰∫Ü bucket ÁöÑÊÉÖÂÜµÔºö</p>
<pre><code class="language-go">    // Á©∫ÁöÑ cellÔºå‰πüÊòØÂàùÂßãÊó∂ bucket ÁöÑÁä∂ÊÄÅ
    empty          = 0
    // Á©∫ÁöÑ cellÔºåË°®Á§∫ cell Â∑≤ÁªèË¢´ËøÅÁßªÂà∞Êñ∞ÁöÑ bucket
    evacuatedEmpty = 1
    // key,value Â∑≤ÁªèÊê¨ËøÅÂÆåÊØïÔºå‰ΩÜÊòØ key ÈÉΩÂú®Êñ∞ bucket ÂâçÂçäÈÉ®ÂàÜÔºå
    // ÂêéÈù¢Êâ©ÂÆπÈÉ®ÂàÜ‰ºöÂÜçËÆ≤Âà∞„ÄÇ
    evacuatedX     = 2
    // Âêå‰∏äÔºåkey Âú®ÂêéÂçäÈÉ®ÂàÜ
    evacuatedY     = 3
    // tophash ÁöÑÊúÄÂ∞èÊ≠£Â∏∏ÂÄº
    minTopHash     = 4
</code></pre>
<p>Ê∫êÁ†ÅÈáåÂà§Êñ≠Ëøô‰∏™ bucket ÊòØÂê¶Â∑≤ÁªèÊê¨ËøÅÂÆåÊØïÔºåÁî®Âà∞ÁöÑÂáΩÊï∞Ôºö</p>
<pre><code class="language-go">    func evacuated(b *bmap) bool {
    	h := b.tophash[0]
    	return h &gt; empty &amp;&amp; h &lt; minTopHash
    }
</code></pre>
<p>Âè™Âèñ‰∫Ü tophash Êï∞ÁªÑÁöÑÁ¨¨‰∏Ä‰∏™ÂÄºÔºåÂà§Êñ≠ÂÆÉÊòØÂê¶Âú® 0-4 ‰πãÈó¥„ÄÇÂØπÊØî‰∏äÈù¢ÁöÑÂ∏∏ÈáèÔºåÂΩì top hash ÊòØ <code>evacuatedEmpty</code>„ÄÅ<code>evacuatedX</code>„ÄÅ<code>evacuatedY</code> Ëøô‰∏â‰∏™ÂÄº‰πã‰∏ÄÔºåËØ¥ÊòéÊ≠§ bucket ‰∏≠ÁöÑ key ÂÖ®ÈÉ®Ë¢´Êê¨ËøÅÂà∞‰∫ÜÊñ∞ bucket„ÄÇ</p>
<h2 id="map-ÁöÑ‰∏§Áßç-get-Êìç‰Ωú">map ÁöÑ‰∏§Áßç get Êìç‰Ωú</h2>
<p>Go ËØ≠Ë®Ä‰∏≠ËØªÂèñ map Êúâ‰∏§ÁßçËØ≠Ê≥ïÔºöÂ∏¶ comma Âíå ‰∏çÂ∏¶ comma„ÄÇÂΩìË¶ÅÊü•ËØ¢ÁöÑ key ‰∏çÂú® map ÈáåÔºåÂ∏¶ comma ÁöÑÁî®Ê≥ï‰ºöËøîÂõû‰∏Ä‰∏™ bool ÂûãÂèòÈáèÊèêÁ§∫ key ÊòØÂê¶Âú® map ‰∏≠ÔºõËÄå‰∏çÂ∏¶ comma ÁöÑËØ≠Âè•Âàô‰ºöËøîÂõû‰∏Ä‰∏™ value Á±ªÂûãÁöÑÈõ∂ÂÄº„ÄÇÂ¶ÇÊûú value ÊòØ int ÂûãÂ∞±‰ºöËøîÂõû 0ÔºåÂ¶ÇÊûú value ÊòØ string Á±ªÂûãÔºåÂ∞±‰ºöËøîÂõûÁ©∫Â≠óÁ¨¶‰∏≤„ÄÇ</p>
<pre><code class="language-go">    package main
    
    import "fmt"
    
    func main() {
    	ageMap := make(map[string]int)
    	ageMap["qcrao"] = 18
    
        // ‰∏çÂ∏¶ comma Áî®Ê≥ï
    	age1 := ageMap["stefno"]
    	fmt.Println(age1)
    
        // Â∏¶ comma Áî®Ê≥ï
    	age2, ok := ageMap["stefno"]
    	fmt.Println(age2, ok)
    }
</code></pre>
<p>ËøêË°åÁªìÊûúÔºö</p>
<pre><code class="language-go">    0
    0 false
</code></pre>
<p>‰ª•Ââç‰∏ÄÁõ¥ËßâÂæóÂ•ΩÁ•ûÂ•áÔºåÊÄé‰πàÂÆûÁé∞ÁöÑÔºüËøôÂÖ∂ÂÆûÊòØÁºñËØëÂô®Âú®ËÉåÂêéÂÅöÁöÑÂ∑•‰ΩúÔºöÂàÜÊûê‰ª£Á†ÅÂêéÔºåÂ∞Ü‰∏§ÁßçËØ≠Ê≥ïÂØπÂ∫îÂà∞Â∫ïÂ±Ç‰∏§‰∏™‰∏çÂêåÁöÑÂáΩÊï∞„ÄÇ</p>
<pre><code class="language-go">    // src/runtime/hashmap.go
    func mapaccess1(t *maptype, h *hmap, key unsafe.Pointer) unsafe.Pointer
    func mapaccess2(t *maptype, h *hmap, key unsafe.Pointer) (unsafe.Pointer, bool)
</code></pre>
<p>Ê∫êÁ†ÅÈáåÔºåÂáΩÊï∞ÂëΩÂêç‰∏çÊãòÂ∞èËäÇÔºåÁõ¥Êé•Â∏¶‰∏äÂêéÁºÄ 1Ôºå2ÔºåÂÆåÂÖ®‰∏çÁêÜ‰ºö„Ää‰ª£Á†ÅÂ§ßÂÖ®„ÄãÈáåÁöÑÈÇ£‰∏ÄÂ•óÂëΩÂêçÁöÑÂÅöÊ≥ï„ÄÇ‰ªé‰∏äÈù¢‰∏§‰∏™ÂáΩÊï∞ÁöÑÂ£∞Êòé‰πüÂèØ‰ª•ÁúãÂá∫Â∑ÆÂà´‰∫ÜÔºå<code>mapaccess2</code> ÂáΩÊï∞ËøîÂõûÂÄºÂ§ö‰∫Ü‰∏Ä‰∏™ bool ÂûãÂèòÈáèÔºå‰∏§ËÄÖÁöÑ‰ª£Á†Å‰πüÊòØÂÆåÂÖ®‰∏ÄÊ†∑ÁöÑÔºåÂè™ÊòØÂú®ËøîÂõûÂÄºÂêéÈù¢Â§öÂä†‰∫Ü‰∏Ä‰∏™ false ÊàñËÄÖ true„ÄÇ</p>
<p>Âè¶Â§ñÔºåÊ†πÊçÆ key ÁöÑ‰∏çÂêåÁ±ªÂûãÔºåÁºñËØëÂô®Ëøò‰ºöÂ∞ÜÊü•Êâæ„ÄÅÊèíÂÖ•„ÄÅÂà†Èô§ÁöÑÂáΩÊï∞Áî®Êõ¥ÂÖ∑‰ΩìÁöÑÂáΩÊï∞ÊõøÊç¢Ôºå‰ª•‰ºòÂåñÊïàÁéáÔºö</p>
<p>key Á±ªÂûã</p>
<p>Êü•Êâæ</p>
<pre><code class="language-go">uint32

mapaccess1_fast32(t *maptype, h *hmap, key uint32) unsafe.Pointer```

uint32

mapaccess2_fast32(t *maptype, h *hmap, key uint32) (unsafe.Pointer, bool)

uint64

mapaccess1_fast64(t *maptype, h *hmap, key uint64) unsafe.Pointer

uint64

mapaccess2_fast64(t *maptype, h *hmap, key uint64) (unsafe.Pointer, bool)

string

mapaccess1_faststr(t *maptype, h *hmap, ky string) unsafe.Pointer

string

mapaccess2_faststr(t *maptype, h *hmap, ky string) (unsafe.Pointer, bool)
</code></pre>
<p>Ëøô‰∫õÂáΩÊï∞ÁöÑÂèÇÊï∞Á±ªÂûãÁõ¥Êé•ÊòØÂÖ∑‰ΩìÁöÑ uint32„ÄÅunt64„ÄÅstringÔºåÂú®ÂáΩÊï∞ÂÜÖÈÉ®Áî±‰∫éÊèêÂâçÁü•Êôì‰∫Ü key ÁöÑÁ±ªÂûãÔºåÊâÄ‰ª•ÂÜÖÂ≠òÂ∏ÉÂ±ÄÊòØÂæàÊ∏ÖÊ•öÁöÑÔºåÂõ†Ê≠§ËÉΩËäÇÁúÅÂæàÂ§öÊìç‰ΩúÔºåÊèêÈ´òÊïàÁéá„ÄÇ</p>
<p>‰∏äÈù¢Ëøô‰∫õÂáΩÊï∞ÈÉΩÊòØÂú®Êñá‰ª∂ <code>src/runtime/hashmap_fast.go</code> Èáå„ÄÇ</p>
<h2 id="Â¶Ç‰ΩïËøõË°åÊâ©ÂÆπ">Â¶Ç‰ΩïËøõË°åÊâ©ÂÆπ</h2>
<p>‰ΩøÁî®ÂìàÂ∏åË°®ÁöÑÁõÆÁöÑÂ∞±ÊòØË¶ÅÂø´ÈÄüÊü•ÊâæÂà∞ÁõÆÊ†á keyÔºåÁÑ∂ËÄåÔºåÈöèÁùÄÂêë map ‰∏≠Ê∑ªÂä†ÁöÑ key Ë∂äÊù•Ë∂äÂ§öÔºåkey ÂèëÁîüÁ¢∞ÊíûÁöÑÊ¶ÇÁéá‰πüË∂äÊù•Ë∂äÂ§ß„ÄÇbucket ‰∏≠ÁöÑ 8 ‰∏™ cell ‰ºöË¢´ÈÄêÊ∏êÂ°ûÊª°ÔºåÊü•Êâæ„ÄÅÊèíÂÖ•„ÄÅÂà†Èô§ key ÁöÑÊïàÁéá‰πü‰ºöË∂äÊù•Ë∂ä‰Ωé„ÄÇÊúÄÁêÜÊÉ≥ÁöÑÊÉÖÂÜµÊòØ‰∏Ä‰∏™ bucket Âè™Ë£Ö‰∏Ä‰∏™ keyÔºåËøôÊ†∑ÔºåÂ∞±ËÉΩËææÂà∞ <code>O(1)</code> ÁöÑÊïàÁéáÔºå‰ΩÜËøôÊ†∑Á©∫Èó¥Ê∂àËÄóÂ§™Â§ßÔºåÁî®Á©∫Èó¥Êç¢Êó∂Èó¥ÁöÑ‰ª£‰ª∑Â§™È´ò„ÄÇ</p>
<p>Go ËØ≠Ë®ÄÈááÁî®‰∏Ä‰∏™ bucket ÈáåË£ÖËΩΩ 8 ‰∏™ keyÔºåÂÆö‰ΩçÂà∞Êüê‰∏™ bucket ÂêéÔºåËøòÈúÄË¶ÅÂÜçÂÆö‰ΩçÂà∞ÂÖ∑‰ΩìÁöÑ keyÔºåËøôÂÆûÈôÖ‰∏äÂèàÁî®‰∫ÜÊó∂Èó¥Êç¢Á©∫Èó¥„ÄÇ</p>
<p>ÂΩìÁÑ∂ÔºåËøôÊ†∑ÂÅöÔºåË¶ÅÊúâ‰∏Ä‰∏™Â∫¶Ôºå‰∏çÁÑ∂ÊâÄÊúâÁöÑ key ÈÉΩËêΩÂú®‰∫ÜÂêå‰∏Ä‰∏™ bucket ÈáåÔºåÁõ¥Êé•ÈÄÄÂåñÊàê‰∫ÜÈìæË°®ÔºåÂêÑÁßçÊìç‰ΩúÁöÑÊïàÁéáÁõ¥Êé•Èôç‰∏∫ O(n)ÔºåÊòØ‰∏çË°åÁöÑ„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÈúÄË¶ÅÊúâ‰∏Ä‰∏™ÊåáÊ†áÊù•Ë°°ÈáèÂâçÈù¢ÊèèËø∞ÁöÑÊÉÖÂÜµÔºåËøôÂ∞±ÊòØ<code>Ë£ÖËΩΩÂõ†Â≠ê</code>„ÄÇGo Ê∫êÁ†ÅÈáåËøôÊ†∑ÂÆö‰πâ <code>Ë£ÖËΩΩÂõ†Â≠ê</code>Ôºö</p>
<pre><code class="language-go">    loadFactor := count / (2^B)
</code></pre>
<p>count Â∞±ÊòØ map ÁöÑÂÖÉÁ¥†‰∏™Êï∞Ôºå2^B Ë°®Á§∫ bucket Êï∞Èáè„ÄÇ</p>
<p>ÂÜçÊù•ËØ¥Ëß¶Âèë map Êâ©ÂÆπÁöÑÊó∂Êú∫ÔºöÂú®Âêë map ÊèíÂÖ•Êñ∞ key ÁöÑÊó∂ÂÄôÔºå‰ºöËøõË°åÊù°‰ª∂Ê£ÄÊµãÔºåÁ¨¶Âêà‰∏ãÈù¢Ëøô 2 ‰∏™Êù°‰ª∂ÔºåÂ∞±‰ºöËß¶ÂèëÊâ©ÂÆπÔºö</p>
<ol>
<li>Ë£ÖËΩΩÂõ†Â≠êË∂ÖËøáÈòàÂÄºÔºåÊ∫êÁ†ÅÈáåÂÆö‰πâÁöÑÈòàÂÄºÊòØ 6.5„ÄÇ</li>
<li>overflow ÁöÑ bucket Êï∞ÈáèËøáÂ§öÔºöÂΩì B Â∞è‰∫é 15Ôºå‰πüÂ∞±ÊòØ bucket ÊÄªÊï∞ 2^B Â∞è‰∫é 2^15 Êó∂ÔºåÂ¶ÇÊûú overflow ÁöÑ bucket Êï∞ÈáèË∂ÖËøá 2^BÔºõÂΩì B &gt;= 15Ôºå‰πüÂ∞±ÊòØ bucket ÊÄªÊï∞ 2^B Â§ß‰∫éÁ≠â‰∫é 2^15ÔºåÂ¶ÇÊûú overflow ÁöÑ bucket Êï∞ÈáèË∂ÖËøá 2^15„ÄÇ</li>
</ol>
<p>ÈÄöËøáÊ±áÁºñËØ≠Ë®ÄÂèØ‰ª•ÊâæÂà∞ËµãÂÄºÊìç‰ΩúÂØπÂ∫îÊ∫êÁ†Å‰∏≠ÁöÑÂáΩÊï∞ÊòØ <code>mapassign</code>ÔºåÂØπÂ∫îÊâ©ÂÆπÊù°‰ª∂ÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö</p>
<pre><code class="language-go">    // src/runtime/hashmap.go/mapassign
    
    // Ëß¶ÂèëÊâ©ÂÆπÊó∂Êú∫
    if !h.growing() &amp;&amp; (overLoadFactor(int64(h.count), h.B) || tooManyOverflowBuckets(h.noverflow, h.B)) {
    		hashGrow(t, h)
    	}
    
    // Ë£ÖËΩΩÂõ†Â≠êË∂ÖËøá 6.5
    func overLoadFactor(count int64, B uint8) bool {
    	return count &gt;= bucketCnt &amp;&amp; float32(count) &gt;= loadFactor*float32((uint64(1)&lt;&lt;B))
    }
    
    // overflow buckets Â§™Â§ö
    func tooManyOverflowBuckets(noverflow uint16, B uint8) bool {
    	if B &lt; 16 {
    		return noverflow &gt;= uint16(1)&lt;&lt;B
    	}
    	return noverflow &gt;= 1&lt;&lt;15
    }
</code></pre>
<p>Ëß£Èáä‰∏Ä‰∏ãÔºö</p>
<p>Á¨¨ 1 ÁÇπÔºöÊàë‰ª¨Áü•ÈÅìÔºåÊØè‰∏™ bucket Êúâ 8 ‰∏™Á©∫‰ΩçÔºåÂú®Ê≤°ÊúâÊ∫¢Âá∫Ôºå‰∏îÊâÄÊúâÁöÑÊ°∂ÈÉΩË£ÖÊª°‰∫ÜÁöÑÊÉÖÂÜµ‰∏ãÔºåË£ÖËΩΩÂõ†Â≠êÁÆóÂá∫Êù•ÁöÑÁªìÊûúÊòØ 8„ÄÇÂõ†Ê≠§ÂΩìË£ÖËΩΩÂõ†Â≠êË∂ÖËøá 6.5 Êó∂ÔºåË°®ÊòéÂæàÂ§ö bucket ÈÉΩÂø´Ë¶ÅË£ÖÊª°‰∫ÜÔºåÊü•ÊâæÊïàÁéáÂíåÊèíÂÖ•ÊïàÁéáÈÉΩÂèò‰Ωé‰∫Ü„ÄÇÂú®Ëøô‰∏™Êó∂ÂÄôËøõË°åÊâ©ÂÆπÊòØÊúâÂøÖË¶ÅÁöÑ„ÄÇ</p>
<p>Á¨¨ 2 ÁÇπÔºöÊòØÂØπÁ¨¨ 1 ÁÇπÁöÑË°•ÂÖÖ„ÄÇÂ∞±ÊòØËØ¥Âú®Ë£ÖËΩΩÂõ†Â≠êÊØîËæÉÂ∞èÁöÑÊÉÖÂÜµ‰∏ãÔºåËøôÊó∂ÂÄô map ÁöÑÊü•ÊâæÂíåÊèíÂÖ•ÊïàÁéá‰πüÂæà‰ΩéÔºåËÄåÁ¨¨ 1 ÁÇπËØÜÂà´‰∏çÂá∫Êù•ËøôÁßçÊÉÖÂÜµ„ÄÇË°®Èù¢Áé∞Ë±°Â∞±ÊòØËÆ°ÁÆóË£ÖËΩΩÂõ†Â≠êÁöÑÂàÜÂ≠êÊØîËæÉÂ∞èÔºåÂç≥ map ÈáåÂÖÉÁ¥†ÊÄªÊï∞Â∞ëÔºå‰ΩÜÊòØ bucket Êï∞ÈáèÂ§öÔºàÁúüÂÆûÂàÜÈÖçÁöÑ bucket Êï∞ÈáèÂ§öÔºåÂåÖÊã¨Â§ßÈáèÁöÑ overflow bucketÔºâ„ÄÇ</p>
<p>‰∏çÈöæÊÉ≥ÂÉèÈÄ†ÊàêËøôÁßçÊÉÖÂÜµÁöÑÂéüÂõ†Ôºö‰∏çÂÅúÂú∞ÊèíÂÖ•„ÄÅÂà†Èô§ÂÖÉÁ¥†„ÄÇÂÖàÊèíÂÖ•ÂæàÂ§öÂÖÉÁ¥†ÔºåÂØºËá¥ÂàõÂª∫‰∫ÜÂæàÂ§ö bucketÔºå‰ΩÜÊòØË£ÖËΩΩÂõ†Â≠êËææ‰∏çÂà∞Á¨¨ 1 ÁÇπÁöÑ‰∏¥ÁïåÂÄºÔºåÊú™Ëß¶ÂèëÊâ©ÂÆπÊù•ÁºìËß£ËøôÁßçÊÉÖÂÜµ„ÄÇ‰πãÂêéÔºåÂà†Èô§ÂÖÉÁ¥†Èôç‰ΩéÂÖÉÁ¥†ÊÄªÊï∞ÈáèÔºåÂÜçÊèíÂÖ•ÂæàÂ§öÂÖÉÁ¥†ÔºåÂØºËá¥ÂàõÂª∫ÂæàÂ§öÁöÑ overflow bucketÔºå‰ΩÜÂ∞±ÊòØ‰∏ç‰ºöËß¶ÁäØÁ¨¨ 1 ÁÇπÁöÑËßÑÂÆöÔºå‰Ω†ËÉΩÊãøÊàëÊÄé‰πàÂäûÔºüoverflow bucket Êï∞ÈáèÂ§™Â§öÔºåÂØºËá¥ key ‰ºöÂæàÂàÜÊï£ÔºåÊü•ÊâæÊèíÂÖ•ÊïàÁéá‰ΩéÂæóÂêì‰∫∫ÔºåÂõ†Ê≠§Âá∫Âè∞Á¨¨ 2 ÁÇπËßÑÂÆö„ÄÇËøôÂ∞±ÂÉèÊòØ‰∏ÄÂ∫ßÁ©∫ÂüéÔºåÊàøÂ≠êÂæàÂ§öÔºå‰ΩÜÊòØ‰ΩèÊà∑ÂæàÂ∞ëÔºåÈÉΩÂàÜÊï£‰∫ÜÔºåÊâæËµ∑‰∫∫Êù•ÂæàÂõ∞Èöæ„ÄÇ</p>
<p>ÂØπ‰∫éÂëΩ‰∏≠Êù°‰ª∂ 1Ôºå2 ÁöÑÈôêÂà∂ÔºåÈÉΩ‰ºöÂèëÁîüÊâ©ÂÆπ„ÄÇ‰ΩÜÊòØÊâ©ÂÆπÁöÑÁ≠ñÁï•Âπ∂‰∏çÁõ∏ÂêåÔºåÊØïÁ´ü‰∏§ÁßçÊù°‰ª∂Â∫îÂØπÁöÑÂú∫ÊôØ‰∏çÂêå„ÄÇ</p>
<p>ÂØπ‰∫éÊù°‰ª∂ 1ÔºåÂÖÉÁ¥†Â§™Â§öÔºåËÄå bucket Êï∞ÈáèÂ§™Â∞ëÔºåÂæàÁÆÄÂçïÔºöÂ∞Ü B Âä† 1Ôºåbucket ÊúÄÂ§ßÊï∞ÈáèÔºà2^BÔºâÁõ¥Êé•ÂèòÊàêÂéüÊù• bucket Êï∞ÈáèÁöÑ 2 ÂÄç„ÄÇ‰∫éÊòØÔºåÂ∞±ÊúâÊñ∞ËÄÅ bucket ‰∫Ü„ÄÇÊ≥®ÊÑèÔºåËøôÊó∂ÂÄôÂÖÉÁ¥†ÈÉΩÂú®ËÄÅ bucket ÈáåÔºåËøòÊ≤°ËøÅÁßªÂà∞Êñ∞ÁöÑ bucket Êù•„ÄÇËÄå‰∏îÔºåÊñ∞ bucket Âè™ÊòØÊúÄÂ§ßÊï∞ÈáèÂèò‰∏∫ÂéüÊù•ÊúÄÂ§ßÊï∞ÈáèÔºà2^BÔºâÁöÑ 2 ÂÄçÔºà2^B * 2Ôºâ„ÄÇ</p>
<p>ÂØπ‰∫éÊù°‰ª∂ 2ÔºåÂÖ∂ÂÆûÂÖÉÁ¥†Ê≤°ÈÇ£‰πàÂ§öÔºå‰ΩÜÊòØ overflow bucket Êï∞ÁâπÂà´Â§öÔºåËØ¥ÊòéÂæàÂ§ö bucket ÈÉΩÊ≤°Ë£ÖÊª°„ÄÇËß£ÂÜ≥ÂäûÊ≥ïÂ∞±ÊòØÂºÄËæü‰∏Ä‰∏™Êñ∞ bucket Á©∫Èó¥ÔºåÂ∞ÜËÄÅ bucket ‰∏≠ÁöÑÂÖÉÁ¥†ÁßªÂä®Âà∞Êñ∞ bucketÔºå‰ΩøÂæóÂêå‰∏Ä‰∏™ bucket ‰∏≠ÁöÑ key ÊéíÂàóÂú∞Êõ¥Á¥ßÂØÜ„ÄÇËøôÊ†∑ÔºåÂéüÊù•ÔºåÂú® overflow bucket ‰∏≠ÁöÑ key ÂèØ‰ª•ÁßªÂä®Âà∞ bucket ‰∏≠Êù•„ÄÇÁªìÊûúÊòØËäÇÁúÅÁ©∫Èó¥ÔºåÊèêÈ´ò bucket Âà©Áî®ÁéáÔºåmap ÁöÑÊü•ÊâæÂíåÊèíÂÖ•ÊïàÁéáËá™ÁÑ∂Â∞±‰ºöÊèêÂçá„ÄÇ</p>
<p>ÂØπ‰∫éÊù°‰ª∂ 2 ÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåÊõπÂ§ßÁöÑÂçöÂÆ¢ÈáåËøòÊèêÂá∫‰∫Ü‰∏Ä‰∏™ÊûÅÁ´ØÁöÑÊÉÖÂÜµÔºöÂ¶ÇÊûúÊèíÂÖ• map ÁöÑ key ÂìàÂ∏åÈÉΩ‰∏ÄÊ†∑ÔºåÂ∞±‰ºöËêΩÂà∞Âêå‰∏Ä‰∏™ bucket ÈáåÔºåË∂ÖËøá 8 ‰∏™Â∞±‰ºö‰∫ßÁîü overflow bucketÔºåÁªìÊûú‰πü‰ºöÈÄ†Êàê overflow bucket Êï∞ËøáÂ§ö„ÄÇÁßªÂä®ÂÖÉÁ¥†ÂÖ∂ÂÆûËß£ÂÜ≥‰∏ç‰∫ÜÈóÆÈ¢òÔºåÂõ†‰∏∫ËøôÊó∂Êï¥‰∏™ÂìàÂ∏åË°®Â∑≤ÁªèÈÄÄÂåñÊàê‰∫Ü‰∏Ä‰∏™ÈìæË°®ÔºåÊìç‰ΩúÊïàÁéáÂèòÊàê‰∫Ü <code>O(n)</code>„ÄÇ</p>
<p>ÂÜçÊù•Áúã‰∏Ä‰∏ãÊâ©ÂÆπÂÖ∑‰ΩìÊòØÊÄé‰πàÂÅöÁöÑ„ÄÇÁî±‰∫é map Êâ©ÂÆπÈúÄË¶ÅÂ∞ÜÂéüÊúâÁöÑ key/value ÈáçÊñ∞Êê¨ËøÅÂà∞Êñ∞ÁöÑÂÜÖÂ≠òÂú∞ÂùÄÔºåÂ¶ÇÊûúÊúâÂ§ßÈáèÁöÑ key/value ÈúÄË¶ÅÊê¨ËøÅÔºå‰ºöÈùûÂ∏∏ÂΩ±ÂìçÊÄßËÉΩ„ÄÇÂõ†Ê≠§ Go map ÁöÑÊâ©ÂÆπÈááÂèñ‰∫Ü‰∏ÄÁßçÁß∞‰∏∫ ‚ÄúÊ∏êËøõÂºè‚Äù Âú∞ÊñπÂºèÔºåÂéüÊúâÁöÑ key Âπ∂‰∏ç‰ºö‰∏ÄÊ¨°ÊÄßÊê¨ËøÅÂÆåÊØïÔºåÊØèÊ¨°ÊúÄÂ§öÂè™‰ºöÊê¨ËøÅ 2 ‰∏™ bucket„ÄÇ</p>
<p>‰∏äÈù¢ËØ¥ÁöÑ <code>hashGrow()</code> ÂáΩÊï∞ÂÆûÈôÖ‰∏äÂπ∂Ê≤°ÊúâÁúüÊ≠£Âú∞ ‚ÄúÊê¨ËøÅ‚ÄùÔºåÂÆÉÂè™ÊòØÂàÜÈÖçÂ•Ω‰∫ÜÊñ∞ÁöÑ bucketsÔºåÂπ∂Â∞ÜËÄÅÁöÑ buckets ÊåÇÂà∞‰∫Ü oldbuckets Â≠óÊÆµ‰∏ä„ÄÇÁúüÊ≠£Êê¨ËøÅ buckets ÁöÑÂä®‰ΩúÂú® <code>growWork()</code> ÂáΩÊï∞‰∏≠ÔºåËÄåË∞ÉÁî® <code>growWork()</code> ÂáΩÊï∞ÁöÑÂä®‰ΩúÊòØÂú® mapassign Âíå mapdelete ÂáΩÊï∞‰∏≠„ÄÇ‰πüÂ∞±ÊòØÊèíÂÖ•Êàñ‰øÆÊîπ„ÄÅÂà†Èô§ key ÁöÑÊó∂ÂÄôÔºåÈÉΩ‰ºöÂ∞ùËØïËøõË°åÊê¨ËøÅ buckets ÁöÑÂ∑•‰Ωú„ÄÇÂÖàÊ£ÄÊü• oldbuckets ÊòØÂê¶Êê¨ËøÅÂÆåÊØïÔºåÂÖ∑‰ΩìÊù•ËØ¥Â∞±ÊòØÊ£ÄÊü• oldbuckets ÊòØÂê¶‰∏∫ nil„ÄÇ</p>
<p>Êàë‰ª¨ÂÖàÁúã <code>hashGrow()</code> ÂáΩÊï∞ÊâÄÂÅöÁöÑÂ∑•‰ΩúÔºåÂÜçÊù•ÁúãÂÖ∑‰ΩìÁöÑÊê¨ËøÅ buckets ÊòØÂ¶Ç‰ΩïËøõË°åÁöÑ„ÄÇ</p>
<pre><code class="language-go">    func hashGrow(t *maptype, h *hmap) {
    	// B+1 Áõ∏ÂΩì‰∫éÊòØÂéüÊù• 2 ÂÄçÁöÑÁ©∫Èó¥
    	bigger := uint8(1)
    
    	// ÂØπÂ∫îÊù°‰ª∂ 2
    	if !overLoadFactor(int64(h.count), h.B) {
    		// ËøõË°åÁ≠âÈáèÁöÑÂÜÖÂ≠òÊâ©ÂÆπÔºåÊâÄ‰ª• B ‰∏çÂèò
    		bigger = 0
    		h.flags |= sameSizeGrow
    	}
    	// Â∞ÜËÄÅ buckets ÊåÇÂà∞ buckets ‰∏ä
    	oldbuckets := h.buckets
    	// Áî≥ËØ∑Êñ∞ÁöÑ buckets Á©∫Èó¥
    	newbuckets, nextOverflow := makeBucketArray(t, h.B+bigger)
    
    	flags := h.flags &amp;^ (iterator | oldIterator)
    	if h.flags&amp;iterator != 0 {
    		flags |= oldIterator
    	}
    	// Êèê‰∫§ grow ÁöÑÂä®‰Ωú
    	h.B += bigger
    	h.flags = flags
    	h.oldbuckets = oldbuckets
    	h.buckets = newbuckets
    	// Êê¨ËøÅËøõÂ∫¶‰∏∫ 0
    	h.nevacuate = 0
    	// overflow buckets Êï∞‰∏∫ 0
    	h.noverflow = 0
    
    	// ‚Ä¶‚Ä¶
    }
</code></pre>
<p>‰∏ªË¶ÅÊòØÁî≥ËØ∑Âà∞‰∫ÜÊñ∞ÁöÑ buckets Á©∫Èó¥ÔºåÊääÁõ∏ÂÖ≥ÁöÑÊ†áÂøó‰ΩçÈÉΩËøõË°å‰∫ÜÂ§ÑÁêÜÔºö‰æãÂ¶ÇÊ†áÂøó nevacuate Ë¢´ÁΩÆ‰∏∫ 0Ôºå Ë°®Á§∫ÂΩìÂâçÊê¨ËøÅËøõÂ∫¶‰∏∫ 0„ÄÇ</p>
<p>ÂÄºÂæó‰∏ÄËØ¥ÁöÑÊòØÂØπ <code>h.flags</code> ÁöÑÂ§ÑÁêÜÔºö</p>
<pre><code class="language-go">    flags := h.flags &amp;^ (iterator | oldIterator)
    if h.flags&amp;iterator != 0 {
    	flags |= oldIterator
    }
</code></pre>
<p>ËøôÈáåÂæóÂÖàËØ¥‰∏ãËøêÁÆóÁ¨¶Ôºö&amp;^„ÄÇËøôÂè´<code>Êåâ‰ΩçÁΩÆ 0</code>ËøêÁÆóÁ¨¶„ÄÇ‰æãÂ¶ÇÔºö</p>
<pre><code class="language-go">    x = 01010011
    y = 01010100
    z = x &amp;^ y = 00000011
</code></pre>
<p>Â¶ÇÊûú y bit ‰Ωç‰∏∫ 1ÔºåÈÇ£‰πàÁªìÊûú z ÂØπÂ∫î bit ‰ΩçÂ∞±‰∏∫ 0ÔºåÂê¶Âàô z ÂØπÂ∫î bit ‰ΩçÂ∞±Âíå x ÂØπÂ∫î bit ‰ΩçÁöÑÂÄºÁõ∏Âêå„ÄÇ</p>
<p>ÊâÄ‰ª•‰∏äÈù¢ÈÇ£ÊÆµÂØπ flags ‰∏ÄÈ°øÊìç‰ΩúÁöÑ‰ª£Á†ÅÁöÑÊÑèÊÄùÊòØÔºöÂÖàÊää h.flags ‰∏≠ iterator Âíå oldIterator ÂØπÂ∫î‰ΩçÊ∏Ö 0ÔºåÁÑ∂ÂêéÂ¶ÇÊûúÂèëÁé∞ iterator ‰Ωç‰∏∫ 1ÔºåÈÇ£Â∞±ÊääÂÆÉËΩ¨Êé•Âà∞ oldIterator ‰ΩçÔºå‰ΩøÂæó oldIterator Ê†áÂøó‰ΩçÂèòÊàê 1„ÄÇÊΩúÂè∞ËØçÂ∞±ÊòØÔºöbuckets Áé∞Âú®ÊåÇÂà∞‰∫Ü oldBuckets Âêç‰∏ã‰∫ÜÔºåÂØπÂ∫îÁöÑÊ†áÂøó‰Ωç‰πüËΩ¨Êé•ËøáÂéªÂêß„ÄÇ</p>
<p>Âá†‰∏™Ê†áÂøó‰ΩçÂ¶Ç‰∏ãÔºö</p>
<pre><code class="language-go">    // ÂèØËÉΩÊúâËø≠‰ª£Âô®‰ΩøÁî® buckets
    iterator     = 1
    // ÂèØËÉΩÊúâËø≠‰ª£Âô®‰ΩøÁî® oldbuckets
    oldIterator  = 2
    // ÊúâÂçèÁ®ãÊ≠£Âú®Âêë map ‰∏≠ÂÜôÂÖ• key
    hashWriting  = 4
    // Á≠âÈáèÊâ©ÂÆπÔºàÂØπÂ∫îÊù°‰ª∂ 2Ôºâ
    sameSizeGrow = 8
</code></pre>
<p>ÂÜçÊù•ÁúãÁúãÁúüÊ≠£ÊâßË°åÊê¨ËøÅÂ∑•‰ΩúÁöÑ growWork() ÂáΩÊï∞„ÄÇ</p>
<pre><code class="language-go">    func growWork(t *maptype, h *hmap, bucket uintptr) {
    	// Á°ÆËÆ§Êê¨ËøÅËÄÅÁöÑ bucket ÂØπÂ∫îÊ≠£Âú®‰ΩøÁî®ÁöÑ bucket
    	evacuate(t, h, bucket&amp;h.oldbucketmask())
    
    	// ÂÜçÊê¨ËøÅ‰∏Ä‰∏™ bucketÔºå‰ª•Âä†Âø´Êê¨ËøÅËøõÁ®ã
    	if h.growing() {
    		evacuate(t, h, h.nevacuate)
    	}
    }
</code></pre>
<p>h.growing() ÂáΩÊï∞ÈùûÂ∏∏ÁÆÄÂçïÔºö</p>
<pre><code class="language-go">    func (h *hmap) growing() bool {
    	return h.oldbuckets != nil
    }
</code></pre>
<p>Â¶ÇÊûú <code>oldbuckets</code> ‰∏ç‰∏∫Á©∫ÔºåËØ¥ÊòéËøòÊ≤°ÊúâÊê¨ËøÅÂÆåÊØïÔºåËøòÂæóÁªßÁª≠Êê¨„ÄÇ</p>
<p><code>bucket&amp;h.oldbucketmask()</code> ËøôË°å‰ª£Á†ÅÔºåÂ¶ÇÊ∫êÁ†ÅÊ≥®ÈáäÈáåËØ¥ÁöÑÔºåÊòØ‰∏∫‰∫ÜÁ°ÆËÆ§Êê¨ËøÅÁöÑ bucket ÊòØÊàë‰ª¨Ê≠£Âú®‰ΩøÁî®ÁöÑ bucket„ÄÇ<code>oldbucketmask()</code> ÂáΩÊï∞ËøîÂõûÊâ©ÂÆπÂâçÁöÑ map ÁöÑ bucketmask„ÄÇ</p>
<p>ÊâÄË∞ìÁöÑ bucketmaskÔºå‰ΩúÁî®Â∞±ÊòØÂ∞Ü key ËÆ°ÁÆóÂá∫Êù•ÁöÑÂìàÂ∏åÂÄº‰∏é bucketmask Áõ∏‰∏éÔºåÂæóÂà∞ÁöÑÁªìÊûúÂ∞±ÊòØ key Â∫îËØ•ËêΩÂÖ•ÁöÑÊ°∂„ÄÇÊØîÂ¶Ç B = 5ÔºåÈÇ£‰πà bucketmask ÁöÑ‰Ωé 5 ‰ΩçÊòØ <code>11111</code>ÔºåÂÖ∂‰Ωô‰ΩçÊòØ <code>0</code>Ôºåhash ÂÄº‰∏éÂÖ∂Áõ∏‰∏éÁöÑÊÑèÊÄùÊòØÔºåÂè™Êúâ hash ÂÄºÁöÑ‰Ωé 5 ‰ΩçÂÜ≥Á≠ñ key Âà∞Â∫ïËêΩÂÖ•Âì™‰∏™ bucket„ÄÇ</p>
<p>Êé•‰∏ãÊù•ÔºåÊàë‰ª¨ÈõÜ‰∏≠ÊâÄÊúâÁöÑÁ≤æÂäõÂú®Êê¨ËøÅÁöÑÂÖ≥ÈîÆÂáΩÊï∞ evacuate„ÄÇÊ∫êÁ†ÅË¥¥Âú®‰∏ãÈù¢Ôºå‰∏çË¶ÅÁ¥ßÂº†ÔºåÊàë‰ºöÂä†‰∏äÂ§ßÈù¢ÁßØÁöÑÊ≥®ÈáäÔºåÈÄöËøáÊ≥®ÈáäÁªùÂØπÊòØËÉΩÁúãÊáÇÁöÑ„ÄÇ‰πãÂêéÔºåÊàë‰ºöÂÜçÂØπÊê¨ËøÅËøáÁ®ã‰ΩúËØ¶ÁªÜËØ¥Êòé„ÄÇ</p>
<p>Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö</p>
<pre><code class="language-go">    func evacuate(t *maptype, h *hmap, oldbucket uintptr) {
    	// ÂÆö‰ΩçËÄÅÁöÑ bucket Âú∞ÂùÄ
    	b := (*bmap)(add(h.oldbuckets, oldbucket*uintptr(t.bucketsize)))
    	// ÁªìÊûúÊòØ 2^BÔºåÂ¶Ç B = 5ÔºåÁªìÊûú‰∏∫32
    	newbit := h.noldbuckets()
    	// key ÁöÑÂìàÂ∏åÂáΩÊï∞
    	alg := t.key.alg
    	// Â¶ÇÊûú b Ê≤°ÊúâË¢´Êê¨ËøÅËøá
    	if !evacuated(b) {
    		var (
    			// Ë°®Á§∫bucket ÁßªÂä®ÁöÑÁõÆÊ†áÂú∞ÂùÄ
    			x, y   *bmap
    			// ÊåáÂêë x,y ‰∏≠ÁöÑ key/val
    			xi, yi int
    			// ÊåáÂêë xÔºåy ‰∏≠ÁöÑ key
    			xk, yk unsafe.Pointer
    			// ÊåáÂêë xÔºåy ‰∏≠ÁöÑ value
    			xv, yv unsafe.Pointer
    		)
    		// ÈªòËÆ§ÊòØÁ≠â size Êâ©ÂÆπÔºåÂâçÂêé bucket Â∫èÂè∑‰∏çÂèò
    		// ‰ΩøÁî® x Êù•ËøõË°åÊê¨ËøÅ
    		x = (*bmap)(add(h.buckets, oldbucket*uintptr(t.bucketsize)))
    		xi = 0
    		xk = add(unsafe.Pointer(x), dataOffset)
    		xv = add(xk, bucketCnt*uintptr(t.keysize))„ÄÅ
    
    		// Â¶ÇÊûú‰∏çÊòØÁ≠â size Êâ©ÂÆπÔºåÂâçÂêé bucket Â∫èÂè∑ÊúâÂèò
    		// ‰ΩøÁî® y Êù•ËøõË°åÊê¨ËøÅ
    		if !h.sameSizeGrow() {
    			// y ‰ª£Ë°®ÁöÑ bucket Â∫èÂè∑Â¢ûÂä†‰∫Ü 2^B
    			y = (*bmap)(add(h.buckets, (oldbucket+newbit)*uintptr(t.bucketsize)))
    			yi = 0
    			yk = add(unsafe.Pointer(y), dataOffset)
    			yv = add(yk, bucketCnt*uintptr(t.keysize))
    		}
    
    		// ÈÅçÂéÜÊâÄÊúâÁöÑ bucketÔºåÂåÖÊã¨ overflow buckets
    		// b ÊòØËÄÅÁöÑ bucket Âú∞ÂùÄ
    		for ; b != nil; b = b.overflow(t) {
    			k := add(unsafe.Pointer(b), dataOffset)
    			v := add(k, bucketCnt*uintptr(t.keysize))
    
    			// ÈÅçÂéÜ bucket ‰∏≠ÁöÑÊâÄÊúâ cell
    			for i := 0; i &lt; bucketCnt; i, k, v = i+1, add(k, uintptr(t.keysize)), add(v, uintptr(t.valuesize)) {
    				// ÂΩìÂâç cell ÁöÑ top hash ÂÄº
    				top := b.tophash[i]
    				// Â¶ÇÊûú cell ‰∏∫Á©∫ÔºåÂç≥Ê≤°Êúâ key
    				if top == empty {
    					// ÈÇ£Â∞±Ê†áÂøóÂÆÉË¢´"Êê¨ËøÅ"Ëøá
    					b.tophash[i] = evacuatedEmpty
    					// ÁªßÁª≠‰∏ã‰∏™ cell
    					continue
    				}
    				// Ê≠£Â∏∏‰∏ç‰ºöÂá∫Áé∞ËøôÁßçÊÉÖÂÜµ
    				// Êú™Ë¢´Êê¨ËøÅÁöÑ cell Âè™ÂèØËÉΩÊòØ empty ÊàñÊòØ
    				// Ê≠£Â∏∏ÁöÑ top hashÔºàÂ§ß‰∫é minTopHashÔºâ
    				if top &lt; minTopHash {
    					throw("bad map state")
    				}
    
    				k2 := k
    				// Â¶ÇÊûú key ÊòØÊåáÈíàÔºåÂàôËß£ÂºïÁî®
    				if t.indirectkey {
    					k2 = *((*unsafe.Pointer)(k2))
    				}
    
    				// ÈªòËÆ§‰ΩøÁî® XÔºåÁ≠âÈáèÊâ©ÂÆπ
    				useX := true
    				// Â¶ÇÊûú‰∏çÊòØÁ≠âÈáèÊâ©ÂÆπ
    				if !h.sameSizeGrow() {
    					// ËÆ°ÁÆó hash ÂÄºÔºåÂíå key Á¨¨‰∏ÄÊ¨°ÂÜôÂÖ•Êó∂‰∏ÄÊ†∑
    					hash := alg.hash(k2, uintptr(h.hash0))
    
    					// Â¶ÇÊûúÊúâÂçèÁ®ãÊ≠£Âú®ÈÅçÂéÜ map
    					if h.flags&amp;iterator != 0 {
    						// Â¶ÇÊûúÂá∫Áé∞ Áõ∏ÂêåÁöÑ key ÂÄºÔºåÁÆóÂá∫Êù•ÁöÑ hash ÂÄº‰∏çÂêå
    						if !t.reflexivekey &amp;&amp; !alg.equal(k2, k2) {
    							// Âè™ÊúâÂú® float ÂèòÈáèÁöÑ NaN() ÊÉÖÂÜµ‰∏ã‰ºöÂá∫Áé∞
    							if top&amp;1 != 0 {
    								// Á¨¨ B ‰ΩçÁΩÆ 1
    								hash |= newbit
    							} else {
    								// Á¨¨ B ‰ΩçÁΩÆ 0
    								hash &amp;^= newbit
    							}
    							// ÂèñÈ´ò 8 ‰Ωç‰Ωú‰∏∫ top hash ÂÄº
    							top = uint8(hash &gt;&gt; (sys.PtrSize*8 - 8))
    							if top &lt; minTopHash {
    								top += minTopHash
    							}
    						}
    					}
    
    					// ÂèñÂÜ≥‰∫éÊñ∞ÂìàÂ∏åÂÄºÁöÑ oldB+1 ‰ΩçÊòØ 0 ËøòÊòØ 1
    					// ËØ¶ÁªÜÁúãÂêéÈù¢ÁöÑÊñáÁ´†
    					useX = hash&amp;newbit == 0
    				}
    
    				// Â¶ÇÊûú key Êê¨Âà∞ X ÈÉ®ÂàÜ
    				if useX {
    					// Ê†áÂøóËÄÅÁöÑ cell ÁöÑ top hash ÂÄºÔºåË°®Á§∫Êê¨ÁßªÂà∞ X ÈÉ®ÂàÜ
    					b.tophash[i] = evacuatedX
    					// Â¶ÇÊûú xi Á≠â‰∫é 8ÔºåËØ¥ÊòéË¶ÅÊ∫¢Âá∫‰∫Ü
    					if xi == bucketCnt {
    						// Êñ∞Âª∫‰∏Ä‰∏™ bucket
    						newx := h.newoverflow(t, x)
    						x = newx
    						// xi ‰ªé 0 ÂºÄÂßãËÆ°Êï∞
    						xi = 0
    						// xk Ë°®Á§∫ key Ë¶ÅÁßªÂä®Âà∞ÁöÑ‰ΩçÁΩÆ
    						xk = add(unsafe.Pointer(x), dataOffset)
    						// xv Ë°®Á§∫ value Ë¶ÅÁßªÂä®Âà∞ÁöÑ‰ΩçÁΩÆ
    						xv = add(xk, bucketCnt*uintptr(t.keysize))
    					}
    					// ËÆæÁΩÆ top hash ÂÄº
    					x.tophash[xi] = top
    					// key ÊòØÊåáÈíà
    					if t.indirectkey {
    						// Â∞ÜÂéü keyÔºàÊòØÊåáÈíàÔºâÂ§çÂà∂Âà∞Êñ∞‰ΩçÁΩÆ
    						*(*unsafe.Pointer)(xk) = k2 // copy pointer
    					} else {
    						// Â∞ÜÂéü keyÔºàÊòØÂÄºÔºâÂ§çÂà∂Âà∞Êñ∞‰ΩçÁΩÆ
    						typedmemmove(t.key, xk, k) // copy value
    					}
    					// value ÊòØÊåáÈíàÔºåÊìç‰ΩúÂêå key
    					if t.indirectvalue {
    						*(*unsafe.Pointer)(xv) = *(*unsafe.Pointer)(v)
    					} else {
    						typedmemmove(t.elem, xv, v)
    					}
    
    					// ÂÆö‰ΩçÂà∞‰∏ã‰∏Ä‰∏™ cell
    					xi++
    					xk = add(xk, uintptr(t.keysize))
    					xv = add(xv, uintptr(t.valuesize))
    				} else { // key Êê¨Âà∞ Y ÈÉ®ÂàÜÔºåÊìç‰ΩúÂêå X ÈÉ®ÂàÜ
    					// ‚Ä¶‚Ä¶
    					// ÁúÅÁï•‰∫ÜËøôÈÉ®ÂàÜÔºåÊìç‰ΩúÂíå X ÈÉ®ÂàÜÁõ∏Âêå
    				}
    			}
    		}
    		// Â¶ÇÊûúÊ≤°ÊúâÂçèÁ®ãÂú®‰ΩøÁî®ËÄÅÁöÑ bucketsÔºåÂ∞±ÊääËÄÅ buckets Ê∏ÖÈô§ÊéâÔºåÂ∏ÆÂä©gc
    		if h.flags&amp;oldIterator == 0 {
    			b = (*bmap)(add(h.oldbuckets, oldbucket*uintptr(t.bucketsize)))
    			// Âè™Ê∏ÖÈô§bucket ÁöÑ key,value ÈÉ®ÂàÜÔºå‰øùÁïô top hash ÈÉ®ÂàÜÔºåÊåáÁ§∫Êê¨ËøÅÁä∂ÊÄÅ
    			if t.bucket.kind&amp;kindNoPointers == 0 {
    				memclrHasPointers(add(unsafe.Pointer(b), dataOffset), uintptr(t.bucketsize)-dataOffset)
    			} else {
    				memclrNoHeapPointers(add(unsafe.Pointer(b), dataOffset), uintptr(t.bucketsize)-dataOffset)
    			}
    		}
    	}
    
    	// Êõ¥Êñ∞Êê¨ËøÅËøõÂ∫¶
    	// Â¶ÇÊûúÊ≠§Ê¨°Êê¨ËøÅÁöÑ bucket Á≠â‰∫éÂΩìÂâçËøõÂ∫¶
    	if oldbucket == h.nevacuate {
    		// ËøõÂ∫¶Âä† 1
    		h.nevacuate = oldbucket + 1
    		// Experiments suggest that 1024 is overkill by at least an order of magnitude.
    		// Put it in there as a safeguard anyway, to ensure O(1) behavior.
    		// Â∞ùËØïÂæÄÂêéÁúã 1024 ‰∏™ bucket
    		stop := h.nevacuate + 1024
    		if stop &gt; newbit {
    			stop = newbit
    		}
    		// ÂØªÊâæÊ≤°ÊúâÊê¨ËøÅÁöÑ bucket
    		for h.nevacuate != stop &amp;&amp; bucketEvacuated(t, h, h.nevacuate) {
    			h.nevacuate++
    		}
    		
    		// Áé∞Âú® h.nevacuate ‰πãÂâçÁöÑ bucket ÈÉΩË¢´Êê¨ËøÅÂÆåÊØï
    		
    		// ÊâÄÊúâÁöÑ buckets Êê¨ËøÅÂÆåÊØï
    		if h.nevacuate == newbit {
    			// Ê∏ÖÈô§ËÄÅÁöÑ buckets
    			h.oldbuckets = nil
    			// Ê∏ÖÈô§ËÄÅÁöÑ overflow bucket
    			// ÂõûÂøÜ‰∏Ä‰∏ãÔºö[0] Ë°®Á§∫ÂΩìÂâç overflow bucket
    			// [1] Ë°®Á§∫ old overflow bucket
    			if h.extra != nil {
    				h.extra.overflow[1] = nil
    			}
    			// Ê∏ÖÈô§Ê≠£Âú®Êâ©ÂÆπÁöÑÊ†áÂøó‰Ωç
    			h.flags &amp;^= sameSizeGrow
    		}
    	}
    }
</code></pre>
<p>evacuate ÂáΩÊï∞ÁöÑ‰ª£Á†ÅÊ≥®ÈáäÈùûÂ∏∏Ê∏ÖÊô∞ÔºåÂØπÁùÄ‰ª£Á†ÅÂíåÊ≥®ÈáäÊòØÂæàÂÆπÊòìÁúãÊáÇÊï¥‰∏™ÁöÑÊê¨ËøÅËøáÁ®ãÁöÑÔºåËÄêÂøÉÁÇπ„ÄÇ</p>
<p>Êê¨ËøÅÁöÑÁõÆÁöÑÂ∞±ÊòØÂ∞ÜËÄÅÁöÑ buckets Êê¨ËøÅÂà∞Êñ∞ÁöÑ buckets„ÄÇËÄåÈÄöËøáÂâçÈù¢ÁöÑËØ¥ÊòéÊàë‰ª¨Áü•ÈÅìÔºåÂ∫îÂØπÊù°‰ª∂ 1ÔºåÊñ∞ÁöÑ buckets Êï∞ÈáèÊòØ‰πãÂâçÁöÑ‰∏ÄÂÄçÔºåÂ∫îÂØπÊù°‰ª∂ 2ÔºåÊñ∞ÁöÑ buckets Êï∞ÈáèÂíå‰πãÂâçÁõ∏Á≠â„ÄÇ</p>
<p>ÂØπ‰∫éÊù°‰ª∂ 2Ôºå‰ªéËÄÅÁöÑ buckets Êê¨ËøÅÂà∞Êñ∞ÁöÑ bucketsÔºåÁî±‰∫é bucktes Êï∞Èáè‰∏çÂèòÔºåÂõ†Ê≠§ÂèØ‰ª•ÊåâÂ∫èÂè∑Êù•Êê¨ÔºåÊØîÂ¶ÇÂéüÊù•Âú® 0 Âè∑ bucktesÔºåÂà∞Êñ∞ÁöÑÂú∞ÊñπÂêéÔºå‰ªçÁÑ∂ÊîæÂú® 0 Âè∑ buckets„ÄÇ</p>
<p>ÂØπ‰∫éÊù°‰ª∂ 1ÔºåÂ∞±Ê≤°Ëøô‰πàÁÆÄÂçï‰∫Ü„ÄÇË¶ÅÈáçÊñ∞ËÆ°ÁÆó key ÁöÑÂìàÂ∏åÔºåÊâçËÉΩÂÜ≥ÂÆöÂÆÉÂà∞Â∫ïËêΩÂú®Âì™‰∏™ bucket„ÄÇ‰æãÂ¶ÇÔºåÂéüÊù• B = 5ÔºåËÆ°ÁÆóÂá∫ key ÁöÑÂìàÂ∏åÂêéÔºåÂè™Áî®ÁúãÂÆÉÁöÑ‰Ωé 5 ‰ΩçÔºåÂ∞±ËÉΩÂÜ≥ÂÆöÂÆÉËêΩÂú®Âì™‰∏™ bucket„ÄÇÊâ©ÂÆπÂêéÔºåB ÂèòÊàê‰∫Ü 6ÔºåÂõ†Ê≠§ÈúÄË¶ÅÂ§öÁúã‰∏Ä‰ΩçÔºåÂÆÉÁöÑ‰Ωé 6 ‰ΩçÂÜ≥ÂÆö key ËêΩÂú®Âì™‰∏™ bucket„ÄÇËøôÁß∞‰∏∫ <code>rehash</code>„ÄÇ</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57740474-af7adb80-76ea-11e9-8409-4af0ce1a814a.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57740474-af7adb80-76ea-11e9-8409-4af0ce1a814a.png" loading="lazy" alt="map rehash">
	</a>
	
	<figcaption>map rehash</figcaption>
	
</figure><p></p>
<p>Âõ†Ê≠§ÔºåÊüê‰∏™ key Âú®Êê¨ËøÅÂâçÂêé bucket Â∫èÂè∑ÂèØËÉΩÂíåÂéüÊù•Áõ∏Á≠âÔºå‰πüÂèØËÉΩÊòØÁõ∏ÊØîÂéüÊù•Âä†‰∏ä 2^BÔºàÂéüÊù•ÁöÑ B ÂÄºÔºâÔºåÂèñÂÜ≥‰∫é hash ÂÄº Á¨¨ 6 bit ‰ΩçÊòØ 0 ËøòÊòØ 1„ÄÇ</p>
<p>ÁêÜËß£‰∫Ü‰∏äÈù¢ bucket Â∫èÂè∑ÁöÑÂèòÂåñÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÂõûÁ≠îÂè¶‰∏Ä‰∏™ÈóÆÈ¢ò‰∫ÜÔºö‰∏∫‰ªÄ‰πàÈÅçÂéÜ map ÊòØÊó†Â∫èÁöÑÔºü</p>
<p>map Âú®Êâ©ÂÆπÂêéÔºå‰ºöÂèëÁîü key ÁöÑÊê¨ËøÅÔºåÂéüÊù•ËêΩÂú®Âêå‰∏Ä‰∏™ bucket ‰∏≠ÁöÑ keyÔºåÊê¨ËøÅÂêéÔºåÊúâ‰∫õ key Â∞±Ë¶ÅËøúËµ∞È´òÈ£û‰∫ÜÔºàbucket Â∫èÂè∑Âä†‰∏ä‰∫Ü 2^BÔºâ„ÄÇËÄåÈÅçÂéÜÁöÑËøáÁ®ãÔºåÂ∞±ÊòØÊåâÈ°∫Â∫èÈÅçÂéÜ bucketÔºåÂêåÊó∂ÊåâÈ°∫Â∫èÈÅçÂéÜ bucket ‰∏≠ÁöÑ key„ÄÇÊê¨ËøÅÂêéÔºåkey ÁöÑ‰ΩçÁΩÆÂèëÁîü‰∫ÜÈáçÂ§ßÁöÑÂèòÂåñÔºåÊúâ‰∫õ key È£û‰∏äÈ´òÊûùÔºåÊúâ‰∫õ key ÂàôÂéüÂú∞‰∏çÂä®„ÄÇËøôÊ†∑ÔºåÈÅçÂéÜ map ÁöÑÁªìÊûúÂ∞±‰∏çÂèØËÉΩÊåâÂéüÊù•ÁöÑÈ°∫Â∫è‰∫Ü„ÄÇ</p>
<p>ÂΩìÁÑ∂ÔºåÂ¶ÇÊûúÊàëÂ∞±‰∏Ä‰∏™ hard code ÁöÑ mapÔºåÊàë‰πü‰∏ç‰ºöÂêë map ËøõË°åÊèíÂÖ•Âà†Èô§ÁöÑÊìç‰ΩúÔºåÊåâÁêÜËØ¥ÊØèÊ¨°ÈÅçÂéÜËøôÊ†∑ÁöÑ map ÈÉΩ‰ºöËøîÂõû‰∏Ä‰∏™Âõ∫ÂÆöÈ°∫Â∫èÁöÑ key/value Â∫èÂàóÂêß„ÄÇÁöÑÁ°ÆÊòØËøôÊ†∑Ôºå‰ΩÜÊòØ Go ÊùúÁªù‰∫ÜËøôÁßçÂÅöÊ≥ïÔºåÂõ†‰∏∫ËøôÊ†∑‰ºöÁªôÊñ∞ÊâãÁ®ãÂ∫èÂëòÂ∏¶Êù•ËØØËß£Ôºå‰ª•‰∏∫ËøôÊòØ‰∏ÄÂÆö‰ºöÂèëÁîüÁöÑ‰∫ãÊÉÖÔºåÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºåÂèØËÉΩ‰ºöÈÖøÊàêÂ§ßÈîô„ÄÇ</p>
<p>ÂΩìÁÑ∂ÔºåGo ÂÅöÂæóÊõ¥ÁªùÔºåÂΩìÊàë‰ª¨Âú®ÈÅçÂéÜ map Êó∂ÔºåÂπ∂‰∏çÊòØÂõ∫ÂÆöÂú∞‰ªé 0 Âè∑ bucket ÂºÄÂßãÈÅçÂéÜÔºåÊØèÊ¨°ÈÉΩÊòØ‰ªé‰∏Ä‰∏™ÈöèÊú∫ÂÄºÂ∫èÂè∑ÁöÑ bucket ÂºÄÂßãÈÅçÂéÜÔºåÂπ∂‰∏îÊòØ‰ªéËøô‰∏™ bucket ÁöÑ‰∏Ä‰∏™ÈöèÊú∫Â∫èÂè∑ÁöÑ cell ÂºÄÂßãÈÅçÂéÜ„ÄÇËøôÊ†∑ÔºåÂç≥‰Ωø‰Ω†ÊòØ‰∏Ä‰∏™ÂÜôÊ≠ªÁöÑ mapÔºå‰ªÖ‰ªÖÂè™ÊòØÈÅçÂéÜÂÆÉÔºå‰πü‰∏çÂ§™ÂèØËÉΩ‰ºöËøîÂõû‰∏Ä‰∏™Âõ∫ÂÆöÂ∫èÂàóÁöÑ key/value ÂØπ‰∫Ü„ÄÇ</p>
<p>Â§öËØ¥‰∏ÄÂè•Ôºå‚ÄúËø≠‰ª£ map ÁöÑÁªìÊûúÊòØÊó†Â∫èÁöÑ‚Äù Ëøô‰∏™ÁâπÊÄßÊòØ‰ªé go 1.0 ÂºÄÂßãÂä†ÂÖ•ÁöÑ„ÄÇ</p>
<p>ÂÜçÊòéÁ°Æ‰∏Ä‰∏™ÈóÆÈ¢òÔºöÂ¶ÇÊûúÊâ©ÂÆπÂêéÔºåB Â¢ûÂä†‰∫Ü 1ÔºåÊÑèÂë≥ÁùÄ buckets ÊÄªÊï∞ÊòØÂéüÊù•ÁöÑ 2 ÂÄçÔºåÂéüÊù• 1 Âè∑ÁöÑÊ°∂ ‚ÄúË£ÇÂèò‚Äù Âà∞‰∏§‰∏™Ê°∂„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÂéüÂßã B = 2Ôºå1 Âè∑ bucket ‰∏≠Êúâ 2 ‰∏™ key ÁöÑÂìàÂ∏åÂÄº‰Ωé 3 ‰ΩçÂàÜÂà´‰∏∫Ôºö010Ôºå110„ÄÇÁî±‰∫éÂéüÊù• B = 2ÔºåÊâÄ‰ª•‰Ωé 2 ‰Ωç <code>10</code> ÂÜ≥ÂÆöÂÆÉ‰ª¨ËêΩÂú® 2 Âè∑Ê°∂ÔºåÁé∞Âú® B ÂèòÊàê 3ÔºåÊâÄ‰ª• <code>010</code>„ÄÅ<code>110</code> ÂàÜÂà´ËêΩÂÖ• 2„ÄÅ6 Âè∑Ê°∂„ÄÇ</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57818861-74df7480-77b8-11e9-8104-2a58dc006660.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57818861-74df7480-77b8-11e9-8104-2a58dc006660.png" loading="lazy" alt="bucket split">
	</a>
	
	<figcaption>bucket split</figcaption>
	
</figure><p></p>
<p>ÁêÜËß£‰∫ÜËøô‰∏™ÔºåÂêéÈù¢ËÆ≤ map Ëø≠‰ª£ÁöÑÊó∂ÂÄô‰ºöÁî®Âà∞„ÄÇ</p>
<p>ÂÜçÊù•ËÆ≤Êê¨ËøÅÂáΩÊï∞‰∏≠ÁöÑÂá†‰∏™ÂÖ≥ÈîÆÁÇπÔºö</p>
<p>evacuate ÂáΩÊï∞ÊØèÊ¨°Âè™ÂÆåÊàê‰∏Ä‰∏™ bucket ÁöÑÊê¨ËøÅÂ∑•‰ΩúÔºåÂõ†Ê≠§Ë¶ÅÈÅçÂéÜÂÆåÊ≠§ bucket ÁöÑÊâÄÊúâÁöÑ cellÔºåÂ∞ÜÊúâÂÄºÁöÑ cell copy Âà∞Êñ∞ÁöÑÂú∞Êñπ„ÄÇbucket Ëøò‰ºöÈìæÊé• overflow bucketÔºåÂÆÉ‰ª¨ÂêåÊ†∑ÈúÄË¶ÅÊê¨ËøÅ„ÄÇÂõ†Ê≠§‰ºöÊúâ 2 Â±ÇÂæ™ÁéØÔºåÂ§ñÂ±ÇÈÅçÂéÜ bucket Âíå overflow bucketÔºåÂÜÖÂ±ÇÈÅçÂéÜ bucket ÁöÑÊâÄÊúâ cell„ÄÇËøôÊ†∑ÁöÑÂæ™ÁéØÂú® map ÁöÑÊ∫êÁ†ÅÈáåÂà∞Â§ÑÈÉΩÊòØÔºåË¶ÅÁêÜËß£ÈÄè‰∫Ü„ÄÇ</p>
<p>Ê∫êÁ†ÅÈáåÊèêÂà∞ X, Y partÔºåÂÖ∂ÂÆûÂ∞±ÊòØÊàë‰ª¨ËØ¥ÁöÑÂ¶ÇÊûúÊòØÊâ©ÂÆπÂà∞ÂéüÊù•ÁöÑ 2 ÂÄçÔºåÊ°∂ÁöÑÊï∞ÈáèÊòØÂéüÊù•ÁöÑ 2 ÂÄçÔºåÂâç‰∏ÄÂçäÊ°∂Ë¢´Áß∞‰∏∫ X partÔºåÂêé‰∏ÄÂçäÊ°∂Ë¢´Áß∞‰∏∫ Y part„ÄÇ‰∏Ä‰∏™ bucket ‰∏≠ÁöÑ key ÂèØËÉΩ‰ºöÂàÜË£ÇËêΩÂà∞ 2 ‰∏™Ê°∂Ôºå‰∏Ä‰∏™‰Ωç‰∫é X partÔºå‰∏Ä‰∏™‰Ωç‰∫é Y part„ÄÇÊâÄ‰ª•Âú®Êê¨ËøÅ‰∏Ä‰∏™ cell ‰πãÂâçÔºåÈúÄË¶ÅÁü•ÈÅìËøô‰∏™ cell ‰∏≠ÁöÑ key ÊòØËêΩÂà∞Âì™‰∏™ Part„ÄÇÂæàÁÆÄÂçïÔºåÈáçÊñ∞ËÆ°ÁÆó cell ‰∏≠ key ÁöÑ hashÔºåÂπ∂ÂêëÂâç ‚ÄúÂ§öÁúã‚Äù ‰∏Ä‰ΩçÔºåÂÜ≥ÂÆöËêΩÂÖ•Âì™‰∏™ PartÔºåËøô‰∏™ÂâçÈù¢‰πüËØ¥ÂæóÂæàËØ¶ÁªÜ‰∫Ü„ÄÇ</p>
<p>Êúâ‰∏Ä‰∏™ÁâπÊÆäÊÉÖÂÜµÊòØÔºöÊúâ‰∏ÄÁßç keyÔºåÊØèÊ¨°ÂØπÂÆÉËÆ°ÁÆó hashÔºåÂæóÂà∞ÁöÑÁªìÊûúÈÉΩ‰∏ç‰∏ÄÊ†∑„ÄÇËøô‰∏™ key Â∞±ÊòØ <code>math.NaN()</code> ÁöÑÁªìÊûúÔºåÂÆÉÁöÑÂê´‰πâÊòØ <code>not a number</code>ÔºåÁ±ªÂûãÊòØ float64„ÄÇÂΩìÂÆÉ‰Ωú‰∏∫ map ÁöÑ keyÔºåÂú®Êê¨ËøÅÁöÑÊó∂ÂÄôÔºå‰ºöÈÅáÂà∞‰∏Ä‰∏™ÈóÆÈ¢òÔºöÂÜçÊ¨°ËÆ°ÁÆóÂÆÉÁöÑÂìàÂ∏åÂÄºÂíåÂÆÉÂΩìÂàùÊèíÂÖ• map Êó∂ÁöÑËÆ°ÁÆóÂá∫Êù•ÁöÑÂìàÂ∏åÂÄº‰∏ç‰∏ÄÊ†∑ÔºÅ</p>
<p>‰Ω†ÂèØËÉΩÊÉ≥Âà∞‰∫ÜÔºåËøôÊ†∑Â∏¶Êù•ÁöÑ‰∏Ä‰∏™ÂêéÊûúÊòØÔºåËøô‰∏™ key ÊòØÊ∞∏Ëøú‰∏ç‰ºöË¢´ Get Êìç‰ΩúËé∑ÂèñÁöÑÔºÅÂΩìÊàë‰ΩøÁî® <code>m[math.NaN()]</code> ËØ≠Âè•ÁöÑÊó∂ÂÄôÔºåÊòØÊü•‰∏çÂá∫Êù•ÁªìÊûúÁöÑ„ÄÇËøô‰∏™ key Âè™ÊúâÂú®ÈÅçÂéÜÊï¥‰∏™ map ÁöÑÊó∂ÂÄôÔºåÊâçÊúâÊú∫‰ºöÁé∞Ë∫´„ÄÇÊâÄ‰ª•ÔºåÂèØ‰ª•Âêë‰∏Ä‰∏™ map ÊèíÂÖ•‰ªªÊÑèÊï∞ÈáèÁöÑ <code>math.NaN()</code> ‰Ωú‰∏∫ key„ÄÇ</p>
<p>ÂΩìÊê¨ËøÅÁ¢∞Âà∞ <code>math.NaN()</code> ÁöÑ key Êó∂ÔºåÂè™ÈÄöËøá tophash ÁöÑÊúÄ‰Ωé‰ΩçÂÜ≥ÂÆöÂàÜÈÖçÂà∞ X part ËøòÊòØ Y partÔºàÂ¶ÇÊûúÊâ©ÂÆπÂêéÊòØÂéüÊù• buckets Êï∞ÈáèÁöÑ 2 ÂÄçÔºâ„ÄÇÂ¶ÇÊûú tophash ÁöÑÊúÄ‰Ωé‰ΩçÊòØ 0 ÔºåÂàÜÈÖçÂà∞ X partÔºõÂ¶ÇÊûúÊòØ 1 ÔºåÂàôÂàÜÈÖçÂà∞ Y part„ÄÇ</p>
<p>ËøôÊòØÈÄöËøá tophash ÂÄº‰∏éÊñ∞ÁÆóÂá∫Êù•ÁöÑÂìàÂ∏åÂÄºËøõË°åËøêÁÆóÂæóÂà∞ÁöÑÔºö</p>
<pre><code class="language-go">    if top&amp;1 != 0 {
        // top hash ÊúÄ‰Ωé‰Ωç‰∏∫ 1
        // Êñ∞ÁÆóÂá∫Êù•ÁöÑ hash ÂÄºÁöÑ B ‰ΩçÁΩÆ 1
    	hash |= newbit
    } else {
        // Êñ∞ÁÆóÂá∫Êù•ÁöÑ hash ÂÄºÁöÑ B ‰ΩçÁΩÆ 0
    	hash &amp;^= newbit
    }
    
    // hash ÂÄºÁöÑ B ‰Ωç‰∏∫ 0ÔºåÂàôÊê¨ËøÅÂà∞ x part
    // ÂΩì B = 5Êó∂Ôºånewbit = 32Ôºå‰∫åËøõÂà∂‰Ωé 6 ‰Ωç‰∏∫ 10 0000
    useX = hash&amp;newbit == 0
</code></pre>
<p>ÂÖ∂ÂÆûËøôÊ†∑ÁöÑ key ÊàëÈöè‰æøÊê¨ËøÅÂà∞Âì™‰∏™ bucket ÈÉΩË°åÔºåÂΩìÁÑ∂ÔºåËøòÊòØË¶ÅÊê¨ËøÅÂà∞‰∏äÈù¢Ë£ÇÂèòÈÇ£Âº†Âõæ‰∏≠ÁöÑ‰∏§‰∏™ bucket ‰∏≠Âéª„ÄÇ‰ΩÜËøôÊ†∑ÂÅöÊòØÊúâÂ•ΩÂ§ÑÁöÑÔºåÂú®ÂêéÈù¢ËÆ≤ map Ëø≠‰ª£ÁöÑÊó∂ÂÄô‰ºöÂÜçËØ¶ÁªÜËß£ÈáäÔºåÊöÇÊó∂Áü•ÈÅìÊòØËøôÊ†∑ÂàÜÈÖçÁöÑÂ∞±Ë°å„ÄÇ</p>
<p>Á°ÆÂÆö‰∫ÜË¶ÅÊê¨ËøÅÂà∞ÁöÑÁõÆÊ†á bucket ÂêéÔºåÊê¨ËøÅÊìç‰ΩúÂ∞±ÊØîËæÉÂ•ΩËøõË°å‰∫Ü„ÄÇÂ∞ÜÊ∫ê key/value ÂÄº copy Âà∞ÁõÆÁöÑÂú∞Áõ∏Â∫îÁöÑ‰ΩçÁΩÆ„ÄÇ</p>
<p>ËÆæÁΩÆ key Âú®ÂéüÂßã buckets ÁöÑ tophash ‰∏∫ <code>evacuatedX</code> ÊàñÊòØ <code>evacuatedY</code>ÔºåË°®Á§∫Â∑≤ÁªèÊê¨ËøÅÂà∞‰∫ÜÊñ∞ map ÁöÑ x part ÊàñÊòØ y part„ÄÇÊñ∞ map ÁöÑ tophash ÂàôÊ≠£Â∏∏Âèñ key ÂìàÂ∏åÂÄºÁöÑÈ´ò 8 ‰Ωç„ÄÇ</p>
<p>‰∏ãÈù¢ÈÄöËøáÂõæÊù•ÂÆèËßÇÂú∞Áúã‰∏Ä‰∏ãÊâ©ÂÆπÂâçÂêéÁöÑÂèòÂåñ„ÄÇ</p>
<p>Êâ©ÂÆπÂâçÔºåB = 2ÔºåÂÖ±Êúâ 4 ‰∏™ bucketsÔºålowbits Ë°®Á§∫ hash ÂÄºÁöÑ‰Ωé‰Ωç„ÄÇÂÅáËÆæÊàë‰ª¨‰∏çÂÖ≥Ê≥®ÂÖ∂‰ªñ buckets ÊÉÖÂÜµÔºå‰∏ìÊ≥®Âú® 2 Âè∑ bucket„ÄÇÂπ∂‰∏îÂÅáËÆæ overflow Â§™Â§öÔºåËß¶Âèë‰∫ÜÁ≠âÈáèÊâ©ÂÆπÔºàÂØπÂ∫î‰∫éÂâçÈù¢ÁöÑÊù°‰ª∂ 2Ôºâ„ÄÇ</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57963483-5b286380-7957-11e9-852a-8296c6c16daa.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57963483-5b286380-7957-11e9-852a-8296c6c16daa.png" loading="lazy" alt="Êâ©ÂÆπÂâç">
	</a>
	
	<figcaption>Êâ©ÂÆπÂâç</figcaption>
	
</figure><p></p>
<p>Êâ©ÂÆπÂÆåÊàêÂêéÔºåoverflow bucket Ê∂àÂ§±‰∫ÜÔºåkey ÈÉΩÈõÜ‰∏≠Âà∞‰∫Ü‰∏Ä‰∏™ bucketÔºåÊõ¥‰∏∫Á¥ßÂáë‰∫ÜÔºåÊèêÈ´ò‰∫ÜÊü•ÊâæÁöÑÊïàÁéá„ÄÇ</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57963519-dc7ff600-7957-11e9-9877-36c3f4bc3526.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57963519-dc7ff600-7957-11e9-9877-36c3f4bc3526.png" loading="lazy" alt="same size Êâ©ÂÆπ">
	</a>
	
	<figcaption>same size Êâ©ÂÆπ</figcaption>
	
</figure><p></p>
<p>ÂÅáËÆæËß¶Âèë‰∫Ü 2 ÂÄçÁöÑÊâ©ÂÆπÔºåÈÇ£‰πàÊâ©ÂÆπÂÆåÊàêÂêéÔºåËÄÅ buckets ‰∏≠ÁöÑ key ÂàÜË£ÇÂà∞‰∫Ü 2 ‰∏™ Êñ∞ÁöÑ bucket„ÄÇ‰∏Ä‰∏™Âú® x partÔºå‰∏Ä‰∏™Âú® y ÁöÑ part„ÄÇ‰æùÊçÆÊòØ hash ÁöÑ lowbits„ÄÇÊñ∞ map ‰∏≠ <code>0-3</code> Áß∞‰∏∫ x partÔºå<code>4-7</code> Áß∞‰∏∫ y part„ÄÇ</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57963651-04705900-795a-11e9-9801-e3dc475d4782.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57963651-04705900-795a-11e9-9801-e3dc475d4782.png" loading="lazy" alt="2ÂÄçÊâ©ÂÆπ">
	</a>
	
	<figcaption>2 ÂÄçÊâ©ÂÆπ</figcaption>
	
</figure><p></p>
<p>Ê≥®ÊÑèÔºå‰∏äÈù¢ÁöÑ‰∏§Âº†ÂõæÂøΩÁï•‰∫ÜÂÖ∂‰ªñ buckets ÁöÑÊê¨ËøÅÊÉÖÂÜµÔºåË°®Á§∫ÊâÄÊúâÁöÑ bucket ÈÉΩÊê¨ËøÅÂÆåÊØïÂêéÁöÑÊÉÖÂΩ¢„ÄÇÂÆûÈôÖ‰∏äÔºåÊàë‰ª¨Áü•ÈÅìÔºåÊê¨ËøÅÊòØ‰∏Ä‰∏™ ‚ÄúÊ∏êËøõ‚Äù ÁöÑËøáÁ®ãÔºåÂπ∂‰∏ç‰ºö‰∏Ä‰∏ãÂ≠êÂ∞±ÂÖ®ÈÉ®Êê¨ËøÅÂÆåÊØï„ÄÇÊâÄ‰ª•Âú®Êê¨ËøÅËøáÁ®ã‰∏≠Ôºåoldbuckets ÊåáÈíàËøò‰ºöÊåáÂêëÂéüÊù•ËÄÅÁöÑ []bmapÔºåÂπ∂‰∏îÂ∑≤ÁªèÊê¨ËøÅÂÆåÊØïÁöÑ key ÁöÑ tophash ÂÄº‰ºöÊòØ‰∏Ä‰∏™Áä∂ÊÄÅÂÄºÔºåË°®Á§∫ key ÁöÑÊê¨ËøÅÂéªÂêë„ÄÇ</p>
<h2 id="map-ÁöÑÈÅçÂéÜ">map ÁöÑÈÅçÂéÜ</h2>
<p>Êú¨Êù• map ÁöÑÈÅçÂéÜËøáÁ®ãÊØîËæÉÁÆÄÂçïÔºöÈÅçÂéÜÊâÄÊúâÁöÑ bucket ‰ª•ÂèäÂÆÉÂêéÈù¢ÊåÇÁöÑ overflow bucketÔºåÁÑ∂ÂêéÊå®‰∏™ÈÅçÂéÜ bucket ‰∏≠ÁöÑÊâÄÊúâ cell„ÄÇÊØè‰∏™ bucket ‰∏≠ÂåÖÂê´ 8 ‰∏™ cellÔºå‰ªéÊúâ key ÁöÑ cell ‰∏≠ÂèñÂá∫ key Âíå valueÔºåËøô‰∏™ËøáÁ®ãÂ∞±ÂÆåÊàê‰∫Ü„ÄÇ</p>
<p>‰ΩÜÊòØÔºåÁé∞ÂÆûÂπ∂Ê≤°ÊúâËøô‰πàÁÆÄÂçï„ÄÇËøòËÆ∞ÂæóÂâçÈù¢ËÆ≤ËøáÁöÑÊâ©ÂÆπËøáÁ®ãÂêóÔºüÊâ©ÂÆπËøáÁ®ã‰∏çÊòØ‰∏Ä‰∏™ÂéüÂ≠êÁöÑÊìç‰ΩúÔºåÂÆÉÊØèÊ¨°ÊúÄÂ§öÂè™Êê¨Ëøê 2 ‰∏™ bucketÔºåÊâÄ‰ª•Â¶ÇÊûúËß¶Âèë‰∫ÜÊâ©ÂÆπÊìç‰ΩúÔºåÈÇ£‰πàÂú®ÂæàÈïøÊó∂Èó¥ÈáåÔºåmap ÁöÑÁä∂ÊÄÅÈÉΩÊòØÂ§Ñ‰∫é‰∏Ä‰∏™‰∏≠Èó¥ÊÄÅÔºöÊúâ‰∫õ bucket Â∑≤ÁªèÊê¨ËøÅÂà∞Êñ∞ÂÆ∂ÔºåËÄåÊúâ‰∫õ bucket ËøòÂæÖÂú®ËÄÅÂú∞Êñπ„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÈÅçÂéÜÂ¶ÇÊûúÂèëÁîüÂú®Êâ©ÂÆπÁöÑËøáÁ®ã‰∏≠ÔºåÂ∞±‰ºöÊ∂âÂèäÂà∞ÈÅçÂéÜÊñ∞ËÄÅ bucket ÁöÑËøáÁ®ãÔºåËøôÊòØÈöæÁÇπÊâÄÂú®„ÄÇ</p>
<p>ÊàëÂÖàÂÜô‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰ª£Á†ÅÊ†∑‰æãÔºåÂÅáË£Ö‰∏çÁü•ÈÅìÈÅçÂéÜËøáÁ®ãÂÖ∑‰ΩìË∞ÉÁî®ÁöÑÊòØ‰ªÄ‰πàÂáΩÊï∞Ôºö</p>
<pre><code class="language-go">    package main
    
    import "fmt"
    
    func main() {
    	ageMp := make(map[string]int)
    	ageMp["qcrao"] = 18
    
    	for name, age := range ageMp {
    		fmt.Println(name, age)
    	}
    }
</code></pre>
<p>ÊâßË°åÂëΩ‰ª§Ôºö</p>
<pre><code class="language-go">    go tool compile -S main.go
</code></pre>
<p>ÂæóÂà∞Ê±áÁºñÂëΩ‰ª§„ÄÇËøôÈáåÂ∞±‰∏çÈÄêË°åËÆ≤Ëß£‰∫ÜÔºåÂèØ‰ª•ÂéªÁúã‰πãÂâçÁöÑÂá†ÁØáÊñáÁ´†ÔºåËØ¥ÂæóÂæàËØ¶ÁªÜ„ÄÇ</p>
<p>ÂÖ≥ÈîÆÁöÑÂá†Ë°åÊ±áÁºñ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<pre><code class="language-go">    // ......
    0x0124 00292 (test16.go:9)      CALL    runtime.mapiterinit(SB)
    
    // ......
    0x01fb 00507 (test16.go:9)      CALL    runtime.mapiternext(SB)
    0x0200 00512 (test16.go:9)      MOVQ    ""..autotmp_4+160(SP), AX
    0x0208 00520 (test16.go:9)      TESTQ   AX, AX
    0x020b 00523 (test16.go:9)      JNE     302
    
    // ......
</code></pre>
<p>ËøôÊ†∑ÔºåÂÖ≥‰∫é map Ëø≠‰ª£ÔºåÂ∫ïÂ±ÇÁöÑÂáΩÊï∞Ë∞ÉÁî®ÂÖ≥Á≥ª‰∏ÄÁõÆ‰∫ÜÁÑ∂„ÄÇÂÖàÊòØË∞ÉÁî® <code>mapiterinit</code> ÂáΩÊï∞ÂàùÂßãÂåñËø≠‰ª£Âô®ÔºåÁÑ∂ÂêéÂæ™ÁéØË∞ÉÁî® <code>mapiternext</code> ÂáΩÊï∞ËøõË°å map Ëø≠‰ª£„ÄÇ</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57976471-ad2ebf00-7a13-11e9-8dd8-d7be54f96440.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57976471-ad2ebf00-7a13-11e9-8dd8-d7be54f96440.png" loading="lazy" alt="map iter loop">
	</a>
	
	<figcaption>map iter loop</figcaption>
	
</figure><p></p>
<p>Ëø≠‰ª£Âô®ÁöÑÁªìÊûÑ‰ΩìÂÆö‰πâÔºö</p>
<pre><code class="language-go">    type hiter struct {
    	// key ÊåáÈíà
    	key         unsafe.Pointer
    	// value ÊåáÈíà
    	value       unsafe.Pointer
    	// map Á±ªÂûãÔºåÂåÖÂê´Â¶Ç key size Â§ßÂ∞èÁ≠â
    	t           *maptype
    	// map header
    	h           *hmap
    	// ÂàùÂßãÂåñÊó∂ÊåáÂêëÁöÑ bucket
    	buckets     unsafe.Pointer
    	// ÂΩìÂâçÈÅçÂéÜÂà∞ÁöÑ bmap
    	bptr        *bmap
    	overflow    [2]*[]*bmap
    	// Ëµ∑ÂßãÈÅçÂéÜÁöÑ bucet ÁºñÂè∑
    	startBucket uintptr
    	// ÈÅçÂéÜÂºÄÂßãÊó∂ cell ÁöÑÁºñÂè∑ÔºàÊØè‰∏™ bucket ‰∏≠Êúâ 8 ‰∏™ cellÔºâ
    	offset      uint8
    	// ÊòØÂê¶‰ªéÂ§¥ÈÅçÂéÜ‰∫Ü
    	wrapped     bool
    	// B ÁöÑÂ§ßÂ∞è
    	B           uint8
    	// ÊåáÁ§∫ÂΩìÂâç cell Â∫èÂè∑
    	i           uint8
    	// ÊåáÂêëÂΩìÂâçÁöÑ bucket
    	bucket      uintptr
    	// Âõ†‰∏∫Êâ©ÂÆπÔºåÈúÄË¶ÅÊ£ÄÊü•ÁöÑ bucket
    	checkBucket uintptr
    }
</code></pre>
<p><code>mapiterinit</code> Â∞±ÊòØÂØπ hiter ÁªìÊûÑ‰ΩìÈáåÁöÑÂ≠óÊÆµËøõË°åÂàùÂßãÂåñËµãÂÄºÊìç‰Ωú„ÄÇ</p>
<p>ÂâçÈù¢Â∑≤ÁªèÊèêÂà∞ËøáÔºåÂç≥‰ΩøÊòØÂØπ‰∏Ä‰∏™ÂÜôÊ≠ªÁöÑ map ËøõË°åÈÅçÂéÜÔºåÊØèÊ¨°Âá∫Êù•ÁöÑÁªìÊûú‰πüÊòØÊó†Â∫èÁöÑ„ÄÇ‰∏ãÈù¢Êàë‰ª¨Â∞±ÂèØ‰ª•ËøëË∑ùÁ¶ªÂú∞ËßÇÂØü‰ªñ‰ª¨ÁöÑÂÆûÁé∞‰∫Ü„ÄÇ</p>
<pre><code class="language-go">    // ÁîüÊàêÈöèÊú∫Êï∞ r
    r := uintptr(fastrand())
    if h.B &gt; 31-bucketCntBits {
    	r += uintptr(fastrand()) &lt;&lt; 31
    }
    
    // ‰ªéÂì™‰∏™ bucket ÂºÄÂßãÈÅçÂéÜ
    it.startBucket = r &amp; (uintptr(1)&lt;&lt;h.B - 1)
    // ‰ªé bucket ÁöÑÂì™‰∏™ cell ÂºÄÂßãÈÅçÂéÜ
    it.offset = uint8(r &gt;&gt; h.B &amp; (bucketCnt - 1))
</code></pre>
<p>‰æãÂ¶ÇÔºåB = 2ÔºåÈÇ£ <code>uintptr(1)&lt;&lt;h.B - 1</code> ÁªìÊûúÂ∞±ÊòØ 3Ôºå‰Ωé 8 ‰Ωç‰∏∫ <code>0000 0011</code>ÔºåÂ∞Ü r ‰∏é‰πãÁõ∏‰∏éÔºåÂ∞±ÂèØ‰ª•ÂæóÂà∞‰∏Ä‰∏™ <code>0~3</code> ÁöÑ bucket Â∫èÂè∑ÔºõbucketCnt - 1 Á≠â‰∫é 7Ôºå‰Ωé 8 ‰Ωç‰∏∫ <code>0000 0111</code>ÔºåÂ∞Ü r Âè≥Áßª 2 ‰ΩçÂêéÔºå‰∏é 7 Áõ∏‰∏éÔºåÂ∞±ÂèØ‰ª•ÂæóÂà∞‰∏Ä‰∏™ <code>0~7</code> Âè∑ÁöÑ cell„ÄÇ</p>
<p>‰∫éÊòØÔºåÂú® <code>mapiternext</code> ÂáΩÊï∞‰∏≠Â∞±‰ºö‰ªé it.startBucket ÁöÑ it.offset Âè∑ÁöÑ cell ÂºÄÂßãÈÅçÂéÜÔºåÂèñÂá∫ÂÖ∂‰∏≠ÁöÑ key Âíå valueÔºåÁõ¥Âà∞ÂèàÂõûÂà∞Ëµ∑ÁÇπ bucketÔºåÂÆåÊàêÈÅçÂéÜËøáÁ®ã„ÄÇ</p>
<p>Ê∫êÁ†ÅÈÉ®ÂàÜÊØîËæÉÂ•ΩÁúãÊáÇÔºåÂ∞§ÂÖ∂ÊòØÁêÜËß£‰∫ÜÂâçÈù¢Ê≥®ÈáäÁöÑÂá†ÊÆµ‰ª£Á†ÅÂêéÔºåÂÜçÁúãËøôÈÉ®ÂàÜ‰ª£Á†ÅÂ∞±Ê≤°‰ªÄ‰πàÂéãÂäõ‰∫Ü„ÄÇÊâÄ‰ª•ÔºåÊé•‰∏ãÊù•ÔºåÊàëÂ∞ÜÈÄöËøáÂõæÂΩ¢ÂåñÁöÑÊñπÂºèËÆ≤Ëß£Êï¥‰∏™ÈÅçÂéÜËøáÁ®ãÔºåÂ∏åÊúõËÉΩÂ§üÊ∏ÖÊô∞ÊòìÊáÇ„ÄÇ</p>
<p>ÂÅáËÆæÊàë‰ª¨Êúâ‰∏ãÂõæÊâÄÁ§∫ÁöÑ‰∏Ä‰∏™ mapÔºåËµ∑ÂßãÊó∂ B = 1ÔºåÊúâ‰∏§‰∏™ bucketÔºåÂêéÊù•Ëß¶Âèë‰∫ÜÊâ©ÂÆπÔºàËøôÈáå‰∏çË¶ÅÊ∑±Á©∂Êâ©ÂÆπÊù°‰ª∂ÔºåÂè™ÊòØ‰∏Ä‰∏™ËÆæÂÆöÔºâÔºåB ÂèòÊàê 2„ÄÇÂπ∂‰∏îÔºå 1 Âè∑ bucket ‰∏≠ÁöÑÂÜÖÂÆπÊê¨ËøÅÂà∞‰∫ÜÊñ∞ÁöÑ bucketÔºå<code>1 Âè∑</code>Ë£ÇÂèòÊàê <code>1 Âè∑</code>Âíå <code>3 Âè∑</code>Ôºõ<code>0 Âè∑</code> bucket ÊöÇÊú™Êê¨ËøÅ„ÄÇËÄÅÁöÑ bucket ÊåÇÂú®Âú® <code>*oldbuckets</code> ÊåáÈíà‰∏äÈù¢ÔºåÊñ∞ÁöÑ bucket ÂàôÊåÇÂú® <code>*buckets</code> ÊåáÈíà‰∏äÈù¢„ÄÇ</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57978113-f8a79400-7a38-11e9-8e27-3f3ba4fa557f.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57978113-f8a79400-7a38-11e9-8e27-3f3ba4fa557f.png" loading="lazy" alt="map origin">
	</a>
	
	<figcaption>map origin</figcaption>
	
</figure><p></p>
<p>ËøôÊó∂ÔºåÊàë‰ª¨ÂØπÊ≠§ map ËøõË°åÈÅçÂéÜ„ÄÇÂÅáËÆæÁªèËøáÂàùÂßãÂåñÂêéÔºåstartBucket = 3Ôºåoffset = 2„ÄÇ‰∫éÊòØÔºåÈÅçÂéÜÁöÑËµ∑ÁÇπÂ∞ÜÊòØ 3 Âè∑ bucket ÁöÑ 2 Âè∑ cellÔºå‰∏ãÈù¢ËøôÂº†ÂõæÂ∞±ÊòØÂºÄÂßãÈÅçÂéÜÊó∂ÁöÑÁä∂ÊÄÅÔºö</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57980268-a4fa7200-7a5b-11e9-9ad1-fb2b64fe3159.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57980268-a4fa7200-7a5b-11e9-9ad1-fb2b64fe3159.png" loading="lazy" alt="map init">
	</a>
	
	<figcaption>map init</figcaption>
	
</figure><p></p>
<p>Ê†áÁ∫¢ÁöÑË°®Á§∫Ëµ∑Âßã‰ΩçÁΩÆÔºåbucket ÈÅçÂéÜÈ°∫Â∫è‰∏∫Ôºö3 -&gt; 0 -&gt; 1 -&gt; 2„ÄÇ</p>
<p>Âõ†‰∏∫ 3 Âè∑ bucket ÂØπÂ∫îËÄÅÁöÑ 1 Âè∑ bucketÔºåÂõ†Ê≠§ÂÖàÊ£ÄÊü•ËÄÅ 1 Âè∑ bucket ÊòØÂê¶Â∑≤ÁªèË¢´Êê¨ËøÅËøá„ÄÇÂà§Êñ≠ÊñπÊ≥ïÂ∞±ÊòØÔºö</p>
<pre><code class="language-go">    func evacuated(b *bmap) bool {
    	h := b.tophash[0]
    	return h &gt; empty &amp;&amp; h &lt; minTopHash
    }
</code></pre>
<p>Â¶ÇÊûú b.tophash[0] ÁöÑÂÄºÂú®Ê†áÂøóÂÄºËåÉÂõ¥ÂÜÖÔºåÂç≥Âú® (0,4) Âå∫Èó¥ÈáåÔºåËØ¥ÊòéÂ∑≤ÁªèË¢´Êê¨ËøÅËøá‰∫Ü„ÄÇ</p>
<pre><code class="language-go">    empty = 0
    evacuatedEmpty = 1
    evacuatedX = 2
    evacuatedY = 3
    minTopHash = 4
</code></pre>
<p>Âú®Êú¨‰æã‰∏≠ÔºåËÄÅ 1 Âè∑ bucket Â∑≤ÁªèË¢´Êê¨ËøÅËøá‰∫Ü„ÄÇÊâÄ‰ª•ÂÆÉÁöÑ tophash[0] ÂÄºÂú® (0,4) ËåÉÂõ¥ÂÜÖÔºåÂõ†Ê≠§Âè™Áî®ÈÅçÂéÜÊñ∞ÁöÑ 3 Âè∑ bucket„ÄÇ</p>
<p>‰æùÊ¨°ÈÅçÂéÜ 3 Âè∑ bucket ÁöÑ cellÔºåËøôÊó∂ÂÄô‰ºöÊâæÂà∞Á¨¨‰∏Ä‰∏™ÈùûÁ©∫ÁöÑ keyÔºöÂÖÉÁ¥† e„ÄÇÂà∞ËøôÈáåÔºåmapiternext ÂáΩÊï∞ËøîÂõûÔºåËøôÊó∂Êàë‰ª¨ÁöÑÈÅçÂéÜÁªìÊûú‰ªÖÊúâ‰∏Ä‰∏™ÂÖÉÁ¥†Ôºö</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57980302-56010c80-7a5c-11e9-8263-c11ddcec2ecc.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57980302-56010c80-7a5c-11e9-8263-c11ddcec2ecc.png" loading="lazy" alt="iter res">
	</a>
	
	<figcaption>iter res</figcaption>
	
</figure><p></p>
<p>Áî±‰∫éËøîÂõûÁöÑ key ‰∏ç‰∏∫Á©∫ÔºåÊâÄ‰ª•‰ºöÁªßÁª≠Ë∞ÉÁî® mapiternext ÂáΩÊï∞„ÄÇ</p>
<p>ÁªßÁª≠‰ªé‰∏äÊ¨°ÈÅçÂéÜÂà∞ÁöÑÂú∞ÊñπÂæÄÂêéÈÅçÂéÜÔºå‰ªéÊñ∞ 3 Âè∑ overflow bucket ‰∏≠ÊâæÂà∞‰∫ÜÂÖÉÁ¥† f Âíå ÂÖÉÁ¥† g„ÄÇ</p>
<p>ÈÅçÂéÜÁªìÊûúÈõÜ‰πüÂõ†Ê≠§Â£ÆÂ§ßÔºö</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57980349-2d2d4700-7a5d-11e9-819a-a59964f70a7c.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57980349-2d2d4700-7a5d-11e9-819a-a59964f70a7c.png" loading="lazy" alt="iter res">
	</a>
	
	<figcaption>iter res</figcaption>
	
</figure><p></p>
<p>Êñ∞ 3 Âè∑ bucket ÈÅçÂéÜÂÆå‰πãÂêéÔºåÂõûÂà∞‰∫ÜÊñ∞ 0 Âè∑ bucket„ÄÇ0 Âè∑ bucket ÂØπÂ∫îËÄÅÁöÑ 0 Âè∑ bucketÔºåÁªèÊ£ÄÊü•ÔºåËÄÅ 0 Âè∑ bucket Âπ∂Êú™Êê¨ËøÅÔºåÂõ†Ê≠§ÂØπÊñ∞ 0 Âè∑ bucket ÁöÑÈÅçÂéÜÂ∞±Êîπ‰∏∫ÈÅçÂéÜËÄÅ 0 Âè∑ bucket„ÄÇÈÇ£ÊòØ‰∏çÊòØÊääËÄÅ 0 Âè∑ bucket ‰∏≠ÁöÑÊâÄÊúâ key ÈÉΩÂèñÂá∫Êù•Âë¢Ôºü</p>
<p>Âπ∂Ê≤°ÊúâËøô‰πàÁÆÄÂçïÔºåÂõûÂøÜ‰∏Ä‰∏ãÔºåËÄÅ 0 Âè∑ bucket Âú®Êê¨ËøÅÂêéÂ∞ÜË£ÇÂèòÊàê 2 ‰∏™ bucketÔºöÊñ∞ 0 Âè∑„ÄÅÊñ∞ 2 Âè∑„ÄÇËÄåÊàë‰ª¨Ê≠§Êó∂Ê≠£Âú®ÈÅçÂéÜÁöÑÂè™ÊòØÊñ∞ 0 Âè∑ bucketÔºàÊ≥®ÊÑèÔºåÈÅçÂéÜÈÉΩÊòØÈÅçÂéÜÁöÑ <code>*bucket</code> ÊåáÈíàÔºå‰πüÂ∞±ÊòØÊâÄË∞ìÁöÑÊñ∞ bucketsÔºâ„ÄÇÊâÄ‰ª•ÔºåÊàë‰ª¨Âè™‰ºöÂèñÂá∫ËÄÅ 0 Âè∑ bucket ‰∏≠ÈÇ£‰∫õÂú®Ë£ÇÂèò‰πãÂêéÔºåÂàÜÈÖçÂà∞Êñ∞ 0 Âè∑ bucket ‰∏≠ÁöÑÈÇ£‰∫õ key„ÄÇ</p>
<p>Âõ†Ê≠§Ôºå<code>lowbits == 00</code> ÁöÑÂ∞ÜËøõÂÖ•ÈÅçÂéÜÁªìÊûúÈõÜÔºö</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57980449-6fa35380-7a5e-11e9-9dbf-86332ea0e215.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57980449-6fa35380-7a5e-11e9-9dbf-86332ea0e215.png" loading="lazy" alt="iter res">
	</a>
	
	<figcaption>iter res</figcaption>
	
</figure><p></p>
<p>Âíå‰πãÂâçÁöÑÊµÅÁ®ã‰∏ÄÊ†∑ÔºåÁªßÁª≠ÈÅçÂéÜÊñ∞ 1 Âè∑ bucketÔºåÂèëÁé∞ËÄÅ 1 Âè∑ bucket Â∑≤ÁªèÊê¨ËøÅÔºåÂè™Áî®ÈÅçÂéÜÊñ∞ 1 Âè∑ bucket ‰∏≠Áé∞ÊúâÁöÑÂÖÉÁ¥†Â∞±ÂèØ‰ª•‰∫Ü„ÄÇÁªìÊûúÈõÜÂèòÊàêÔºö</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57980487-e8a2ab00-7a5e-11e9-8e47-050437a099fc.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57980487-e8a2ab00-7a5e-11e9-8e47-050437a099fc.png" loading="lazy" alt="iter res">
	</a>
	
	<figcaption>iter res</figcaption>
	
</figure><p></p>
<p>ÁªßÁª≠ÈÅçÂéÜÊñ∞ 2 Âè∑ bucketÔºåÂÆÉÊù•Ëá™ËÄÅ 0 Âè∑ bucketÔºåÂõ†Ê≠§ÈúÄË¶ÅÂú®ËÄÅ 0 Âè∑ bucket ‰∏≠ÈÇ£‰∫õ‰ºöË£ÇÂèòÂà∞Êñ∞ 2 Âè∑ bucket ‰∏≠ÁöÑ keyÔºå‰πüÂ∞±ÊòØ <code>lowbit == 10</code> ÁöÑÈÇ£‰∫õ key„ÄÇ</p>
<p>ËøôÊ†∑ÔºåÈÅçÂéÜÁªìÊûúÈõÜÂèòÊàêÔºö</p>
<p></p><figure>
	<a href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57980574-ae85d900-7a5f-11e9-8050-ae314a90ee05.png">
		<img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/57980574-ae85d900-7a5f-11e9-8050-ae314a90ee05.png" loading="lazy" alt="iter res">
	</a>
	
	<figcaption>iter res</figcaption>
	
</figure><p></p>
<p>ÊúÄÂêéÔºåÁªßÁª≠ÈÅçÂéÜÂà∞Êñ∞ 3 Âè∑ bucket Êó∂ÔºåÂèëÁé∞ÊâÄÊúâÁöÑ bucket ÈÉΩÂ∑≤ÁªèÈÅçÂéÜÂÆåÊØïÔºåÊï¥‰∏™Ëø≠‰ª£ËøáÁ®ãÊâßË°åÂÆåÊØï„ÄÇ</p>
<p>È°∫‰æøËØ¥‰∏Ä‰∏ãÔºåÂ¶ÇÊûúÁ¢∞Âà∞ key ÊòØ <code>math.NaN()</code> ËøôÁßçÁöÑÔºåÂ§ÑÁêÜÊñπÂºèÁ±ª‰ºº„ÄÇÊ†∏ÂøÉËøòÊòØË¶ÅÁúãÂÆÉË¢´ÂàÜË£ÇÂêéÂÖ∑‰ΩìËêΩÂÖ•Âì™‰∏™ bucket„ÄÇÂè™‰∏çËøáÂè™Áî®ÁúãÂÆÉ top hash ÁöÑÊúÄ‰Ωé‰Ωç„ÄÇÂ¶ÇÊûú top hash ÁöÑÊúÄ‰Ωé‰ΩçÊòØ 0 ÔºåÂàÜÈÖçÂà∞ X partÔºõÂ¶ÇÊûúÊòØ 1 ÔºåÂàôÂàÜÈÖçÂà∞ Y part„ÄÇÊçÆÊ≠§ÂÜ≥ÂÆöÊòØÂê¶ÂèñÂá∫ keyÔºåÊîæÂà∞ÈÅçÂéÜÁªìÊûúÈõÜÈáå„ÄÇ</p>
<p>map ÈÅçÂéÜÁöÑÊ†∏ÂøÉÂú®‰∫éÁêÜËß£ 2 ÂÄçÊâ©ÂÆπÊó∂ÔºåËÄÅ bucket ‰ºöÂàÜË£ÇÂà∞ 2 ‰∏™Êñ∞ bucket ‰∏≠Âéª„ÄÇËÄåÈÅçÂéÜÊìç‰ΩúÔºå‰ºöÊåâÁÖßÊñ∞ bucket ÁöÑÂ∫èÂè∑È°∫Â∫èËøõË°åÔºåÁ¢∞Âà∞ËÄÅ bucket Êú™Êê¨ËøÅÁöÑÊÉÖÂÜµÊó∂ÔºåË¶ÅÂú®ËÄÅ bucket ‰∏≠ÊâæÂà∞Â∞ÜÊù•Ë¶ÅÊê¨ËøÅÂà∞Êñ∞ bucket Êù•ÁöÑ key„ÄÇ</p>
<h2 id="map-ÁöÑËµãÂÄº">map ÁöÑËµãÂÄº</h2>
<p>ÈÄöËøáÊ±áÁºñËØ≠Ë®ÄÂèØ‰ª•ÁúãÂà∞ÔºåÂêë map ‰∏≠ÊèíÂÖ•ÊàñËÄÖ‰øÆÊîπ keyÔºåÊúÄÁªàË∞ÉÁî®ÁöÑÊòØ <code>mapassign</code> ÂáΩÊï∞„ÄÇ</p>
<p>ÂÆûÈôÖ‰∏äÊèíÂÖ•Êàñ‰øÆÊîπ key ÁöÑËØ≠Ê≥ïÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂè™‰∏çËøáÂâçËÄÖÊìç‰ΩúÁöÑ key Âú® map ‰∏≠‰∏çÂ≠òÂú®ÔºåËÄåÂêéËÄÖÊìç‰ΩúÁöÑ key Â≠òÂú® map ‰∏≠„ÄÇ</p>
<p>mapassign Êúâ‰∏Ä‰∏™Á≥ªÂàóÁöÑÂáΩÊï∞ÔºåÊ†πÊçÆ key Á±ªÂûãÁöÑ‰∏çÂêåÔºåÁºñËØëÂô®‰ºöÂ∞ÜÂÖ∂‰ºòÂåñ‰∏∫Áõ∏Â∫îÁöÑ ‚ÄúÂø´ÈÄüÂáΩÊï∞‚Äù„ÄÇ</p>
<p>key Á±ªÂûã</p>
<p>ÊèíÂÖ•</p>
<pre><code>uint32

mapassign_fast32(t *maptype, h *hmap, key uint32) unsafe.Pointer

uint64

mapassign_fast64(t *maptype, h *hmap, key uint64) unsafe.Pointer

string

mapassign_faststr(t *maptype, h *hmap, ky string) unsafe.Pointer
</code></pre>
<p>Êàë‰ª¨Âè™Áî®Á†îÁ©∂ÊúÄ‰∏ÄËà¨ÁöÑËµãÂÄºÂáΩÊï∞ <code>mapassign</code>„ÄÇ</p>
<p>Êï¥‰ΩìÊù•ÁúãÔºåÊµÅÁ®ãÈùûÂ∏∏ÂæóÁÆÄÂçïÔºöÂØπ key ËÆ°ÁÆó hash ÂÄºÔºåÊ†πÊçÆ hash ÂÄºÊåâÁÖß‰πãÂâçÁöÑÊµÅÁ®ãÔºåÊâæÂà∞Ë¶ÅËµãÂÄºÁöÑ‰ΩçÁΩÆÔºàÂèØËÉΩÊòØÊèíÂÖ•Êñ∞ keyÔºå‰πüÂèØËÉΩÊòØÊõ¥Êñ∞ËÄÅ keyÔºâÔºåÂØπÁõ∏Â∫î‰ΩçÁΩÆËøõË°åËµãÂÄº„ÄÇ</p>
<p>Ê∫êÁ†ÅÂ§ß‰ΩìÂíå‰πãÂâçËÆ≤ÁöÑÁ±ª‰ººÔºåÊ†∏ÂøÉËøòÊòØ‰∏Ä‰∏™ÂèåÂ±ÇÂæ™ÁéØÔºåÂ§ñÂ±ÇÈÅçÂéÜ bucket ÂíåÂÆÉÁöÑ overflow bucketÔºåÂÜÖÂ±ÇÈÅçÂéÜÊï¥‰∏™ bucket ÁöÑÂêÑ‰∏™ cell„ÄÇÈôê‰∫éÁØáÂπÖÔºåËøôÈÉ®ÂàÜ‰ª£Á†ÅÁöÑÊ≥®ÈáäÊàë‰πü‰∏çÂ±ïÁ§∫‰∫ÜÔºåÊúâÂÖ¥Ë∂£ÁöÑÂèØ‰ª•ÂéªÁúãÔºå‰øùËØÅÁêÜËß£‰∫ÜËøôÁØáÊñáÁ´†ÂÜÖÂÆπÂêéÔºåËÉΩÂ§üÁúãÊáÇ„ÄÇ</p>
<p>ÊàëËøôÈáå‰ºöÈíàÂØπËøô‰∏™ËøáÁ®ãÊèêÂá†ÁÇπÈáçË¶ÅÁöÑ„ÄÇ</p>
<p>ÂáΩÊï∞È¶ñÂÖà‰ºöÊ£ÄÊü• map ÁöÑÊ†áÂøó‰Ωç flags„ÄÇÂ¶ÇÊûú flags ÁöÑÂÜôÊ†áÂøó‰ΩçÊ≠§Êó∂Ë¢´ÁΩÆ 1 ‰∫ÜÔºåËØ¥ÊòéÊúâÂÖ∂‰ªñÂçèÁ®ãÂú®ÊâßË°å ‚ÄúÂÜô‚Äù Êìç‰ΩúÔºåËøõËÄåÂØºËá¥Á®ãÂ∫è panic„ÄÇËøô‰πüËØ¥Êòé‰∫Ü map ÂØπÂçèÁ®ãÊòØ‰∏çÂÆâÂÖ®ÁöÑ„ÄÇ</p>
<p>ÈÄöËøáÂâçÊñáÊàë‰ª¨Áü•ÈÅìÊâ©ÂÆπÊòØÊ∏êËøõÂºèÁöÑÔºåÂ¶ÇÊûú map Â§ÑÂú®Êâ©ÂÆπÁöÑËøáÁ®ã‰∏≠ÔºåÈÇ£‰πàÂΩì key ÂÆö‰ΩçÂà∞‰∫ÜÊüê‰∏™ bucket ÂêéÔºåÈúÄË¶ÅÁ°Æ‰øùËøô‰∏™ bucket ÂØπÂ∫îÁöÑËÄÅ bucket ÂÆåÊàê‰∫ÜËøÅÁßªËøáÁ®ã„ÄÇÂç≥ËÄÅ bucket ÈáåÁöÑ key ÈÉΩË¶ÅËøÅÁßªÂà∞Êñ∞ÁöÑ bucket ‰∏≠Êù•ÔºàÂàÜË£ÇÂà∞ 2 ‰∏™Êñ∞ bucketÔºâÔºåÊâçËÉΩÂú®Êñ∞ÁöÑ bucket ‰∏≠ËøõË°åÊèíÂÖ•ÊàñËÄÖÊõ¥Êñ∞ÁöÑÊìç‰Ωú„ÄÇ</p>
<p>‰∏äÈù¢ËØ¥ÁöÑÊìç‰ΩúÊòØÂú®ÂáΩÊï∞Èù†ÂâçÁöÑ‰ΩçÁΩÆËøõË°åÁöÑÔºåÂè™ÊúâËøõË°åÂÆå‰∫ÜËøô‰∏™Êê¨ËøÅÊìç‰ΩúÂêéÔºåÊàë‰ª¨ÊâçËÉΩÊîæÂøÉÂú∞Âú®Êñ∞ bucket ÈáåÂÆö‰Ωç key Ë¶ÅÂÆâÁΩÆÁöÑÂú∞ÂùÄÔºåÂÜçËøõË°å‰πãÂêéÁöÑÊìç‰Ωú„ÄÇ</p>
<p>Áé∞Âú®Âà∞‰∫ÜÂÆö‰Ωç key Â∫îËØ•ÊîæÁΩÆÁöÑ‰ΩçÁΩÆ‰∫ÜÔºåÊâÄË∞ìÊâæÂáÜËá™Â∑±ÁöÑ‰ΩçÁΩÆÂæàÈáçË¶Å„ÄÇÂáÜÂ§á‰∏§‰∏™ÊåáÈíàÔºå‰∏Ä‰∏™Ôºà<code>inserti</code>ÔºâÊåáÂêë key ÁöÑ hash ÂÄºÂú® tophash Êï∞ÁªÑÊâÄÂ§ÑÁöÑ‰ΩçÁΩÆÔºåÂè¶‰∏Ä‰∏™ (<code>insertk</code>) ÊåáÂêë cell ÁöÑ‰ΩçÁΩÆÔºà‰πüÂ∞±ÊòØ key ÊúÄÁªàÊîæÁΩÆÁöÑÂú∞ÂùÄÔºâÔºåÂΩìÁÑ∂ÔºåÂØπÂ∫î value ÁöÑ‰ΩçÁΩÆÂ∞±ÂæàÂÆπÊòìÂÆö‰ΩçÂá∫Êù•‰∫Ü„ÄÇËøô‰∏âËÄÖÂÆûÈôÖ‰∏äÈÉΩÊòØÂÖ≥ËÅîÁöÑÔºåÂú® tophash Êï∞ÁªÑ‰∏≠ÁöÑÁ¥¢Âºï‰ΩçÁΩÆÂÜ≥ÂÆö‰∫Ü key Âú®Êï¥‰∏™ bucket ‰∏≠ÁöÑ‰ΩçÁΩÆÔºàÂÖ± 8 ‰∏™ keyÔºâÔºåËÄå value ÁöÑ‰ΩçÁΩÆÈúÄË¶Å ‚ÄúË∑®Ëøá‚Äù 8 ‰∏™ key ÁöÑÈïøÂ∫¶„ÄÇ</p>
<p>Âú®Âæ™ÁéØÁöÑËøáÁ®ã‰∏≠Ôºåinserti Âíå insertk ÂàÜÂà´ÊåáÂêëÁ¨¨‰∏Ä‰∏™ÊâæÂà∞ÁöÑÁ©∫Èó≤ÁöÑ cell„ÄÇÂ¶ÇÊûú‰πãÂêéÂú® map Ê≤°ÊúâÊâæÂà∞ key ÁöÑÂ≠òÂú®Ôºå‰πüÂ∞±ÊòØËØ¥ÂéüÊù• map ‰∏≠Ê≤°ÊúâÊ≠§ keyÔºåËøôÊÑèÂë≥ÁùÄÊèíÂÖ•Êñ∞ key„ÄÇÈÇ£ÊúÄÁªà key ÁöÑÂÆâÁΩÆÂú∞ÂùÄÂ∞±ÊòØÁ¨¨‰∏ÄÊ¨°ÂèëÁé∞ÁöÑ ‚ÄúÁ©∫‰Ωç‚ÄùÔºàtophash ÊòØ emptyÔºâ„ÄÇ</p>
<p>Â¶ÇÊûúËøô‰∏™ bucket ÁöÑ 8 ‰∏™ key ÈÉΩÂ∑≤ÁªèÊîæÁΩÆÊª°‰∫ÜÔºåÈÇ£Âú®Ë∑≥Âá∫Âæ™ÁéØÂêéÔºåÂèëÁé∞ inserti Âíå insertk ÈÉΩÊòØÁ©∫ÔºåËøôÊó∂ÂÄôÈúÄË¶ÅÂú® bucket ÂêéÈù¢ÊåÇ‰∏ä overflow bucket„ÄÇÂΩìÁÑ∂Ôºå‰πüÊúâÂèØËÉΩÊòØÂú® overflow bucket ÂêéÈù¢ÂÜçÊåÇ‰∏ä‰∏Ä‰∏™ overflow bucket„ÄÇËøôÂ∞±ËØ¥ÊòéÔºåÂ§™Â§ö key hash Âà∞‰∫ÜÊ≠§ bucket„ÄÇ</p>
<p>Âú®Ê≠£ÂºèÂÆâÁΩÆ key ‰πãÂâçÔºåËøòË¶ÅÊ£ÄÊü• map ÁöÑÁä∂ÊÄÅÔºåÁúãÂÆÉÊòØÂê¶ÈúÄË¶ÅËøõË°åÊâ©ÂÆπ„ÄÇÂ¶ÇÊûúÊª°Ë∂≥Êâ©ÂÆπÁöÑÊù°‰ª∂ÔºåÂ∞±‰∏ªÂä®Ëß¶Âèë‰∏ÄÊ¨°Êâ©ÂÆπÊìç‰Ωú„ÄÇ</p>
<p>Ëøô‰πãÂêéÔºåÊï¥‰∏™‰πãÂâçÁöÑÊü•ÊâæÂÆö‰Ωç key ÁöÑËøáÁ®ãÔºåËøòÂæóÂÜçÈáçÊñ∞Ëµ∞‰∏ÄÊ¨°„ÄÇÂõ†‰∏∫Êâ©ÂÆπ‰πãÂêéÔºåkey ÁöÑÂàÜÂ∏ÉÈÉΩÂèëÁîü‰∫ÜÂèòÂåñ„ÄÇ</p>
<p>ÊúÄÂêéÔºå‰ºöÊõ¥Êñ∞ map Áõ∏ÂÖ≥ÁöÑÂÄºÔºåÂ¶ÇÊûúÊòØÊèíÂÖ•Êñ∞ keyÔºåmap ÁöÑÂÖÉÁ¥†Êï∞ÈáèÂ≠óÊÆµ count ÂÄº‰ºöÂä† 1ÔºõÂú®ÂáΩÊï∞‰πãÂàùËÆæÁΩÆÁöÑ <code>hashWriting</code> ÂÜôÊ†áÂøóÂá∫‰ºöÊ∏ÖÈõ∂„ÄÇ</p>
<p>Âè¶Â§ñÔºåÊúâ‰∏Ä‰∏™ÈáçË¶ÅÁöÑÁÇπË¶ÅËØ¥‰∏Ä‰∏ã„ÄÇÂâçÈù¢ËØ¥ÁöÑÊâæÂà∞ key ÁöÑ‰ΩçÁΩÆÔºåËøõË°åËµãÂÄºÊìç‰ΩúÔºåÂÆûÈôÖ‰∏äÂπ∂‰∏çÂáÜÁ°Æ„ÄÇÊàë‰ª¨Áúã <code>mapassign</code> ÂáΩÊï∞ÁöÑÂéüÂûãÂ∞±Áü•ÈÅìÔºåÂáΩÊï∞Âπ∂Ê≤°Êúâ‰º†ÂÖ• value ÂÄºÔºåÊâÄ‰ª•ËµãÂÄºÊìç‰ΩúÊòØ‰ªÄ‰πàÊó∂ÂÄôÊâßË°åÁöÑÂë¢Ôºü</p>
<pre><code class="language-go">    func mapassign(t *maptype, h *hmap, key unsafe.Pointer) unsafe.Pointer
    

Á≠îÊ°àËøòÂæó‰ªéÊ±áÁºñËØ≠Ë®Ä‰∏≠ÂØªÊâæ„ÄÇÊàëÁõ¥Êé•Êè≠ÊôìÁ≠îÊ°àÔºåÊúâÂÖ¥Ë∂£ÂèØ‰ª•ÁßÅ‰∏ãÂéªÁ†îÁ©∂‰∏Ä‰∏ã„ÄÇ`mapassign` ÂáΩÊï∞ËøîÂõûÁöÑÊåáÈíàÂ∞±ÊòØÊåáÂêëÁöÑ key ÊâÄÂØπÂ∫îÁöÑ value ÂÄº‰ΩçÁΩÆÔºåÊúâ‰∫ÜÂú∞ÂùÄÔºåÂ∞±ÂæàÂ•ΩÊìç‰ΩúËµãÂÄº‰∫Ü„ÄÇ

map ÁöÑÂà†Èô§
-------

ÂÜôÊìç‰ΩúÂ∫ïÂ±ÇÁöÑÊâßË°åÂáΩÊï∞ÊòØ `mapdelete`Ôºö
```go
    func mapdelete(t *maptype, h *hmap, key unsafe.Pointer) 
</code></pre>
<p>Ê†πÊçÆ key Á±ªÂûãÁöÑ‰∏çÂêåÔºåÂà†Èô§Êìç‰Ωú‰ºöË¢´‰ºòÂåñÊàêÊõ¥ÂÖ∑‰ΩìÁöÑÂáΩÊï∞Ôºö</p>
<p>key Á±ªÂûã</p>
<p>Âà†Èô§</p>
<pre><code>uint32

mapdelete_fast32(t *maptype, h *hmap, key uint32)

uint64

mapdelete_fast64(t *maptype, h *hmap, key uint64)

string

mapdelete_faststr(t *maptype, h *hmap, ky string)
</code></pre>
<p>ÂΩìÁÑ∂ÔºåÊàë‰ª¨Âè™ÂÖ≥ÂøÉ <code>mapdelete</code> ÂáΩÊï∞„ÄÇÂÆÉÈ¶ñÂÖà‰ºöÊ£ÄÊü• h.flags Ê†áÂøóÔºåÂ¶ÇÊûúÂèëÁé∞ÂÜôÊ†á‰ΩçÊòØ 1ÔºåÁõ¥Êé• panicÔºåÂõ†‰∏∫ËøôË°®ÊòéÊúâÂÖ∂‰ªñÂçèÁ®ãÂêåÊó∂Âú®ËøõË°åÂÜôÊìç‰Ωú„ÄÇ</p>
<p>ËÆ°ÁÆó key ÁöÑÂìàÂ∏åÔºåÊâæÂà∞ËêΩÂÖ•ÁöÑ bucket„ÄÇÊ£ÄÊü•Ê≠§ map Â¶ÇÊûúÊ≠£Âú®Êâ©ÂÆπÁöÑËøáÁ®ã‰∏≠ÔºåÁõ¥Êé•Ëß¶Âèë‰∏ÄÊ¨°Êê¨ËøÅÊìç‰Ωú„ÄÇ</p>
<p>Âà†Èô§Êìç‰ΩúÂêåÊ†∑ÊòØ‰∏§Â±ÇÂæ™ÁéØÔºåÊ†∏ÂøÉËøòÊòØÊâæÂà∞ key ÁöÑÂÖ∑‰Ωì‰ΩçÁΩÆ„ÄÇÂØªÊâæËøáÁ®ãÈÉΩÊòØÁ±ª‰ººÁöÑÔºåÂú® bucket ‰∏≠Êå®‰∏™ cell ÂØªÊâæ„ÄÇ</p>
<p>ÊâæÂà∞ÂØπÂ∫î‰ΩçÁΩÆÂêéÔºåÂØπ key ÊàñËÄÖ value ËøõË°å ‚ÄúÊ∏ÖÈõ∂‚Äù Êìç‰ΩúÔºö</p>
<pre><code class="language-go">    // ÂØπ key Ê∏ÖÈõ∂
    if t.indirectkey {
    	*(*unsafe.Pointer)(k) = nil
    } else {
    	typedmemclr(t.key, k)
    }
    
    // ÂØπ value Ê∏ÖÈõ∂
    if t.indirectvalue {
    	*(*unsafe.Pointer)(v) = nil
    } else {
    	typedmemclr(t.elem, v)
    }
</code></pre>
<p>ÊúÄÂêéÔºåÂ∞Ü count ÂÄºÂáè 1ÔºåÂ∞ÜÂØπÂ∫î‰ΩçÁΩÆÁöÑ tophash ÂÄºÁΩÆÊàê <code>Empty</code>„ÄÇ</p>
<p>ËøôÂùóÊ∫êÁ†ÅÂêåÊ†∑ÊØîËæÉÁÆÄÂçïÔºåÊÑüÂÖ¥Ëµ∑Áõ¥Êé•ÂéªÁúã‰ª£Á†Å„ÄÇ</p>
<h2 id="map-ËøõÈò∂">map ËøõÈò∂</h2>
<h2 id="ÂèØ‰ª•ËæπÈÅçÂéÜËæπÂà†Èô§Âêó">ÂèØ‰ª•ËæπÈÅçÂéÜËæπÂà†Èô§Âêó</h2>
<p>map Âπ∂‰∏çÊòØ‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇÂêåÊó∂ËØªÂÜô‰∏Ä‰∏™ map ÊòØÊú™ÂÆö‰πâÁöÑË°å‰∏∫ÔºåÂ¶ÇÊûúË¢´Ê£ÄÊµãÂà∞Ôºå‰ºöÁõ¥Êé• panic„ÄÇ</p>
<p>‰∏ÄËà¨ËÄåË®ÄÔºåËøôÂèØ‰ª•ÈÄöËøáËØªÂÜôÈîÅÊù•Ëß£ÂÜ≥Ôºö<code>sync.RWMutex</code>„ÄÇ</p>
<p>ËØª‰πãÂâçË∞ÉÁî® <code>RLock()</code> ÂáΩÊï∞ÔºåËØªÂÆå‰πãÂêéË∞ÉÁî® <code>RUnlock()</code> ÂáΩÊï∞Ëß£ÈîÅÔºõÂÜô‰πãÂâçË∞ÉÁî® <code>Lock()</code> ÂáΩÊï∞ÔºåÂÜôÂÆå‰πãÂêéÔºåË∞ÉÁî® <code>Unlock()</code> Ëß£ÈîÅ„ÄÇ</p>
<p>Âè¶Â§ñÔºå<code>sync.Map</code> ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ mapÔºå‰πüÂèØ‰ª•‰ΩøÁî®„ÄÇÂÆÉÁöÑÂÆûÁé∞ÂéüÁêÜÔºåËøôÊ¨°ÂÖà‰∏çËØ¥‰∫Ü„ÄÇ</p>
<h2 id="key-ÂèØ‰ª•ÊòØ-float-ÂûãÂêó">key ÂèØ‰ª•ÊòØ float ÂûãÂêóÔºü</h2>
<p>‰ªéËØ≠Ê≥ï‰∏äÁúãÔºåÊòØÂèØ‰ª•ÁöÑ„ÄÇGo ËØ≠Ë®Ä‰∏≠Âè™Ë¶ÅÊòØÂèØÊØîËæÉÁöÑÁ±ªÂûãÈÉΩÂèØ‰ª•‰Ωú‰∏∫ key„ÄÇÈô§ÂºÄ sliceÔºåmapÔºåfunctions ËøôÂá†ÁßçÁ±ªÂûãÔºåÂÖ∂‰ªñÁ±ªÂûãÈÉΩÊòØ OK ÁöÑ„ÄÇÂÖ∑‰ΩìÂåÖÊã¨ÔºöÂ∏ÉÂ∞îÂÄº„ÄÅÊï∞Â≠ó„ÄÅÂ≠óÁ¨¶‰∏≤„ÄÅÊåáÈíà„ÄÅÈÄöÈÅì„ÄÅÊé•Âè£Á±ªÂûã„ÄÅÁªìÊûÑ‰Ωì„ÄÅÂè™ÂåÖÂê´‰∏äËø∞Á±ªÂûãÁöÑÊï∞ÁªÑ„ÄÇËøô‰∫õÁ±ªÂûãÁöÑÂÖ±ÂêåÁâπÂæÅÊòØÊîØÊåÅ <code>==</code> Âíå <code>!=</code> Êìç‰ΩúÁ¨¶Ôºå<code>k1 == k2</code> Êó∂ÔºåÂèØËÆ§‰∏∫ k1 Âíå k2 ÊòØÂêå‰∏Ä‰∏™ key„ÄÇÂ¶ÇÊûúÊòØÁªìÊûÑ‰ΩìÔºåÂàôÈúÄË¶ÅÂÆÉ‰ª¨ÁöÑÂ≠óÊÆµÂÄºÈÉΩÁõ∏Á≠âÔºåÊâçË¢´ËÆ§‰∏∫ÊòØÁõ∏ÂêåÁöÑ key„ÄÇ</p>
<p>È°∫‰æøËØ¥‰∏ÄÂè•Ôºå‰ªª‰ΩïÁ±ªÂûãÈÉΩÂèØ‰ª•‰Ωú‰∏∫ valueÔºåÂåÖÊã¨ map Á±ªÂûã„ÄÇ</p>
<p>Êù•Áúã‰∏™‰æãÂ≠êÔºö</p>
<pre><code class="language-go">    func main() {
    	m := make(map[float64]int)
    	m[1.4] = 1
    	m[2.4] = 2
    	m[math.NaN()] = 3
    	m[math.NaN()] = 3
    
    	for k, v := range m {
    		fmt.Printf("[%v, %d] ", k, v)
    	}
    
    	fmt.Printf("\nk: %v, v: %d\n", math.NaN(), m[math.NaN()])
    	fmt.Printf("k: %v, v: %d\n", 2.400000000001, m[2.400000000001])
    	fmt.Printf("k: %v, v: %d\n", 2.4000000000000000000000001, m[2.4000000000000000000000001])
    
    	fmt.Println(math.NaN() == math.NaN())
    }
</code></pre>
<p>Á®ãÂ∫èÁöÑËæìÂá∫Ôºö</p>
<pre><code class="language-go">    [2.4, 2] [NaN, 3] [NaN, 3] [1.4, 1] 
    k: NaN, v: 0
    k: 2.400000000001, v: 0
    k: 2.4, v: 2
    false
</code></pre>
<p>‰æãÂ≠ê‰∏≠ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ key Á±ªÂûãÊòØ float ÂûãÁöÑ mapÔºåÂπ∂ÂêëÂÖ∂‰∏≠ÊèíÂÖ•‰∫Ü 4 ‰∏™ keyÔºö1.4Ôºå 2.4Ôºå NANÔºåNAN„ÄÇ</p>
<p>ÊâìÂç∞ÁöÑÊó∂ÂÄô‰πüÊâìÂç∞Âá∫‰∫Ü 4 ‰∏™ keyÔºåÂ¶ÇÊûú‰Ω†Áü•ÈÅì NAN != NANÔºå‰πüÂ∞±‰∏çÂ•áÊÄ™‰∫Ü„ÄÇÂõ†‰∏∫‰ªñ‰ª¨ÊØîËæÉÁöÑÁªìÊûú‰∏çÁõ∏Á≠âÔºåËá™ÁÑ∂ÔºåÂú® map ÁúãÊù•Â∞±ÊòØ‰∏§‰∏™‰∏çÂêåÁöÑ key ‰∫Ü„ÄÇ</p>
<p>Êé•ÁùÄÔºåÊàë‰ª¨Êü•ËØ¢‰∫ÜÂá†‰∏™ keyÔºåÂèëÁé∞ NAN ‰∏çÂ≠òÂú®Ôºå2.400000000001 ‰πü‰∏çÂ≠òÂú®ÔºåËÄå 2.4000000000000000000000001 Âç¥Â≠òÂú®„ÄÇ</p>
<p>ÊúâÁÇπËØ°ÂºÇÔºå‰∏çÊòØÂêóÔºü</p>
<p>Êé•ÁùÄÔºåÊàëÈÄöËøáÊ±áÁºñÂèëÁé∞‰∫ÜÂ¶Ç‰∏ãÁöÑ‰∫ãÂÆûÔºö</p>
<p>ÂΩìÁî® float64 ‰Ωú‰∏∫ key ÁöÑÊó∂ÂÄôÔºåÂÖàË¶ÅÂ∞ÜÂÖ∂ËΩ¨Êàê unit64 Á±ªÂûãÔºåÂÜçÊèíÂÖ• key ‰∏≠„ÄÇ</p>
<p>ÂÖ∑‰ΩìÊòØÈÄöËøá <code>Float64frombits</code> ÂáΩÊï∞ÂÆåÊàêÔºö</p>
<pre><code class="language-go">    // Float64frombits returns the floating point number corresponding
    // the IEEE 754 binary representation b.
    func Float64frombits(b uint64) float64 { return *(*float64)(unsafe.Pointer(&amp;b)) }
</code></pre>
<p>‰πüÂ∞±ÊòØÂ∞ÜÊµÆÁÇπÊï∞Ë°®Á§∫Êàê IEEE 754 ËßÑÂÆöÁöÑÊ†ºÂºè„ÄÇÂ¶ÇËµãÂÄºËØ≠Âè•Ôºö</p>
<pre><code class="language-go">    0x00bd 00189 (test18.go:9)      LEAQ    "".statictmp_0(SB), DX
    0x00c4 00196 (test18.go:9)      MOVQ    DX, 16(SP)
    0x00c9 00201 (test18.go:9)      PCDATA  $0, $2
    0x00c9 00201 (test18.go:9)      CALL    runtime.mapassign(SB)
</code></pre>
<p><code>"".statictmp_0(SB)</code> ÂèòÈáèÊòØËøôÊ†∑ÁöÑÔºö</p>
<pre><code class="language-go">    "".statictmp_0 SRODATA size=8
            0x0000 33 33 33 33 33 33 03 40
    "".statictmp_1 SRODATA size=8
            0x0000 ff 3b 33 33 33 33 03 40
    "".statictmp_2 SRODATA size=8
            0x0000 33 33 33 33 33 33 03 40
</code></pre>
<p>Êàë‰ª¨ÂÜçÊù•ËæìÂá∫ÁÇπ‰∏úË•øÔºö</p>
<pre><code class="language-go">    package main
    
    import (
    	"fmt"
    	"math"
    )
    
    func main() {
    	m := make(map[float64]int)
    	m[2.4] = 2
    
        fmt.Println(math.Float64bits(2.4))
    	fmt.Println(math.Float64bits(2.400000000001))
    	fmt.Println(math.Float64bits(2.4000000000000000000000001))
    }

    4612586738352864255
    4612586738352862003
    4612586738352862003
</code></pre>
<p>ËΩ¨ÊàêÂçÅÂÖ≠ËøõÂà∂‰∏∫Ôºö</p>
<pre><code class="language-go">    0x4003333333333333
    0x4003333333333BFF
    0x4003333333333333
</code></pre>
<p>ÂíåÂâçÈù¢ÁöÑ <code>"".statictmp_0</code> ÊØîËæÉ‰∏Ä‰∏ãÔºåÂæàÊ∏ÖÊô∞‰∫ÜÂêß„ÄÇ<code>2.4</code> Âíå <code>2.4000000000000000000000001</code> ÁªèËøá <code>math.Float64bits()</code> ÂáΩÊï∞ËΩ¨Êç¢ÂêéÁöÑÁªìÊûúÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇËá™ÁÑ∂Ôºå‰∫åËÄÖÂú® map ÁúãÊù•ÔºåÂ∞±ÊòØÂêå‰∏Ä‰∏™ key ‰∫Ü„ÄÇ</p>
<p>ÂÜçÊù•Áúã‰∏Ä‰∏ã NANÔºànot a numberÔºâÔºö</p>
<pre><code class="language-go">    // NaN returns an IEEE 754 ``not-a-number'' value.
    func NaN() float64 { return Float64frombits(uvnan) }
</code></pre>
<p>uvan ÁöÑÂÆö‰πâ‰∏∫Ôºö</p>
<pre><code class="language-go">    uvnan    = 0x7FF8000000000001
</code></pre>
<p>NAN() Áõ¥Êé•Ë∞ÉÁî® <code>Float64frombits</code>Ôºå‰º†ÂÖ•ÂÜôÊ≠ªÁöÑ const ÂûãÂèòÈáè <code>0x7FF8000000000001</code>ÔºåÂæóÂà∞ NAN ÂûãÂÄº„ÄÇÊó¢ÁÑ∂ÔºåNAN ÊòØ‰ªé‰∏Ä‰∏™Â∏∏ÈáèËß£ÊûêÂæóÊù•ÁöÑÔºå‰∏∫‰ªÄ‰πàÊèíÂÖ• map Êó∂Ôºå‰ºöË¢´ËÆ§‰∏∫ÊòØ‰∏çÂêåÁöÑ keyÔºü</p>
<p>ËøôÊòØÁî±Á±ªÂûãÁöÑÂìàÂ∏åÂáΩÊï∞ÂÜ≥ÂÆöÁöÑÔºå‰æãÂ¶ÇÔºåÂØπ‰∫é 64 ‰ΩçÁöÑÊµÆÁÇπÊï∞ÔºåÂÆÉÁöÑÂìàÂ∏åÂáΩÊï∞Â¶Ç‰∏ãÔºö</p>
<pre><code class="language-go">    func f64hash(p unsafe.Pointer, h uintptr) uintptr {
    	f := *(*float64)(p)
    	switch {
    	case f == 0:
    		return c1 * (c0 ^ h) // +0, -0
    	case f != f:
    		return c1 * (c0 ^ h ^ uintptr(fastrand())) // any kind of NaN
    	default:
    		return memhash(p, h, 8)
    	}
    }
</code></pre>
<p>Á¨¨‰∫å‰∏™ caseÔºå<code>f != f</code> Â∞±ÊòØÈíàÂØπ <code>NAN</code>ÔºåËøôÈáå‰ºöÂÜçÂä†‰∏Ä‰∏™ÈöèÊú∫Êï∞„ÄÇ</p>
<p>ËøôÊ†∑ÔºåÊâÄÊúâÁöÑË∞úÈ¢òÈÉΩËß£ÂºÄ‰∫Ü„ÄÇ</p>
<p>Áî±‰∫é NAN ÁöÑÁâπÊÄßÔºö</p>
<pre><code class="language-go">    NAN != NAN
    hash(NAN) != hash(NAN)
</code></pre>
<p>Âõ†Ê≠§Âêë map ‰∏≠Êü•ÊâæÁöÑ key ‰∏∫ NAN Êó∂Ôºå‰ªÄ‰πà‰πüÊü•‰∏çÂà∞ÔºõÂ¶ÇÊûúÂêëÂÖ∂‰∏≠Â¢ûÂä†‰∫Ü 4 Ê¨° NANÔºåÈÅçÂéÜ‰ºöÂæóÂà∞ 4 ‰∏™ NAN„ÄÇ</p>
<p>ÊúÄÂêéËØ¥ÁªìËÆ∫Ôºöfloat ÂûãÂèØ‰ª•‰Ωú‰∏∫ keyÔºå‰ΩÜÊòØÁî±‰∫éÁ≤æÂ∫¶ÁöÑÈóÆÈ¢òÔºå‰ºöÂØºËá¥‰∏Ä‰∫õËØ°ÂºÇÁöÑÈóÆÈ¢òÔºåÊÖéÁî®‰πã„ÄÇ</p>
<h2 id="ÊÄªÁªì">ÊÄªÁªì</h2>
<p>Âú®ÂÜô‰ΩúÊú¨ÊñáÊó∂ÔºåÊúâ‰∫õÈóÆÈ¢òÁúãÈÅç‰∫Ü‰∏≠Êñá‰∏ñÁïåÁöÑÂçöÂÆ¢ÈÉΩÊ≤°ËÉΩÊâæÂà∞Ëß£Á≠î„ÄÇÂΩìÁÑ∂ÔºåÊ∫êÁ†ÅÂèØ‰ª•Ëß£Á≠î‰ªª‰ΩïÈóÆÈ¢ò„ÄÇ‰ΩÜÊòØÔºå‰Ω†‰∏çËÉΩ‰∏Ä‰∏ãÂ≠êË∑≥ËøõÊ∫êÁ†ÅÁöÑÁªÜËäÇÔºå‰Ω†ÂæóÂÖàÊúâ‰∏Ä‰∏™Êï¥‰ΩìÁöÑËÆ§ËØÜÊâçÂ•Ω„ÄÇ</p>
<p>ÊâÄ‰ª•ÔºåÊàëÂºÄÂßãÊêúÁ¥¢Ëã±ÊñáÁõ∏ÂÖ≥ËÆ≤Ê∫êÁ†ÅÁöÑÊñáÁ´†ÔºåÊ≤°ÊúâÂ§™Â§öËøôÊñπÈù¢ÁöÑ„ÄÇ‰ΩÜÊòØÊàëÂèëÁé∞‰∫Ü‰∏ÄÁØáË¥®ÈáèÂæàÈ´òÁöÑÊñáÁ´†ÔºåÊîæÂú®‰∫ÜÂèÇËÄÉËµÑÊñôÁ¨¨‰∏ÄÊù°ÔºåÂÆÉÂ∏¶È¢ÜËØªËÄÖ‰∏ÄÊ≠•Ê≠•‰ºòÂåñÔºåÊúÄÁªàÂÆûÁé∞‰∫Ü‰ªé map ‰∏≠ÈöèÊú∫ÂèñÂá∫‰∏Ä‰∏™ key„ÄÇÊé®Ëçê‰Ω†ÂéªÈòÖËØªÔºåÈùûÂ∏∏Á≤æÂΩ©„ÄÇÂ∞§ÂÖ∂ÊòØ‰Ω†Áü•ÈÅì‰∫Ü map ÁöÑÂ∫ïÂ±ÇÈÅçÂéÜ„ÄÅÊâ©ÂÆπÁöÑÂÖ∑‰ΩìËøáÁ®ãÂêéÊõ¥ÊòØÂ¶ÇÊ≠§„ÄÇ</p>
<p>ÊÄªÁªì‰∏Ä‰∏ãÔºåGo ËØ≠Ë®Ä‰∏≠ÔºåÈÄöËøáÂìàÂ∏åÊü•ÊâæË°®ÂÆûÁé∞ mapÔºåÁî®ÈìæË°®Ê≥ïËß£ÂÜ≥ÂìàÂ∏åÂÜ≤Á™Å„ÄÇ</p>
<p>ÈÄöËøá key ÁöÑÂìàÂ∏åÂÄºÂ∞Ü key Êï£ËêΩÂà∞‰∏çÂêåÁöÑÊ°∂‰∏≠ÔºåÊØè‰∏™Ê°∂‰∏≠Êúâ 8 ‰∏™ cell„ÄÇÂìàÂ∏åÂÄºÁöÑ‰Ωé‰ΩçÂÜ≥ÂÆöÊ°∂Â∫èÂè∑ÔºåÈ´ò‰ΩçÊ†áËØÜÂêå‰∏Ä‰∏™Ê°∂‰∏≠ÁöÑ‰∏çÂêå key„ÄÇ</p>
<p>ÂΩìÂêëÊ°∂‰∏≠Ê∑ªÂä†‰∫ÜÂæàÂ§ö keyÔºåÈÄ†ÊàêÂÖÉÁ¥†ËøáÂ§öÔºåÊàñËÄÖÊ∫¢Âá∫Ê°∂Â§™Â§öÔºåÂ∞±‰ºöËß¶ÂèëÊâ©ÂÆπ„ÄÇÊâ©ÂÆπÂàÜ‰∏∫Á≠âÈáèÊâ©ÂÆπÂíå 2 ÂÄçÂÆπÈáèÊâ©ÂÆπ„ÄÇÊâ©ÂÆπÂêéÔºåÂéüÊù•‰∏Ä‰∏™ bucket ‰∏≠ÁöÑ key ‰∏ÄÂàÜ‰∏∫‰∫åÔºå‰ºöË¢´ÈáçÊñ∞ÂàÜÈÖçÂà∞‰∏§‰∏™Ê°∂‰∏≠„ÄÇ</p>
<p>Êâ©ÂÆπËøáÁ®ãÊòØÊ∏êËøõÁöÑÔºå‰∏ªË¶ÅÊòØÈò≤Ê≠¢‰∏ÄÊ¨°Êâ©ÂÆπÈúÄË¶ÅÊê¨ËøÅÁöÑ key Êï∞ÈáèËøáÂ§öÔºåÂºïÂèëÊÄßËÉΩÈóÆÈ¢ò„ÄÇËß¶ÂèëÊâ©ÂÆπÁöÑÊó∂Êú∫ÊòØÂ¢ûÂä†‰∫ÜÊñ∞ÂÖÉÁ¥†Ôºåbucket Êê¨ËøÅÁöÑÊó∂Êú∫ÂàôÂèëÁîüÂú®ËµãÂÄº„ÄÅÂà†Èô§ÊúüÈó¥ÔºåÊØèÊ¨°ÊúÄÂ§öÊê¨ËøÅ‰∏§‰∏™ bucket„ÄÇ</p>
<p>Êü•Êâæ„ÄÅËµãÂÄº„ÄÅÂà†Èô§ÁöÑ‰∏Ä‰∏™ÂæàÊ†∏ÂøÉÁöÑÂÜÖÂÆπÊòØÂ¶Ç‰ΩïÂÆö‰ΩçÂà∞ key ÊâÄÂú®ÁöÑ‰ΩçÁΩÆÔºåÈúÄË¶ÅÈáçÁÇπÁêÜËß£„ÄÇ‰∏ÄÊó¶ÁêÜËß£ÔºåÂÖ≥‰∫é map ÁöÑÊ∫êÁ†ÅÂ∞±ÂèØ‰ª•ÁúãÊáÇ‰∫Ü„ÄÇ</p>
<p>ÊúÄÂêéÔºåÂ¶ÇÊûúÊñáÁ´†ÂØπ‰Ω†ÊúâÂ∏ÆÂä©ÔºåÊÅ≥ËØ∑‰Ω†Â∏ÆÊàëÂàÜ‰∫´‰∏Ä‰∏ãÔºåÊàñËÄÖÁÇπ‰∏Ä‰∏ãÂú®ÁúãÔºåË∞¢Ë∞¢ÔºÅ</p>
<p>ÊúÄÂêéÁöÑÊúÄÂêéÔºåÁÇπÂáª<a class="link" href="https://github.com/qcrao/Go-Questions" target="_blank" rel="noopener">ÈòÖËØªÂéüÊñá</a>Ôºå‰Ω†ÂèØËÉΩ‰ºöÂèÇ‰∏éËßÅËØÅ‰∏Ä‰∏™‰ªéÈõ∂ÂºÄÂßãÁöÑÂçÉÊòüÈ°πÁõÆ„ÄÇ</p>
<h2 id="ÂèÇËÄÉËµÑÊñô">ÂèÇËÄÉËµÑÊñô</h2>
<p>„Äêenglish Â¶Ç‰ΩïÂÆûÁé∞ÈöèÊú∫Âèñ‰∏Ä‰∏™ map ÁöÑ keyÔºåÈùûÂ∏∏Á≤æÂΩ©„Äë<a class="link" href="https://lukechampine.com/hackmap.html" target="_blank" rel="noopener">https://lukechampine.com/hackmap.html</a></p>
<p>„Äêmap ÁöÑÁª¥Âü∫ÁôæÁßë„Äë<a class="link" href="https://en.wikipedia.org/wiki/Associative_array" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Associative_array</a></p>
<p>„Äêsync.map Ê∫êÁ†ÅÂàÜÊûê„Äë<a class="link" href="https://github.com/Chasiny/Blog/blob/master/blog/go/sync.Map%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90.md" target="_blank" rel="noopener">https://github.com/Chasiny/Blog/blob/master/blog/go/sync.Map Ê∫êÁ†ÅÂàÜÊûê. md</a></p>
<p>„ÄêÂêÑÁßç map Áõ∏ÂÖ≥Êìç‰ΩúÁöÑÊµÅÁ®ãÂõæ„Äë<a class="link" href="https://www.jianshu.com/p/aa0d4808cbb8" target="_blank" rel="noopener">https://www.jianshu.com/p/aa0d4808cbb8</a></p>
<p>„Äêmap Ê∫êÁ†ÅÂàÜÊûê„Äë<a class="link" href="https://www.twblogs.net/a/5bd78d5d2b71777ac86b541f" target="_blank" rel="noopener">https://www.twblogs.net/a/5bd78d5d2b71777ac86b541f</a></p>
<p>„ÄêÊõπÂ§ßÂÖ≥‰∫é map ÁöÑÊñáÁ´† ‰∏çÁî®Ëß£Èáä„Äë<a class="link" href="https://github.com/cch123/golang-notes/blob/master/map.md" target="_blank" rel="noopener">https://github.com/cch123/golang-notes/blob/master/map.md</a></p>
<p>„Äêenglish ÊúâÂõæ„Äë<a class="link" href="https://www.ardanlabs.com/blog/2013/12/macro-view-of-map-internals-in-go.html" target="_blank" rel="noopener">https://www.ardanlabs.com/blog/2013/12/macro-view-of-map-internals-in-go.html</a></p>
<p>„Äêenglish ÂØπÊØî‰∫Ü java, c++ ÁöÑ map ÂÆûÁé∞„Äë<a class="link" href="https://dave.cheney.net/2018/05/29/how-the-go-runtime-implements-maps-efficiently-without-generics" target="_blank" rel="noopener">https://dave.cheney.net/2018/05/29/how-the-go-runtime-implements-maps-efficiently-without-generics</a></p>
<p>„Äêenglish ‰∏∫‰ªÄ‰πà go map ÂØπÁ´û‰∫âÊïèÊÑü„Äë<a class="link" href="https://dave.cheney.net/2015/12/07/are-go-maps-sensitive-to-data-races" target="_blank" rel="noopener">https://dave.cheney.net/2015/12/07/are-go-maps-sensitive-to-data-races</a></p>
<p>„Äêgolang blog map„Äë<a class="link" href="https://blog.golang.org/go-maps-in-action" target="_blank" rel="noopener">https://blog.golang.org/go-maps-in-action</a></p>
<p>„Äêrandommap ÂºÄÊ∫ê‰ª£Á†Å„Äë<a class="link" href="https://github.com/lukechampine/randmap" target="_blank" rel="noopener">https://github.com/lukechampine/randmap</a></p>
<p>„ÄêÂõæ‰∏çÈîô„Äë<a class="link" href="https://hacpai.com/article/1533916370874" target="_blank" rel="noopener">https://hacpai.com/article/1533916370874</a></p>
<p>„ÄêÂ§úËØª issue„Äë<a class="link" href="https://github.com/developer-learning/reading-go/issues/332" target="_blank" rel="noopener">https://github.com/developer-learning/reading-go/issues/332</a></p>
<p>„ÄêÊñ∞ÂèëÁé∞ÁöÑÂçöÂÆ¢ÔºåÂæàÊúâÊ∑±Â∫¶„Äë<a class="link" href="https://draveness.me/golang-hashmap" target="_blank" rel="noopener">https://draveness.me/golang-hashmap</a></p>
<p>„ÄêÊâ©ÂÆπËøáÁ®ã + Âõæ„Äë<a class="link" href="https://my.oschina.net/renhc/blog/2208417" target="_blank" rel="noopener">https://my.oschina.net/renhc/blog/2208417</a></p>
<p>„ÄêËøêÁÆóÁ¨¶„Äë<a class="link" href="https://juejin.im/post/5c0e572fe51d4522ad6e59d5" target="_blank" rel="noopener">https://juejin.im/post/5c0e572fe51d4522ad6e59d5</a></p>
<p>„Äêenglish„Äë<a class="link" href="https://www.digitalocean.com/community/tutorials/understanding-maps-in-go" target="_blank" rel="noopener">https://www.digitalocean.com/community/tutorials/understanding-maps-in-go</a></p>
<p>„Äêmap ÈÅçÂéÜ Ê∫êÁ†ÅÁÆÄÂçïÈòêËø∞„Äë<a class="link" href="https://gocn.vip/article/1704" target="_blank" rel="noopener">https://gocn.vip/article/1704</a></p>
<p>„ÄêÁü≠ÊñáÔºåÂêåÊó∂ÈÅçÂéÜ„ÄÅÂà†Èô§ key ÊòØÂèØ‰ª•ÁöÑ„Äë<a class="link" href="https://cloud.tencent.com/developer/article/1065474" target="_blank" rel="noopener">https://cloud.tencent.com/developer/article/1065474</a></p>
<p>„ÄêÈù¢Âêë‰ø°‰ª∞ÁºñÁ®ãÔºågolang range„Äë<a class="link" href="https://draveness.me/golang-for-range" target="_blank" rel="noopener">https://draveness.me/golang-for-range</a></p>
<p>„Äêslice Âíå map ‰Ωú‰∏∫ÂèÇÊï∞ÁöÑÂå∫Âà´„Äë<a class="link" href="https://stackoverflow.com/questions/47590444/slice-vs-map-to-be-used-in-parameter/47590531#47590531" target="_blank" rel="noopener">https://stackoverflow.com/questions/47590444/slice-vs-map-to-be-used-in-parameter/47590531#47590531</a></p>
<p>„ÄêGo ÂÆòÊñπÂçöÂÆ¢ÂÖ≥‰∫é map„Äë<a class="link" href="https://blog.golang.org/go-maps-in-action" target="_blank" rel="noopener">https://blog.golang.org/go-maps-in-action</a></p>
<p>„ÄêGo ËØ≠Ë®ÄÂèØÊØîËæÉÁ±ªÂûã„Äë<a class="link" href="https://golang.org/ref/spec#Comparison_operators" target="_blank" rel="noopener">https://golang.org/ref/spec#Comparison_operators</a></p>
<p>„Äêkey Á±ªÂûã„Äë<a class="link" href="http://lanlingzi.cn/post/technical/2016/0904_go_map/" target="_blank" rel="noopener">http://lanlingzi.cn/post/technical/2016/0904_go_map/</a></p>
<p>„ÄêÂìàÂ∏åÂáΩÊï∞ÊÄßËÉΩÊØîËæÉ„Äë<a class="link" href="http://aras-p.info/blog/2016/08/09/More-Hash-Function-Tests/" target="_blank" rel="noopener">http://aras-p.info/blog/2016/08/09/More-Hash-Function-Tests/</a></p>
<p>„ÄêÂìàÂ∏åÂáΩÊï∞ÈÄâÊã©ÔºåC++/Java ÂØπÊØî„Äë<a class="link" href="https://studygolang.com/articles/15839" target="_blank" rel="noopener">https://studygolang.com/articles/15839</a></p>
<p>„Äêslice Âíå map ‰Ωú‰∏∫ÂáΩÊï∞ÂèÇÊï∞„Äë<a class="link" href="https://stackoverflow.com/questions/47590444/slice-vs-map-to-be-used-in-parameter/47590531#47590531" target="_blank" rel="noopener">https://stackoverflow.com/questions/47590444/slice-vs-map-to-be-used-in-parameter/47590531#47590531</a></p>
<p>„ÄêÁÖéÈ±ºÂ§ß‰Ω¨ÂçöÂÆ¢ map1„Äë<a class="link" href="https://github.com/EDDYCJY/blog/blob/master/golang/pkg/2019-03-04-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Go-map-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E8%AE%BF%E9%97%AE%E5%85%83%E7%B4%A0.md" target="_blank" rel="noopener">https://github.com/EDDYCJY/blog/blob/master/golang/pkg/2019-03-04 - Ê∑±ÂÖ•ÁêÜËß£ Go-map - ÂàùÂßãÂåñÂíåËÆøÈóÆÂÖÉÁ¥†. md</a></p>
<p>„ÄêÁÖéÈ±ºÂ§ß‰Ω¨ÂçöÂÆ¢ map2„Äë<a class="link" href="https://github.com/EDDYCJY/blog/blob/master/golang/pkg/2019-03-24-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Go-map-%E8%B5%8B%E5%80%BC%E5%92%8C%E6%89%A9%E5%AE%B9%E8%BF%81%E7%A7%BB.md" target="_blank" rel="noopener">https://github.com/EDDYCJY/blog/blob/master/golang/pkg/2019-03-24 - Ê∑±ÂÖ•ÁêÜËß£ Go-map - ËµãÂÄºÂíåÊâ©ÂÆπËøÅÁßª. md</a></p>
<p>„ÄêÂìàÂ∏åÂáΩÊï∞ÁöÑÂÆö‰πâ„Äë<a class="link" href="http://zhangshuai.ren/2018/05/16/%E6%95%A3%E5%88%97%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0Go%E8%AF%AD%E8%A8%80Map%E5%87%BD%E6%95%B0/" target="_blank" rel="noopener">http://zhangshuai.ren/2018/05/16 / Êï£ÂàóÁÆóÊ≥ïÂÆûÁé∞ Go ËØ≠Ë®Ä Map ÂáΩÊï∞ /</a></p>
<p>„ÄêÂ¶Ç‰ΩïÊØîËæÉ‰∏§‰∏™ map Áõ∏Á≠â„Äë<a class="link" href="https://golangbot.com/maps/" target="_blank" rel="noopener">https://golangbot.com/maps/</a></p>
<p>„ÄêNAN hash„Äë<a class="link" href="https://research.swtch.com/randhash" target="_blank" rel="noopener">https://research.swtch.com/randhash</a></p>
<p>„ÄêÂπ∂ÂèëÂÆâÂÖ®ÈòêËø∞„Äë<a class="link" href="http://zjykzk.github.io/post/cs/golang/map/" target="_blank" rel="noopener">http://zjykzk.github.io/post/cs/golang/map/</a></p>

</section>


    <footer class="article-footer">
    

    </footer>


    
</article>

    <aside class="related-contents--wrapper">
    
    
        <h2 class="section-title">Áõ∏ÂÖ≥ÊñáÁ´†</h2>
        <div class="related-contents">
            <div class="flex article-list--tile">
                
                    
<article class="has-image">
    <a href="https://www.ququ123.top/2024/03/ququ-blog/">
        
        
            <div class="article-image">
                
                    <img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/cover_huc22343089de730f0d2df13b87c6ac902_47227_800x0_resize_box_3.png" loading="lazy" data-key="ququ-blog" data-hash="http://img.ququ123.top/img/cover_huc22343089de730f0d2df13b87c6ac902_47227_800x0_resize_box_3.png">
                
            </div>
        

        <div class="article-details" style="background: linear-gradient(0deg, rgba(96, 66, 45, 0.5) 0%, rgba(241, 204, 23, 0.75) 100%);">
            <h2 class="article-title">ÂçöÂÆ¢ÂØºËà™</h2>
        </div>
    </a>
</article>
                
                    
<article class="has-image">
    <a href="https://www.ququ123.top/2024/03/golang-netpoller/">
        
        
            <div class="article-image">
                
                    <img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/netpoller-goroutines-scheduling.png" loading="lazy" data-key="golang-netpoller" data-hash="https://img.ququ123.top/img/netpoller-goroutines-scheduling.png">
                
            </div>
        

        <div class="article-details" style="background: linear-gradient(0deg, rgba(92, 100, 116, 0.5) 0%, rgba(240, 162, 102, 0.75) 100%);">
            <h2 class="article-title">„Äêgolang„Äënetpoller ËØ¶Ëß£</h2>
        </div>
    </a>
</article>
                
                    
<article class="has-image">
    <a href="https://www.ququ123.top/2024/03/golang-pipe/">
        
        
            <div class="article-image">
                
                    <img src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/go-pipe.png" loading="lazy" data-key="golang-pipe" data-hash="https://img.ququ123.top/img/go-pipe.png">
                
            </div>
        

        <div class="article-details" style="background: linear-gradient(0deg, rgba(60, 68, 76, 0.5) 0%, rgba(177, 78, 111, 0.75) 100%);">
            <h2 class="article-title">„Äêgolang„Äëpipe ËØ¶Ëß£</h2>
        </div>
    </a>
</article>
                
            </div>
        </div>
    
</aside>

     
     
        
    
  
  <link rel="stylesheet" href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/waline.css">
  


  
  <div id="waline" data-v-app=""><div data-waline=""><!--v-if--><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><div class="wl-header-item"><label for="wl-nick">ÊòµÁß∞</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text"></div><div class="wl-header-item"><label for="wl-mail">ÈÇÆÁÆ±</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email"></div><div class="wl-header-item"><label for="wl-link">ÁΩëÂùÄ</label><input id="wl-link" class="wl-input wl-link" name="link" type="text"></div></div><textarea id="wl-edit" class="wl-editor" placeholder="Ê¨¢ËøéËØÑËÆ∫"></textarea><div class="wl-preview" style="display: none;"><hr><h4>È¢ÑËßà:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="Ë°®ÊÉÖ" style=""><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="Ë°®ÊÉÖÂåÖ"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z" style="transform: translateY(0.5px);"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="‰∏ä‰º†ÂõæÁâá"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="È¢ÑËßà"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-captcha-container"></div><div class="wl-text-number">0 <!--v-if--> &nbsp;Â≠ó</div><button type="button" class="wl-btn">ÁôªÂΩï</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter">Êèê‰∫§</button></div><div class="wl-gif-popup"><input type="text" placeholder="ÊêúÁ¥¢Ë°®ÊÉÖÂåÖ"><!--v-if--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animatetransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animatetransform></circle></svg></div></div><div class="wl-emoji-popup"><div class="wl-tab-wrapper"><button type="button" title="weibo_smile"><!--v-if--></button><button type="button" title="weibo_lovely"><!--v-if--></button><button type="button" title="weibo_blush"><!--v-if--></button><button type="button" title="weibo_grin"><!--v-if--></button><button type="button" title="weibo_laugh"><!--v-if--></button><button type="button" title="weibo_joy"><!--v-if--></button><button type="button" title="weibo_angry"><!--v-if--></button><button type="button" title="weibo_bye"><!--v-if--></button><button type="button" title="weibo_hammer"><!--v-if--></button><button type="button" title="weibo_kiss"><!--v-if--></button><button type="button" title="weibo_love"><!--v-if--></button><button type="button" title="weibo_mask"><!--v-if--></button><button type="button" title="weibo_money"><!--v-if--></button><button type="button" title="weibo_quiet"><!--v-if--></button><button type="button" title="weibo_rage"><!--v-if--></button><button type="button" title="weibo_sad"><!--v-if--></button><button type="button" title="weibo_shy"><!--v-if--></button><button type="button" title="weibo_sick"><!--v-if--></button><button type="button" title="weibo_slient"><!--v-if--></button><button type="button" title="weibo_smirk"><!--v-if--></button><button type="button" title="weibo_slap"><!--v-if--></button><button type="button" title="weibo_antic"><!--v-if--></button><button type="button" title="weibo_desire"><!--v-if--></button><button type="button" title="weibo_longing"><!--v-if--></button><button type="button" title="weibo_no_idea"><!--v-if--></button><button type="button" title="weibo_look_down"><!--v-if--></button><button type="button" title="weibo_clap"><!--v-if--></button><button type="button" title="weibo_yum"><!--v-if--></button><button type="button" title="weibo_sleep"><!--v-if--></button><button type="button" title="weibo_dizzy_face"><!--v-if--></button><button type="button" title="weibo_chuckle"><!--v-if--></button><button type="button" title="weibo_disappointed"><!--v-if--></button><button type="button" title="weibo_flushed"><!--v-if--></button><button type="button" title="weibo_heart_eyes"><!--v-if--></button><button type="button" title="weibo_no"><!--v-if--></button><button type="button" title="weibo_shuai"><!--v-if--></button><button type="button" title="weibo_suprised"><!--v-if--></button><button type="button" title="weibo_think"><!--v-if--></button><button type="button" title="weibo_vomit"><!--v-if--></button><button type="button" title="weibo_scream"><!--v-if--></button><button type="button" title="weibo_sleepy"><!--v-if--></button><button type="button" title="weibo_sob"><!--v-if--></button><button type="button" title="weibo_sunglasses"><!--v-if--></button><button type="button" title="weibo_greddy"><!--v-if--></button><button type="button" title="weibo_pick_nose"><!--v-if--></button><button type="button" title="weibo_annoyed"><!--v-if--></button><button type="button" title="weibo_awkward"><!--v-if--></button><button type="button" title="weibo_confused"><!--v-if--></button><button type="button" title="weibo_grievance"><!--v-if--></button><button type="button" title="weibo_poor"><!--v-if--></button><button type="button" title="weibo_wink"><!--v-if--></button><button type="button" title="weibo_rolling_eyes"><!--v-if--></button><button type="button" title="weibo_watermalon"><!--v-if--></button><button type="button" title="weibo_annoyed_left"><!--v-if--></button><button type="button" title="weibo_annoyed_right"><!--v-if--></button><button type="button" title="weibo_yawn"><!--v-if--></button><button type="button" title="weibo_hufen"><!--v-if--></button><button type="button" title="weibo_doge"><!--v-if--></button><button type="button" title="weibo_husky"><!--v-if--></button><button type="button" title="weibo_dog_annoyed"><!--v-if--></button><button type="button" title="weibo_dog_bye"><!--v-if--></button><button type="button" title="weibo_dog_consider"><!--v-if--></button><button type="button" title="weibo_dog_cry"><!--v-if--></button><button type="button" title="weibo_dog_joy"><!--v-if--></button><button type="button" title="weibo_dog_laugh"><!--v-if--></button><button type="button" title="weibo_dog_sweat"><!--v-if--></button><button type="button" title="weibo_dog_think"><!--v-if--></button><button type="button" title="weibo_dog_yum"><!--v-if--></button><button type="button" title="weibo_cat"><!--v-if--></button><button type="button" title="weibo_cat_annoyed"><!--v-if--></button><button type="button" title="weibo_cat_bye"><!--v-if--></button><button type="button" title="weibo_cat_cry"><!--v-if--></button><button type="button" title="weibo_cat_think"><!--v-if--></button><button type="button" title="weibo_girl_annoyed"><!--v-if--></button><button type="button" title="weibo_boy"><!--v-if--></button><button type="button" title="weibo_girl"><!--v-if--></button><button type="button" title="weibo_panda"><!--v-if--></button><button type="button" title="weibo_pig"><!--v-if--></button><button type="button" title="weibo_rabbit"><!--v-if--></button><button type="button" title="weibo_ultraman"><!--v-if--></button><button type="button" title="weibo_wool_group"><!--v-if--></button><button type="button" title="weibo_yan"><!--v-if--></button><button type="button" title="weibo_xi"><!--v-if--></button><button type="button" title="weibo_soap"><!--v-if--></button><button type="button" title="weibo_meng"><!--v-if--></button><button type="button" title="weibo_jiong"><!--v-if--></button><button type="button" title="weibo_geili"><!--v-if--></button><button type="button" title="weibo_shenma"><!--v-if--></button><button type="button" title="weibo_alpaca"><!--v-if--></button></div><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> ËØÑËÆ∫</div><ul class="wl-sort"><li class="active">ÊåâÊ≠£Â∫è</li><li class="">ÊåâÂÄíÂ∫è</li><li class="">ÊåâÁÉ≠Â∫¶</li></ul></div><div class="wl-cards"></div><div class="wl-operation"><button type="button" class="wl-btn">Âà∑Êñ∞</button></div><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v3.0.0-alpha.2</div></div></div>
  <script type="module">
    import { init } from 'https://unpkg.com/@waline/client@3.0.0-alpha.2/dist/waline.mjs';

    init({
      el: '#waline',
      serverURL: 'https://comment.ququ123.top',
    });
  </script>



    

    <footer class="site-footer">
  


    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


<script>
(function(u, c) {
  var d = document, t = 'script', o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
  o.src = u;
  if (c) { o.addEventListener('load', function(e) { c(e); }); }
  s.parentNode.insertBefore(o, s);
})('//cdn.bootcss.com/pangu/3.3.0/pangu.min.js', function() {
  pangu.spacingPage();
});
</script>


  ¬© 
  
      2020 - 
  
  2024 
<a href="https://www.ququ123.top/">&nbsp;&nbsp;&nbsp;ÂéªÂéªÁöÑÂçöÂÆ¢</a>
  <br>
        ËøêË°å: <a id="days">755</a> Â§©&nbsp;&nbsp;&nbsp;
        ‰π¶ÂÜô: 562.6k Â≠ó  &nbsp;&nbsp;&nbsp;
        69 ÁØáÊñáÁ´†
  <br> 

  ÊÄªËÆøÂÆ¢Êï∞: <span id="busuanzi_value_site_uv">984</span> &nbsp;&nbsp;&nbsp;
  ÊÄªËÆøÈóÆÈáè: <span id="busuanzi_value_site_pv">8723</span> &nbsp;&nbsp;&nbsp;
<section class="powerby">
  <br>
    <section class="BeiAn-info">
Â§áÊ°àÂè∑Ôºö
  <a target="_blank" href="http://beian.miit.gov.cn/" style="color:#0000ff" rel="nofollow">Ëµ£ ICP Â§á 2022002813 Âè∑ - 2</a> | 
  

    </section>
</section>

<script>
var s1 = '2022-04-12';
s1 = new Date(s1.replace(/-/g, "/"));
s2 = new Date();
var days = s2.getTime() - s1.getTime();
var number_of_days = parseInt(days / (1000 * 60 * 60 * 24));
document.getElementById('days').innerHTML = number_of_days;
</script>



</footer>



    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/photoswipe.min.js" integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin="anonymous" defer="">
            </script><script src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/photoswipe-ui-default.min.js" integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin="anonymous" defer="">
            </script><link rel="stylesheet" href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/default-skin.css" integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin="anonymous"><link rel="stylesheet" href="./„Äêgolang„Äëmap ËØ¶Ëß£_files/photoswipe.css" integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin="anonymous">

            </main>
    
    
    
    <aside class="sidebar right-sidebar sticky">
        
            <form action="https://www.ququ123.top/search/" class="search-form widget">
        <p>
            <label>ÊêúÁ¥¢</label>
            <input name="keyword" required="" placeholder="ËæìÂÖ•ÂÖ≥ÈîÆËØç...">
        
            <button title="ÊêúÁ¥¢">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"></path>
  <circle cx="10" cy="10" r="7"></circle>
  <line x1="21" y1="21" x2="15" y2="15"></line>
</svg>



            </button>
        </p>
    </form>
        
            
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"></path>
  <line x1="5" y1="9" x2="19" y2="9"></line>
  <line x1="5" y1="15" x2="19" y2="15"></line>
  <line x1="11" y1="4" x2="7" y2="20"></line>
  <line x1="17" y1="4" x2="13" y2="20"></line>
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li class=""><a href="https://www.ququ123.top/2022/04/golang_map_principle/#%E4%BB%80%E4%B9%88%E6%98%AF-map">‰ªÄ‰πàÊòØ map</a></li>
    <li class=""><a href="https://www.ququ123.top/2022/04/golang_map_principle/#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8-map">‰∏∫‰ªÄ‰πàË¶ÅÁî® map</a></li>
    <li class=""><a href="https://www.ququ123.top/2022/04/golang_map_principle/#map-%E7%9A%84%E5%BA%95%E5%B1%82%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0">map ÁöÑÂ∫ïÂ±ÇÂ¶Ç‰ΩïÂÆûÁé∞</a></li>
    <li class=""><a href="https://www.ququ123.top/2022/04/golang_map_principle/#map-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B">map ÂÜÖÂ≠òÊ®°Âûã</a></li>
    <li class="active-class"><a href="https://www.ququ123.top/2022/04/golang_map_principle/#%E5%88%9B%E5%BB%BA-map">ÂàõÂª∫ map</a></li>
    <li class=""><a href="https://www.ququ123.top/2022/04/golang_map_principle/#%E5%93%88%E5%B8%8C%E5%87%BD%E6%95%B0">ÂìàÂ∏åÂáΩÊï∞</a></li>
    <li class=""><a href="https://www.ququ123.top/2022/04/golang_map_principle/#key-%E5%AE%9A%E4%BD%8D%E8%BF%87%E7%A8%8B">key ÂÆö‰ΩçËøáÁ®ã</a></li>
    <li class=""><a href="https://www.ququ123.top/2022/04/golang_map_principle/#map-%E7%9A%84%E4%B8%A4%E7%A7%8D-get-%E6%93%8D%E4%BD%9C">map ÁöÑ‰∏§Áßç get Êìç‰Ωú</a></li>
    <li class=""><a href="https://www.ququ123.top/2022/04/golang_map_principle/#%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E6%89%A9%E5%AE%B9">Â¶Ç‰ΩïËøõË°åÊâ©ÂÆπ</a></li>
    <li class=""><a href="https://www.ququ123.top/2022/04/golang_map_principle/#map-%E7%9A%84%E9%81%8D%E5%8E%86">map ÁöÑÈÅçÂéÜ</a></li>
    <li class=""><a href="https://www.ququ123.top/2022/04/golang_map_principle/#map-%E7%9A%84%E8%B5%8B%E5%80%BC">map ÁöÑËµãÂÄº</a></li>
    <li><a href="https://www.ququ123.top/2022/04/golang_map_principle/#map-%E8%BF%9B%E9%98%B6">map ËøõÈò∂</a></li>
    <li class=""><a href="https://www.ququ123.top/2022/04/golang_map_principle/#%E5%8F%AF%E4%BB%A5%E8%BE%B9%E9%81%8D%E5%8E%86%E8%BE%B9%E5%88%A0%E9%99%A4%E5%90%97">ÂèØ‰ª•ËæπÈÅçÂéÜËæπÂà†Èô§Âêó</a></li>
    <li class=""><a href="https://www.ququ123.top/2022/04/golang_map_principle/#key-%E5%8F%AF%E4%BB%A5%E6%98%AF-float-%E5%9E%8B%E5%90%97">key ÂèØ‰ª•ÊòØ float ÂûãÂêóÔºü</a></li>
    <li><a href="https://www.ququ123.top/2022/04/golang_map_principle/#%E6%80%BB%E7%BB%93">ÊÄªÁªì</a></li>
    <li class=""><a href="https://www.ququ123.top/2022/04/golang_map_principle/#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">ÂèÇËÄÉËµÑÊñô</a></li>
  </ol>
</nav>
        </div>
    </section>

        
            <section class="widget categories">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"></path>
  <path d="M9.828 9.172a4 4 0 1 0 0 5.656 a10 10 0 0 0 2.172 -2.828a10 10 0 0 1 2.172 -2.828 a4 4 0 1 1 0 5.656a10 10 0 0 1 -2.172 -2.828a10 10 0 0 0 -2.172 -2.828"></path>
</svg>


  
        </div> 
        <h2 class="widget-title section-title">Categories</h2>
    <div class="widget-categories--list">
<div class="widget">
    <h3 class="widget-title"> </h3>
    <div class="widget-body">
        <div class="category-list">
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/dict/" class="category-list-link">dict<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/golang/" class="category-list-link">golang<span class="category-list-count">21</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/homeassistant/" class="category-list-link">homeassistant<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/http/" class="category-list-link">http<span class="category-list-count">2</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/hugo/" class="category-list-link">hugo<span class="category-list-count">2</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/intset/" class="category-list-link">intset<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/io/" class="category-list-link">io<span class="category-list-count">2</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/k3s/" class="category-list-link">k3s<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/k3sup/" class="category-list-link">k3sup<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/k8s/" class="category-list-link">k8s<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/katex/" class="category-list-link">katex<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/linux/" class="category-list-link">linux<span class="category-list-count">2</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/mysql/" class="category-list-link">mysql<span class="category-list-count">3</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/netpoller/" class="category-list-link">netpoller<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/pipe/" class="category-list-link">pipe<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/quicklist/" class="category-list-link">quicklist<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/raft/" class="category-list-link">raft<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/redis/" class="category-list-link">redis<span class="category-list-count">10</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/robj/" class="category-list-link">robj<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/sds/" class="category-list-link">sds<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/skiplist/" class="category-list-link">skiplist<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/tcp/" class="category-list-link">tcp<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/type/" class="category-list-link">type<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/wireguard/" class="category-list-link">wireguard<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/zero-copy/" class="category-list-link">zero-copy<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/zero_copy/" class="category-list-link">zero_copy<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/ziplist/" class="category-list-link">ziplist<span class="category-list-count">1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/%E5%88%86%E5%B8%83%E5%BC%8F/" class="category-list-link">ÂàÜÂ∏ÉÂºè<span class="category-list-count"> 1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/%E5%8D%97%E7%93%9C%E4%B9%A6/" class="category-list-link">ÂçóÁìú‰π¶<span class="category-list-count"> 17</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/%E5%8E%9F%E7%90%86/" class="category-list-link">ÂéüÁêÜ<span class="category-list-count"> 7</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/%E5%90%B4%E6%81%A9%E8%BE%BE/" class="category-list-link">Âê¥ÊÅ©Ëææ<span class="category-list-count"> 10</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/%E5%B0%8F%E7%B1%B3/" class="category-list-link">Â∞èÁ±≥<span class="category-list-count"> 1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/%E6%94%AF%E4%BB%98/" class="category-list-link">ÊîØ‰ªò<span class="category-list-count"> 1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="category-list-link">Êï∞ÊçÆÁªìÊûÑ<span class="category-list-count"> 7</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" class="category-list-link">Êú∫Âô®Â≠¶‰π†<span class="category-list-count"> 27</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/%E7%BD%91%E7%BB%9C/" class="category-list-link">ÁΩëÁªú<span class="category-list-count"> 1</span></a>
            </div>
            <div class="category-list-item"><a href="http://www.ququ123.top/categories/%E9%9D%A2%E8%AF%95/" class="category-list-link">Èù¢ËØï<span class="category-list-count"> 1</span></a>
            </div>
        </div>
    </div>
</div>
    </div>
    </section>
        
            <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"></path>
  <path d="M9.828 9.172a4 4 0 1 0 0 5.656 a10 10 0 0 0 2.172 -2.828a10 10 0 0 1 2.172 -2.828 a4 4 0 1 1 0 5.656a10 10 0 0 1 -2.172 -2.828a10 10 0 0 0 -2.172 -2.828"></path>
</svg>



        </div>
        <h2 class="widget-title section-title">ÂΩíÊ°£</h2>

        
        
        
        
        
        <div class="widget-archive--list">
            <div class="archives-year">
                    <a href="https://www.ququ123.top/archives/#2024">
                        
                            <span class="year">2024</span>
                            <span class="count">16</span>
                        
                    </a> 
                </div>
            <div class="archives-year">
                    <a href="https://www.ququ123.top/archives/#2023">
                        
                            <span class="year">2023</span>
                            <span class="count">31</span>
                        
                    </a> 
                </div>
            <div class="archives-year">
                    <a href="https://www.ququ123.top/archives/#2022">
                        
                            <span class="year">2022</span>
                            <span class="count">22</span>
                        
                    </a> 
                </div>
            
        </div>
    </section>
        
            <section class="widget tagCloud">
    <div class="widget-icon">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"></path>
  <path d="M11 3L20 12a1.5 1.5 0 0 1 0 2L14 20a1.5 1.5 0 0 1 -2 0L3 11v-4a4 4 0 0 1 4 -4h4"></path>
  <circle cx="9" cy="9" r="2"></circle>
</svg>



    </div>
    <h2 class="widget-title section-title">Ê†áÁ≠æ‰∫ë</h2>

    <div class="tagCloud-tags">
        
    </div>
</section>
        
    </aside>


        </div>
        <script src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/vibrant.min.js" integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin="anonymous">
            </script><script type="text/javascript" src="./„Äêgolang„Äëmap ËØ¶Ëß£_files/main.js" defer=""></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    

<div id="waifu-toggle">
            <span>ÁúãÊùøÂ®ò</span>
        </div><div id="waifu" style="bottom: 0px;">
            <div id="waifu-tips" class="">Ê¨¢ËøéÈòÖËØª<span>„Äå„Äêgolang„Äëmap ËØ¶Ëß£„Äç</span></div>
            <canvas id="live2d" width="800" height="800"></canvas>
            <div id="waifu-tool"><span id="waifu-tool-hitokoto"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M512 240c0 114.9-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6C73.6 471.1 44.7 480 16 480c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4l0 0 0 0 0 0 0 0 .3-.3c.3-.3 .7-.7 1.3-1.4c1.1-1.2 2.8-3.1 4.9-5.7c4.1-5 9.6-12.4 15.2-21.6c10-16.6 19.5-38.4 21.4-62.9C17.7 326.8 0 285.1 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208z"></path></svg></span><span id="waifu-tool-asteroids"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L277.3 424.9l-40.1 74.5c-5.2 9.7-16.3 14.6-27 11.9S192 499 192 488V392c0-5.3 1.8-10.5 5.1-14.7L362.4 164.7c2.5-7.1-6.5-14.3-13-8.4L170.4 318.2l-32 28.9 0 0c-9.2 8.3-22.3 10.6-33.8 5.8l-85-35.4C8.4 312.8 .8 302.2 .1 290s5.5-23.7 16.1-29.8l448-256c10.7-6.1 23.9-5.5 34 1.4z"></path></svg></span><span id="waifu-tool-switch-model"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M399 384.2C376.9 345.8 335.4 320 288 320H224c-47.4 0-88.9 25.8-111 64.2c35.2 39.2 86.2 63.8 143 63.8s107.8-24.7 143-63.8zM512 256c0 141.4-114.6 256-256 256S0 397.4 0 256S114.6 0 256 0S512 114.6 512 256zM256 272c39.8 0 72-32.2 72-72s-32.2-72-72-72s-72 32.2-72 72s32.2 72 72 72z"></path></svg></span><span id="waifu-tool-switch-texture"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M320 64c0-35.3-28.7-64-64-64s-64 28.7-64 64s28.7 64 64 64s64-28.7 64-64zm-96 96c-35.3 0-64 28.7-64 64v48c0 17.7 14.3 32 32 32h1.8l11.1 99.5c1.8 16.2 15.5 28.5 31.8 28.5h38.7c16.3 0 30-12.3 31.8-28.5L318.2 304H320c17.7 0 32-14.3 32-32V224c0-35.3-28.7-64-64-64H224zM132.3 394.2c13-2.4 21.7-14.9 19.3-27.9s-14.9-21.7-27.9-19.3c-32.4 5.9-60.9 14.2-82 24.8c-10.5 5.3-20.3 11.7-27.8 19.6C6.4 399.5 0 410.5 0 424c0 21.4 15.5 36.1 29.1 45c14.7 9.6 34.3 17.3 56.4 23.4C130.2 504.7 190.4 512 256 512s125.8-7.3 170.4-19.6c22.1-6.1 41.8-13.8 56.4-23.4c13.7-8.9 29.1-23.6 29.1-45c0-13.5-6.4-24.5-14-32.6c-7.5-7.9-17.3-14.3-27.8-19.6c-21-10.6-49.5-18.9-82-24.8c-13-2.4-25.5 6.3-27.9 19.3s6.3 25.5 19.3 27.9c30.2 5.5 53.7 12.8 69 20.5c3.2 1.6 5.8 3.1 7.9 4.5c3.6 2.4 3.6 7.2 0 9.6c-8.8 5.7-23.1 11.8-43 17.3C374.3 457 318.5 464 256 464s-118.3-7-157.7-17.9c-19.9-5.5-34.2-11.6-43-17.3c-3.6-2.4-3.6-7.2 0-9.6c2.1-1.4 4.8-2.9 7.9-4.5c15.3-7.7 38.8-14.9 69-20.5z"></path></svg></span><span id="waifu-tool-photo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M220.6 121.2L271.1 96 448 96v96H333.2c-21.9-15.1-48.5-24-77.2-24s-55.2 8.9-77.2 24H64V128H192c9.9 0 19.7-2.3 28.6-6.8zM0 128V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H271.1c-9.9 0-19.7 2.3-28.6 6.8L192 64H160V48c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16l0 16C28.7 64 0 92.7 0 128zM344 304c0 48.6-39.4 88-88 88s-88-39.4-88-88s39.4-88 88-88s88 39.4 88 88z"></path></svg></span><span id="waifu-tool-info"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-144c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32z"></path></svg></span><span id="waifu-tool-quit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"></path></svg></span></div>
        </div></body></html>